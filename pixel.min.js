!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pixel=t()}}(function(){var t,e,r;return function n(t,e,r){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return i(r?r:e)},u,u.exports,n,t,e,r)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,r){},{}],2:[function(t,e,r){function n(t,e){return f.isUndefined(e)?""+e:f.isNumber(e)&&!isFinite(e)?e.toString():f.isFunction(e)||f.isRegExp(e)?e.toString():e}function i(t,e){return f.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,n),128)}function s(t,e,r,n,i){throw new v.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",v.ok)}function c(t,e){if(t===e)return!0;if(f.isBuffer(t)&&f.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return f.isDate(t)&&f.isDate(e)?t.getTime()===e.getTime():f.isRegExp(t)&&f.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:f.isObject(t)||f.isObject(e)?u(t,e):t==e}function l(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function u(t,e){if(f.isNullOrUndefined(t)||f.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(f.isPrimitive(t)||f.isPrimitive(e))return t===e;var r=l(t),n=l(e);if(r&&!n||!r&&n)return!1;if(r)return t=d.call(t),e=d.call(e),c(t,e);var i,o,s=m(t),a=m(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!c(t[i],e[i]))return!1;return!0}function p(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function h(t,e,r,n){var i;f.isString(r)&&(n=r,r=null);try{e()}catch(o){i=o}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&s(i,r,"Missing expected exception"+n),!t&&p(i,r)&&s(i,r,"Got unwanted exception"+n),t&&i&&r&&!p(i,r)||!t&&i)throw i}var f=t("util/"),d=Array.prototype.slice,_=Object.prototype.hasOwnProperty,v=e.exports=a;v.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=e.name,a=n.indexOf("\n"+i);if(a>=0){var c=n.indexOf("\n",a+1);n=n.substring(c+1)}this.stack=n}}},f.inherits(v.AssertionError,Error),v.fail=s,v.ok=a,v.equal=function(t,e,r){t!=e&&s(t,e,r,"==",v.equal)},v.notEqual=function(t,e,r){t==e&&s(t,e,r,"!=",v.notEqual)},v.deepEqual=function(t,e,r){c(t,e)||s(t,e,r,"deepEqual",v.deepEqual)},v.notDeepEqual=function(t,e,r){c(t,e)&&s(t,e,r,"notDeepEqual",v.notDeepEqual)},v.strictEqual=function(t,e,r){t!==e&&s(t,e,r,"===",v.strictEqual)},v.notStrictEqual=function(t,e,r){t===e&&s(t,e,r,"!==",v.notStrictEqual)},v["throws"]=function(t,e,r){h.apply(this,[!0].concat(d.call(arguments)))},v.doesNotThrow=function(t,e){h.apply(this,[!1].concat(d.call(arguments)))},v.ifError=function(t){if(t)throw t};var m=Object.keys||function(t){var e=[];for(var r in t)_.call(t,r)&&e.push(r);return e}},{"util/":40}],3:[function(t,e,r){arguments[4][1][0].apply(r,arguments)},{dup:1}],4:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,r,n,i){for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],5:[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}e.exports=n},{}],6:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";function n(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function i(t,e,r,n){var i=o,s=n+r;t=-1^t;for(var a=n;s>a;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}var o=n();e.exports=i},{}],8:[function(t,e,r){"use strict";function n(t,e){return t.msg=P[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(S.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function a(t,e){F._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function c(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,S.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=R(t.adler,e,i,r):2===t.state.wrap&&(t.adler=C(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function p(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,u=t.w_mask,p=t.prev,h=t.strstart+ct,f=l[o+s-1],d=l[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do if(r=e,l[r+s]===d&&l[r+s-1]===f&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do;while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&h>o);if(n=ct-(h-o),o=h-ct,n>s){if(t.match_start=e,s=n,n>=a)break;f=l[o+s-1],d=l[o+s]}}while((e=p[e&u])>c&&0!==--i);return s<=t.lookahead?s:t.lookahead}function h(t){var e,r,n,i,o,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-lt)){S.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--r);r=s,e=r;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=u(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=at)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+at-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<at)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function f(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===L)return gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return gt;if(t.strstart-t.block_start>=t.w_size-lt&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?bt:wt):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?gt:gt}function d(t,e){for(var r,n;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===L)return gt;if(0===t.lookahead)break}if(r=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-lt&&(t.match_length=p(t,r)),t.match_length>=at)if(n=F._tr_tally(t,t.strstart-t.match_start,t.match_length-at),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=at){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=F._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=t.strstart<at-1?t.strstart:at-1,e===U?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:yt}function _(t,e){for(var r,n,i;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===L)return gt;if(0===t.lookahead)break}if(r=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=at-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-lt&&(t.match_length=p(t,r),t.match_length<=5&&(t.strategy===q||t.match_length===at&&t.strstart-t.match_start>4096)&&(t.match_length=at-1)),t.prev_length>=at&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-at,n=F._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-at),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=at-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return gt}else if(t.match_available){if(n=F._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=F._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<at-1?t.strstart:at-1,e===U?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:yt}function v(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=ct){if(h(t),t.lookahead<=ct&&e===L)return gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=at&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+ct;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&o>i);t.match_length=ct-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=at?(r=F._tr_tally(t,1,t.match_length-at),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=F._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:yt}function m(t,e){for(var r;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===L)return gt;break}if(t.match_length=0,r=F._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:yt}function g(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=T[t.level].max_lazy,t.good_match=T[t.level].good_length,t.nice_match=T[t.level].nice_length,t.max_chain_length=T[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=at-1,t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*ot),this.dyn_dtree=new S.Buf16(2*(2*nt+1)),this.bl_tree=new S.Buf16(2*(2*it+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(st+1),this.heap=new S.Buf16(2*rt+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*rt+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?pt:vt,t.adler=2===e.wrap?0:1,e.last_flush=L,F._tr_init(e),B):n(t,M)}function w(t){var e=b(t);return e===B&&g(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?M:(t.state.gzhead=e,B):M}function j(t,e,r,i,o,s){if(!t)return M;var a=1;if(e===V&&(e=6),0>i?(a=0,i=-i):i>15&&(a=2,i-=16),1>o||o>G||r!==Y||8>i||i>15||0>e||e>9||0>s||s>W)return n(t,M);8===i&&(i=9);var c=new y;return t.state=c,c.strm=t,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+at-1)/at),c.window=new S.Buf8(2*c.w_size),c.head=new S.Buf16(c.hash_size),c.prev=new S.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new S.Buf8(c.pending_buf_size),c.d_buf=c.lit_bufsize>>1,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=s,c.method=r,w(t)}function k(t,e){return j(t,e,Y,X,K,$)}function E(t,e){var r,a,u,p;if(!t||!t.state||e>D||0>e)return t?n(t,M):M;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===mt&&e!==U)return n(t,0===t.avail_out?H:M);if(a.strm=t,r=a.last_flush,a.last_flush=e,a.status===pt)if(2===a.wrap)t.adler=0,c(a,31),c(a,139),c(a,8),a.gzhead?(c(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),c(a,255&a.gzhead.time),c(a,a.gzhead.time>>8&255),c(a,a.gzhead.time>>16&255),c(a,a.gzhead.time>>24&255),c(a,9===a.level?2:a.strategy>=Z||a.level<2?4:0),c(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(c(a,255&a.gzhead.extra.length),c(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=C(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ht):(c(a,0),c(a,0),c(a,0),c(a,0),c(a,0),c(a,9===a.level?2:a.strategy>=Z||a.level<2?4:0),c(a,xt),a.status=vt);else{var h=Y+(a.w_bits-8<<4)<<8,f=-1;f=a.strategy>=Z||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=f<<6,0!==a.strstart&&(h|=ut),h+=31-h%31,a.status=vt,l(a,h),0!==a.strstart&&(l(a,t.adler>>>16),l(a,65535&t.adler)),t.adler=1}if(a.status===ht)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending!==a.pending_buf_size));)c(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ft)}else a.status=ft;if(a.status===ft)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){p=1;break}p=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,c(a,p)}while(0!==p);a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),0===p&&(a.gzindex=0,a.status=dt)}else a.status=dt;if(a.status===dt)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){p=1;break}p=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,c(a,p)}while(0!==p);a.gzhead.hcrc&&a.pending>u&&(t.adler=C(t.adler,a.pending_buf,a.pending-u,u)),0===p&&(a.status=_t)}else a.status=_t;if(a.status===_t&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(c(a,255&t.adler),c(a,t.adler>>8&255),t.adler=0,a.status=vt)):a.status=vt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,B}else if(0===t.avail_in&&i(e)<=i(r)&&e!==U)return n(t,H);if(a.status===mt&&0!==t.avail_in)return n(t,H);if(0!==t.avail_in||0!==a.lookahead||e!==L&&a.status!==mt){var d=a.strategy===Z?m(a,e):a.strategy===Q?v(a,e):T[a.level].func(a,e);if((d===bt||d===wt)&&(a.status=mt),d===gt||d===bt)return 0===t.avail_out&&(a.last_flush=-1),B;if(d===yt&&(e===I?F._tr_align(a):e!==D&&(F._tr_stored_block(a,0,0,!1),e===O&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,B}return e!==U?B:a.wrap<=0?z:(2===a.wrap?(c(a,255&t.adler),c(a,t.adler>>8&255),c(a,t.adler>>16&255),c(a,t.adler>>24&255),c(a,255&t.total_in),c(a,t.total_in>>8&255),c(a,t.total_in>>16&255),c(a,t.total_in>>24&255)):(l(a,t.adler>>>16),l(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?B:z)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==pt&&e!==ht&&e!==ft&&e!==dt&&e!==_t&&e!==vt&&e!==mt?n(t,M):(t.state=null,e===vt?n(t,N):B)):M}var T,S=t("../utils/common"),F=t("./trees"),R=t("./adler32"),C=t("./crc32"),P=t("./messages"),L=0,I=1,O=3,U=4,D=5,B=0,z=1,M=-2,N=-3,H=-5,V=-1,q=1,Z=2,Q=3,W=4,$=0,J=2,Y=8,G=9,X=15,K=8,tt=29,et=256,rt=et+1+tt,nt=30,it=19,ot=2*rt+1,st=15,at=3,ct=258,lt=ct+at+1,ut=32,pt=42,ht=69,ft=73,dt=91,_t=103,vt=113,mt=666,gt=1,yt=2,bt=3,wt=4,xt=3,jt=function(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i};T=[new jt(0,0,0,0,f),new jt(4,4,8,4,d),new jt(4,5,16,8,d),new jt(4,6,32,32,d),new jt(4,4,16,16,_),new jt(8,16,32,32,_),new jt(8,16,128,128,_),new jt(8,32,128,256,_),new jt(32,128,258,1024,_),new jt(32,258,258,4096,_)],r.deflateInit=k,r.deflateInit2=j,r.deflateReset=w,r.deflateResetKeep=b,r.deflateSetHeader=x,r.deflate=E,r.deflateEnd=A,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":5,"./crc32":7,"./messages":12,"./trees":13}],9:[function(t,e,r){"use strict";var n=30,i=12;e.exports=function(t,e){var r,o,s,a,c,l,u,p,h,f,d,_,v,m,g,y,b,w,x,j,k,E,A,T,S;r=t.state,o=t.next_in,T=t.input,s=o+(t.avail_in-5),a=t.next_out,S=t.output,c=a-(e-t.avail_out),l=a+(t.avail_out-257),u=r.dmax,p=r.wsize,h=r.whave,f=r.wnext,d=r.window,_=r.hold,v=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{15>v&&(_+=T[o++]<<v,v+=8,_+=T[o++]<<v,v+=8),w=m[_&y];e:for(;;){if(x=w>>>24,_>>>=x,v-=x,x=w>>>16&255,0===x)S[a++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=m[(65535&w)+(_&(1<<x)-1)];continue e}if(32&x){r.mode=i;break t}t.msg="invalid literal/length code",r.mode=n;break t}j=65535&w,x&=15,x&&(x>v&&(_+=T[o++]<<v,v+=8),j+=_&(1<<x)-1,_>>>=x,v-=x),15>v&&(_+=T[o++]<<v,v+=8,_+=T[o++]<<v,v+=8),w=g[_&b];r:for(;;){if(x=w>>>24,_>>>=x,v-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=g[(65535&w)+(_&(1<<x)-1)];continue r}t.msg="invalid distance code",r.mode=n;break t}if(k=65535&w,x&=15,x>v&&(_+=T[o++]<<v,v+=8,x>v&&(_+=T[o++]<<v,v+=8)),k+=_&(1<<x)-1,k>u){t.msg="invalid distance too far back",r.mode=n;break t}if(_>>>=x,v-=x,x=a-c,k>x){if(x=k-x,x>h&&r.sane){t.msg="invalid distance too far back",r.mode=n;break t}if(E=0,A=d,0===f){if(E+=p-x,j>x){j-=x;do S[a++]=d[E++];while(--x);E=a-k,A=S}}else if(x>f){if(E+=p+f-x,x-=f,j>x){j-=x;do S[a++]=d[E++];while(--x);if(E=0,j>f){x=f,j-=x;do S[a++]=d[E++];while(--x);E=a-k,A=S}}}else if(E+=f-x,j>x){j-=x;do S[a++]=d[E++];while(--x);E=a-k,A=S}for(;j>2;)S[a++]=A[E++],S[a++]=A[E++],S[a++]=A[E++],j-=3;j&&(S[a++]=A[E++],j>1&&(S[a++]=A[E++]))}else{E=a-k;do S[a++]=S[E++],S[a++]=S[E++],S[a++]=S[E++],j-=3;while(j>2);j&&(S[a++]=S[E++],j>1&&(S[a++]=S[E++]))}break}}break}}while(s>o&&l>a);j=v>>3,o-=j,v-=j<<3,_&=(1<<v)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=l>a?257+(l-a):257-(a-l),r.hold=_,r.bits=v}},{}],10:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=U,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(dt),e.distcode=e.distdyn=new m.Buf32(_t),e.sane=1,e.back=-1,S):C}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):C}function a(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?C:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):C}function c(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=a(t,e),r!==S&&(t.state=null),r):C}function l(t){return c(t,mt)}function u(t){if(gt){var e;for(_=new m.Buf32(512),v=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(w(j,t.lens,0,288,_,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;w(k,t.lens,0,32,v,0,t.work,{bits:5}),gt=!1}t.lencode=_,t.lenbits=9,t.distcode=v,t.distbits=5}function p(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new m.Buf8(o.wsize)),n>=o.wsize?(m.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),m.arraySet(o.window,e,r-n,i,o.wnext),n-=i,n?(m.arraySet(o.window,e,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(t,e){var r,i,o,s,a,c,l,h,f,d,_,v,dt,_t,vt,mt,gt,yt,bt,wt,xt,jt,kt,Et,At=0,Tt=new m.Buf8(4),St=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;r=t.state,r.mode===W&&(r.mode=$),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=r.hold,f=r.bits,d=c,_=l,jt=S;t:for(;;)switch(r.mode){case U:if(0===r.wrap){r.mode=$;break}for(;16>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(2&r.wrap&&35615===h){r.check=0,Tt[0]=255&h,Tt[1]=h>>>8&255,r.check=y(r.check,Tt,2,0),h=0,f=0,r.mode=D;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=pt;break}if((15&h)!==O){t.msg="unknown compression method",r.mode=pt;break}if(h>>>=4,f-=4,xt=(15&h)+8,0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=pt;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&h?Z:W,h=0,f=0;break;case D:for(;16>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(r.flags=h,(255&r.flags)!==O){t.msg="unknown compression method",r.mode=pt;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=pt;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,r.check=y(r.check,Tt,2,0)),h=0,f=0,r.mode=B;case B:for(;32>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.head&&(r.head.time=h),512&r.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,Tt[2]=h>>>16&255,Tt[3]=h>>>24&255,r.check=y(r.check,Tt,4,0)),h=0,f=0,r.mode=z;case z:for(;16>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,r.check=y(r.check,Tt,2,0)),h=0,f=0,r.mode=M;case M:if(1024&r.flags){for(;16>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,r.check=y(r.check,Tt,2,0)),h=0,f=0}else r.head&&(r.head.extra=null);r.mode=N;case N:if(1024&r.flags&&(v=r.length,v>c&&(v=c),v&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),m.arraySet(r.head.extra,i,s,v,xt)),512&r.flags&&(r.check=y(r.check,i,v,s)),c-=v,s+=v,r.length-=v),r.length))break t;r.length=0,r.mode=H;case H:if(2048&r.flags){if(0===c)break t;v=0;do xt=i[s+v++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt));while(xt&&c>v);if(512&r.flags&&(r.check=y(r.check,i,v,s)),c-=v,s+=v,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=V;case V:if(4096&r.flags){if(0===c)break t;v=0;do xt=i[s+v++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt));while(xt&&c>v);if(512&r.flags&&(r.check=y(r.check,i,v,s)),c-=v,s+=v,xt)break t}else r.head&&(r.head.comment=null);r.mode=q;case q:if(512&r.flags){for(;16>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=pt;break}h=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=W;break;case Z:for(;32>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}t.adler=r.check=n(h),h=0,f=0,r.mode=Q;case Q:if(0===r.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,r.hold=h,r.bits=f,R;t.adler=r.check=1,r.mode=W;case W:if(e===A||e===T)break t;case $:if(r.last){h>>>=7&f,f-=7&f,r.mode=ct;break}for(;3>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}switch(r.last=1&h,h>>>=1,f-=1,3&h){case 0:r.mode=J;break;case 1:if(u(r),r.mode=et,e===T){h>>>=2,f-=2;break t}break;case 2:r.mode=X;break;case 3:t.msg="invalid block type",r.mode=pt}h>>>=2,f-=2;break;case J:for(h>>>=7&f,f-=7&f;32>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=pt;break}if(r.length=65535&h,h=0,f=0,r.mode=Y,e===T)break t;case Y:r.mode=G;case G:if(v=r.length){if(v>c&&(v=c),v>l&&(v=l),0===v)break t;m.arraySet(o,i,s,v,a),c-=v,s+=v,l-=v,a+=v,r.length-=v;break}r.mode=W;break;case X:for(;14>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(r.nlen=(31&h)+257,h>>>=5,f-=5,r.ndist=(31&h)+1,h>>>=5,f-=5,r.ncode=(15&h)+4,h>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=pt;break}r.have=0,r.mode=K;case K:for(;r.have<r.ncode;){for(;3>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.lens[St[r.have++]]=7&h,h>>>=3,f-=3}for(;r.have<19;)r.lens[St[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,kt={bits:r.lenbits},jt=w(x,r.lens,0,19,r.lencode,0,r.work,kt),r.lenbits=kt.bits,jt){t.msg="invalid code lengths set",r.mode=pt;break}r.have=0,r.mode=tt;case tt:for(;r.have<r.nlen+r.ndist;){for(;At=r.lencode[h&(1<<r.lenbits)-1],vt=At>>>24,mt=At>>>16&255,gt=65535&At,!(f>=vt);){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(16>gt)h>>>=vt,f-=vt,r.lens[r.have++]=gt;else{if(16===gt){for(Et=vt+2;Et>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(h>>>=vt,f-=vt,0===r.have){t.msg="invalid bit length repeat",r.mode=pt;break}xt=r.lens[r.have-1],v=3+(3&h),h>>>=2,f-=2}else if(17===gt){for(Et=vt+3;Et>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}h>>>=vt,f-=vt,xt=0,v=3+(7&h),h>>>=3,f-=3}else{for(Et=vt+7;Et>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}h>>>=vt,f-=vt,xt=0,v=11+(127&h),h>>>=7,f-=7}if(r.have+v>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=pt;break}for(;v--;)r.lens[r.have++]=xt}}if(r.mode===pt)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=pt;break}if(r.lenbits=9,kt={bits:r.lenbits},jt=w(j,r.lens,0,r.nlen,r.lencode,0,r.work,kt),r.lenbits=kt.bits,jt){t.msg="invalid literal/lengths set",r.mode=pt;break}if(r.distbits=6,r.distcode=r.distdyn,kt={bits:r.distbits},jt=w(k,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,kt),r.distbits=kt.bits,jt){t.msg="invalid distances set",r.mode=pt;break}if(r.mode=et,e===T)break t;case et:r.mode=rt;case rt:if(c>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,r.hold=h,r.bits=f,b(t,_),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=r.hold,f=r.bits,r.mode===W&&(r.back=-1);break}for(r.back=0;At=r.lencode[h&(1<<r.lenbits)-1],vt=At>>>24,mt=At>>>16&255,gt=65535&At,!(f>=vt);){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(mt&&0===(240&mt)){for(yt=vt,bt=mt,wt=gt;At=r.lencode[wt+((h&(1<<yt+bt)-1)>>yt)],vt=At>>>24,mt=At>>>16&255,gt=65535&At,!(f>=yt+vt);){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}h>>>=yt,f-=yt,r.back+=yt}if(h>>>=vt,f-=vt,r.back+=vt,r.length=gt,0===mt){r.mode=at;break}if(32&mt){r.back=-1,r.mode=W;break}if(64&mt){t.msg="invalid literal/length code",r.mode=pt;break}r.extra=15&mt,r.mode=nt;case nt:if(r.extra){for(Et=r.extra;Et>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=it;case it:for(;At=r.distcode[h&(1<<r.distbits)-1],vt=At>>>24,mt=At>>>16&255,gt=65535&At,!(f>=vt);){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(0===(240&mt)){for(yt=vt,bt=mt,wt=gt;At=r.distcode[wt+((h&(1<<yt+bt)-1)>>yt)],vt=At>>>24,mt=At>>>16&255,gt=65535&At,!(f>=yt+vt);){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}h>>>=yt,f-=yt,r.back+=yt}if(h>>>=vt,f-=vt,r.back+=vt,64&mt){t.msg="invalid distance code",r.mode=pt;break}r.offset=gt,r.extra=15&mt,r.mode=ot;case ot:if(r.extra){for(Et=r.extra;Et>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=pt;break}r.mode=st;case st:if(0===l)break t;if(v=_-l,r.offset>v){if(v=r.offset-v,v>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=pt;break}v>r.wnext?(v-=r.wnext,dt=r.wsize-v):dt=r.wnext-v,v>r.length&&(v=r.length),_t=r.window}else _t=o,dt=a-r.offset,v=r.length;v>l&&(v=l),l-=v,r.length-=v;do o[a++]=_t[dt++];while(--v);0===r.length&&(r.mode=rt);break;case at:if(0===l)break t;o[a++]=r.length,l--,r.mode=rt;break;case ct:if(r.wrap){for(;32>f;){if(0===c)break t;c--,h|=i[s++]<<f,f+=8}if(_-=l,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?y(r.check,o,_,a-_):g(r.check,o,_,a-_)),_=l,(r.flags?h:n(h))!==r.check){t.msg="incorrect data check",r.mode=pt;break}h=0,f=0}r.mode=lt;case lt:if(r.wrap&&r.flags){for(;32>f;){if(0===c)break t;c--,h+=i[s++]<<f,f+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=pt;break}h=0,f=0}r.mode=ut;case ut:jt=F;break t;case pt:jt=P;break t;case ht:return L;case ft:default:return C}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,r.hold=h,r.bits=f,(r.wsize||_!==t.avail_out&&r.mode<pt&&(r.mode<ct||e!==E))&&p(t,t.output,t.next_out,_-t.avail_out)?(r.mode=ht,L):(d-=t.avail_in,_-=t.avail_out,t.total_in+=d,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?y(r.check,o,_,t.next_out-_):g(r.check,o,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(r.mode===W?128:0)+(r.mode===et||r.mode===Y?256:0),
(0===d&&0===_||e===E)&&jt===S&&(jt=I),jt)}function f(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,S}function d(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?C:(r.head=e,e.done=!1,S)):C}var _,v,m=t("../utils/common"),g=t("./adler32"),y=t("./crc32"),b=t("./inffast"),w=t("./inftrees"),x=0,j=1,k=2,E=4,A=5,T=6,S=0,F=1,R=2,C=-2,P=-3,L=-4,I=-5,O=8,U=1,D=2,B=3,z=4,M=5,N=6,H=7,V=8,q=9,Z=10,Q=11,W=12,$=13,J=14,Y=15,G=16,X=17,K=18,tt=19,et=20,rt=21,nt=22,it=23,ot=24,st=25,at=26,ct=27,lt=28,ut=29,pt=30,ht=31,ft=32,dt=852,_t=592,vt=15,mt=vt,gt=!0;r.inflateReset=s,r.inflateReset2=a,r.inflateResetKeep=o,r.inflateInit=l,r.inflateInit2=c,r.inflate=h,r.inflateEnd=f,r.inflateGetHeader=d,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,"./adler32":5,"./crc32":7,"./inffast":9,"./inftrees":11}],11:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,o=852,s=592,a=0,c=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,d,_,v,m,g){var y,b,w,x,j,k,E,A,T,S=g.bits,F=0,R=0,C=0,P=0,L=0,I=0,O=0,U=0,D=0,B=0,z=null,M=0,N=new n.Buf16(i+1),H=new n.Buf16(i+1),V=null,q=0;for(F=0;i>=F;F++)N[F]=0;for(R=0;d>R;R++)N[e[r+R]]++;for(L=S,P=i;P>=1&&0===N[P];P--);if(L>P&&(L=P),0===P)return _[v++]=20971520,_[v++]=20971520,g.bits=1,0;for(C=1;P>C&&0===N[C];C++);for(C>L&&(L=C),U=1,F=1;i>=F;F++)if(U<<=1,U-=N[F],0>U)return-1;if(U>0&&(t===a||1!==P))return-1;for(H[1]=0,F=1;i>F;F++)H[F+1]=H[F]+N[F];for(R=0;d>R;R++)0!==e[r+R]&&(m[H[e[r+R]]++]=R);if(t===a?(z=V=m,k=19):t===c?(z=u,M-=257,V=p,q-=257,k=256):(z=h,V=f,k=-1),B=0,R=0,F=C,j=v,I=L,O=0,w=-1,D=1<<L,x=D-1,t===c&&D>o||t===l&&D>s)return 1;for(var Z=0;;){Z++,E=F-O,m[R]<k?(A=0,T=m[R]):m[R]>k?(A=V[q+m[R]],T=z[M+m[R]]):(A=96,T=0),y=1<<F-O,b=1<<I,C=b;do b-=y,_[j+(B>>O)+b]=E<<24|A<<16|T|0;while(0!==b);for(y=1<<F-1;B&y;)y>>=1;if(0!==y?(B&=y-1,B+=y):B=0,R++,0===--N[F]){if(F===P)break;F=e[r+m[R]]}if(F>L&&(B&x)!==w){for(0===O&&(O=L),j+=C,I=F-O,U=1<<I;P>I+O&&(U-=N[I+O],!(0>=U));)I++,U<<=1;if(D+=1<<I,t===c&&D>o||t===l&&D>s)return 1;w=B&x,_[w]=L<<24|I<<16|j-v|0}}return 0!==B&&(_[j+B]=F-O<<24|64<<16|0),g.bits=L,0}},{"../utils/common":4}],12:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],13:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return 256>t?st[t]:st[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,r){t.bi_valid>W-r?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=r-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function a(t,e,r){s(t,r[2*e],r[2*e+1])}function c(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function l(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function u(t,e){var r,n,i,o,s,a,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,p=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,d=e.stat_desc.max_length,_=0;for(o=0;Q>=o;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;Z>r;r++)n=t.heap[r],o=c[2*c[2*n+1]+1]+1,o>d&&(o=d,_++),c[2*n+1]=o,n>l||(t.bl_count[o]++,s=0,n>=f&&(s=h[n-f]),a=c[2*n],t.opt_len+=a*(o+s),p&&(t.static_len+=a*(u[2*n+1]+s)));if(0!==_){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,_-=2}while(_>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)i=t.heap[--r],i>l||(c[2*i+1]!==o&&(t.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),n--)}}function p(t,e,r){var n,i,o=new Array(Q+1),s=0;for(n=1;Q>=n;n++)o[n]=s=s+r[n-1]<<1;for(i=0;e>=i;i++){var a=t[2*i+1];0!==a&&(t[2*i]=c(o[a]++,a))}}function h(){var t,e,r,n,i,o=new Array(Q+1);for(r=0,n=0;M-1>n;n++)for(ct[n]=r,t=0;t<1<<K[n];t++)at[r++]=n;for(at[r-1]=n,i=0,n=0;16>n;n++)for(lt[n]=i,t=0;t<1<<tt[n];t++)st[i++]=n;for(i>>=7;V>n;n++)for(lt[n]=i<<7,t=0;t<1<<tt[n]-7;t++)st[256+i++]=n;for(e=0;Q>=e;e++)o[e]=0;for(t=0;143>=t;)it[2*t+1]=8,t++,o[8]++;for(;255>=t;)it[2*t+1]=9,t++,o[9]++;for(;279>=t;)it[2*t+1]=7,t++,o[7]++;for(;287>=t;)it[2*t+1]=8,t++,o[8]++;for(p(it,H+1,o),t=0;V>t;t++)ot[2*t+1]=5,ot[2*t]=c(t,5);ut=new ft(it,K,N+1,H,Q),pt=new ft(ot,tt,0,V,Q),ht=new ft(new Array(0),et,0,q,$)}function f(t){var e;for(e=0;H>e;e++)t.dyn_ltree[2*e]=0;for(e=0;V>e;e++)t.dyn_dtree[2*e]=0;for(e=0;q>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*J]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function d(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,r,n){d(t),n&&(o(t,r),o(t,~r)),R.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function v(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function m(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&v(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!v(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function g(t,e,r){var n,o,c,l,u=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],o=t.pending_buf[t.l_buf+u],u++,0===n?a(t,o,e):(c=at[o],a(t,c+N+1,e),l=K[c],0!==l&&(o-=ct[c],s(t,o,l)),n--,c=i(n),a(t,c,r),l=tt[c],0!==l&&(n-=lt[c],s(t,n,l)));while(u<t.last_lit);a(t,J,e)}function y(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=Z,r=0;c>r;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>l?++l:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)m(t,o,r);i=c;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,m(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],u(t,e),p(o,l,t.bl_count)}function b(t,e,r){var n,i,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=s,s=e[2*(n+1)+1],++a<c&&i===s||(l>a?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*Y]++):10>=a?t.bl_tree[2*G]++:t.bl_tree[2*X]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))}function w(t,e,r){var n,i,o=-1,c=e[1],l=0,u=7,p=4;for(0===c&&(u=138,p=3),n=0;r>=n;n++)if(i=c,c=e[2*(n+1)+1],!(++l<u&&i===c)){if(p>l){do a(t,i,t.bl_tree);while(0!==--l)}else 0!==i?(i!==o&&(a(t,i,t.bl_tree),l--),a(t,Y,t.bl_tree),s(t,l-3,2)):10>=l?(a(t,G,t.bl_tree),s(t,l-3,3)):(a(t,X,t.bl_tree),s(t,l-11,7));l=0,o=i,0===c?(u=138,p=3):i===c?(u=6,p=3):(u=7,p=4)}}function x(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function j(t,e,r,n){var i;for(s(t,e-257,5),s(t,r-1,5),s(t,n-4,4),i=0;n>i;i++)s(t,t.bl_tree[2*rt[i]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,r-1)}function k(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return L;for(e=32;N>e;e++)if(0!==t.dyn_ltree[2*e])return L;return P}function E(t){_t||(h(),_t=!0),t.l_desc=new dt(t.dyn_ltree,ut),t.d_desc=new dt(t.dyn_dtree,pt),t.bl_desc=new dt(t.bl_tree,ht),t.bi_buf=0,t.bi_valid=0,f(t)}function A(t,e,r,n){s(t,(O<<1)+(n?1:0),3),_(t,e,r,!0)}function T(t){s(t,U<<1,3),a(t,J,it),l(t)}function S(t,e,r,n){var i,o,a=0;t.level>0?(t.strm.data_type===I&&(t.strm.data_type=k(t)),y(t,t.l_desc),y(t,t.d_desc),a=x(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,i>=o&&(i=o)):i=o=r+5,i>=r+4&&-1!==e?A(t,e,r,n):t.strategy===C||o===i?(s(t,(U<<1)+(n?1:0),3),g(t,it,ot)):(s(t,(D<<1)+(n?1:0),3),j(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),g(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&d(t)}function F(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(at[r]+N+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var R=t("../utils/common"),C=4,P=0,L=1,I=2,O=0,U=1,D=2,B=3,z=258,M=29,N=256,H=N+1+M,V=30,q=19,Z=2*H+1,Q=15,W=16,$=7,J=256,Y=16,G=17,X=18,K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,it=new Array(2*(H+2));n(it);var ot=new Array(2*V);n(ot);var st=new Array(nt);n(st);var at=new Array(z-B+1);n(at);var ct=new Array(M);n(ct);var lt=new Array(V);n(lt);var ut,pt,ht,ft=function(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length},dt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},_t=!1;r._tr_init=E,r._tr_stored_block=A,r._tr_flush_block=S,r._tr_tally=F,r._tr_align=T},{"../utils/common":4}],14:[function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],15:[function(t,e,r){(function(e,n){function i(t){if(t<r.DEFLATE||t>r.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(t,e){for(var r=0;r<t.length;r++)this[e+r]=t[r]}var s=t("pako/lib/zlib/messages"),a=t("pako/lib/zlib/zstream"),c=t("pako/lib/zlib/deflate.js"),l=t("pako/lib/zlib/inflate.js"),u=t("pako/lib/zlib/constants");for(var p in u)r[p]=u[p];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7,i.prototype.init=function(t,e,n,i,o){switch(this.windowBits=t,this.level=e,this.memLevel=n,this.strategy=i,(this.mode===r.GZIP||this.mode===r.GUNZIP)&&(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),(this.mode===r.DEFLATERAW||this.mode===r.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new a,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var s=c.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:var s=l.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return s!==r.Z_OK?void this._error(s):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===r.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,r,n,i,o,s,a){this._writeCheck(),this.write_in_progress=!0;var c=this;return e.nextTick(function(){c.write_in_progress=!1;var e=c._write(t,r,n,i,o,s,a);c.callback(e[0],e[1]),c.pending_close&&c.close()}),this},i.prototype.writeSync=function(t,e,r,n,i,o,s){return this._writeCheck(),this._write(t,e,r,n,i,o,s)},i.prototype._write=function(t,e,i,s,a,u,p){if(this.write_in_progress=!0,t!==r.Z_NO_FLUSH&&t!==r.Z_PARTIAL_FLUSH&&t!==r.Z_SYNC_FLUSH&&t!==r.Z_FULL_FLUSH&&t!==r.Z_FINISH&&t!==r.Z_BLOCK)throw new Error("Invalid flush value");null==e&&(e=new n(0),s=0,i=0),a._set?a.set=a._set:a.set=o;var h=this.strm;switch(h.avail_in=s,h.input=e,h.next_in=i,h.avail_out=p,h.output=a,h.next_out=u,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var f=c.deflate(h,t);break;case r.UNZIP:case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:var f=l.inflate(h,t);break;default:throw new Error("Unknown mode "+this.mode)}return f!==r.Z_STREAM_END&&f!==r.Z_OK&&this._error(f),this.write_in_progress=!1,[h.avail_in,h.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?c.deflateEnd(this.strm):l.inflateEnd(this.strm),void(this.mode=r.NONE))},i.prototype.reset=function(){switch(this.mode){case r.DEFLATE:case r.DEFLATERAW:var t=c.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:var t=l.inflateReset(this.strm)}t!==r.Z_OK&&this._error(t)},i.prototype._error=function(t){this.onerror(s[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},r.Zlib=i}).call(this,t("_process"),t("buffer").Buffer)},{_process:25,buffer:17,"pako/lib/zlib/constants":6,"pako/lib/zlib/deflate.js":8,"pako/lib/zlib/inflate.js":10,"pako/lib/zlib/messages":12,"pako/lib/zlib/zstream":14}],16:[function(t,e,r){(function(e,n){function i(t,e,r){function i(){for(var e;null!==(e=t.read());)a.push(e),c+=e.length;t.once("readable",i)}function o(e){t.removeListener("end",s),t.removeListener("readable",i),r(e)}function s(){var e=n.concat(a,c);a=[],r(null,e),t.close()}var a=[],c=0;t.on("error",o),t.on("end",s),t.end(e),i()}function o(t,e){if("string"==typeof e&&(e=new n(e)),!n.isBuffer(e))throw new TypeError("Not a string or buffer");var r=_.Z_FINISH;return t._processChunk(e,r)}function s(t){return this instanceof s?void f.call(this,t,_.DEFLATE):new s(t)}function a(t){return this instanceof a?void f.call(this,t,_.INFLATE):new a(t)}function c(t){return this instanceof c?void f.call(this,t,_.GZIP):new c(t)}function l(t){return this instanceof l?void f.call(this,t,_.GUNZIP):new l(t)}function u(t){return this instanceof u?void f.call(this,t,_.DEFLATERAW):new u(t)}function p(t){return this instanceof p?void f.call(this,t,_.INFLATERAW):new p(t)}function h(t){return this instanceof h?void f.call(this,t,_.UNZIP):new h(t)}function f(t,e){if(this._opts=t=t||{},this._chunkSize=t.chunkSize||r.Z_DEFAULT_CHUNK,d.call(this,t),t.flush&&t.flush!==_.Z_NO_FLUSH&&t.flush!==_.Z_PARTIAL_FLUSH&&t.flush!==_.Z_SYNC_FLUSH&&t.flush!==_.Z_FULL_FLUSH&&t.flush!==_.Z_FINISH&&t.flush!==_.Z_BLOCK)throw new Error("Invalid flush flag: "+t.flush);if(this._flushFlag=t.flush||_.Z_NO_FLUSH,t.chunkSize&&(t.chunkSize<r.Z_MIN_CHUNK||t.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<r.Z_MIN_WINDOWBITS||t.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<r.Z_MIN_LEVEL||t.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<r.Z_MIN_MEMLEVEL||t.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=r.Z_FILTERED&&t.strategy!=r.Z_HUFFMAN_ONLY&&t.strategy!=r.Z_RLE&&t.strategy!=r.Z_FIXED&&t.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!n.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new _.Zlib(e);var i=this;this._hadError=!1,this._binding.onerror=function(t,e){i._binding=null,i._hadError=!0;var n=new Error(t);n.errno=e,n.code=r.codes[e],i.emit("error",n)};var o=r.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(o=t.level);var s=r.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(s=t.strategy),this._binding.init(t.windowBits||r.Z_DEFAULT_WINDOWBITS,o,t.memLevel||r.Z_DEFAULT_MEMLEVEL,s,t.dictionary),this._buffer=new n(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=s,this.once("end",this.close)}var d=t("_stream_transform"),_=t("./binding"),v=t("util"),m=t("assert").ok;_.Z_MIN_WINDOWBITS=8,_.Z_MAX_WINDOWBITS=15,_.Z_DEFAULT_WINDOWBITS=15,_.Z_MIN_CHUNK=64,_.Z_MAX_CHUNK=1/0,_.Z_DEFAULT_CHUNK=16384,_.Z_MIN_MEMLEVEL=1,_.Z_MAX_MEMLEVEL=9,_.Z_DEFAULT_MEMLEVEL=8,_.Z_MIN_LEVEL=-1,_.Z_MAX_LEVEL=9,_.Z_DEFAULT_LEVEL=_.Z_DEFAULT_COMPRESSION,Object.keys(_).forEach(function(t){t.match(/^Z/)&&(r[t]=_[t])}),r.codes={Z_OK:_.Z_OK,Z_STREAM_END:_.Z_STREAM_END,Z_NEED_DICT:_.Z_NEED_DICT,Z_ERRNO:_.Z_ERRNO,Z_STREAM_ERROR:_.Z_STREAM_ERROR,Z_DATA_ERROR:_.Z_DATA_ERROR,Z_MEM_ERROR:_.Z_MEM_ERROR,Z_BUF_ERROR:_.Z_BUF_ERROR,Z_VERSION_ERROR:_.Z_VERSION_ERROR},Object.keys(r.codes).forEach(function(t){r.codes[r.codes[t]]=t}),r.Deflate=s,r.Inflate=a,r.Gzip=c,r.Gunzip=l,r.DeflateRaw=u,r.InflateRaw=p,r.Unzip=h,r.createDeflate=function(t){return new s(t)},r.createInflate=function(t){return new a(t)},r.createDeflateRaw=function(t){return new u(t)},r.createInflateRaw=function(t){return new p(t)},r.createGzip=function(t){return new c(t)},r.createGunzip=function(t){return new l(t)},r.createUnzip=function(t){return new h(t)},r.deflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new s(e),t,r)},r.deflateSync=function(t,e){return o(new s(e),t)},r.gzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new c(e),t,r)},r.gzipSync=function(t,e){return o(new c(e),t)},r.deflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new u(e),t,r)},r.deflateRawSync=function(t,e){return o(new u(e),t)},r.unzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new h(e),t,r)},r.unzipSync=function(t,e){return o(new h(e),t)},r.inflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new a(e),t,r)},r.inflateSync=function(t,e){return o(new a(e),t)},r.gunzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new l(e),t,r)},r.gunzipSync=function(t,e){return o(new l(e),t)},r.inflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new p(e),t,r)},r.inflateRawSync=function(t,e){return o(new p(e),t)},v.inherits(f,d),f.prototype.params=function(t,n,i){if(t<r.Z_MIN_LEVEL||t>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==t||this._strategy!==n){var o=this;this.flush(_.Z_SYNC_FLUSH,function(){o._binding.params(t,n),o._hadError||(o._level=t,o._strategy=n,i&&i())})}else e.nextTick(i)},f.prototype.reset=function(){return this._binding.reset()},f.prototype._flush=function(t){this._transform(new n(0),"",t)},f.prototype.flush=function(t,r){var i=this._writableState;if(("function"==typeof t||void 0===t&&!r)&&(r=t,t=_.Z_FULL_FLUSH),i.ended)r&&e.nextTick(r);else if(i.ending)r&&this.once("end",r);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(r)})}else this._flushFlag=t,this.write(new n(0),"",r)},f.prototype.close=function(t){if(t&&e.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var r=this;e.nextTick(function(){r.emit("close")})}},f.prototype._transform=function(t,e,r){var i,o=this._writableState,s=o.ending||o.ended,a=s&&(!t||o.length===t.length);if(null===!t&&!n.isBuffer(t))return r(new Error("invalid input"));a?i=_.Z_FINISH:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||_.Z_NO_FLUSH));this._processChunk(t,i,r)},f.prototype._processChunk=function(t,e,r){function i(u,f){if(!c._hadError){var d=s-f;if(m(d>=0,"have should not go down"),d>0){var _=c._buffer.slice(c._offset,c._offset+d);c._offset+=d,l?c.push(_):(p.push(_),h+=_.length)}if((0===f||c._offset>=c._chunkSize)&&(s=c._chunkSize,c._offset=0,c._buffer=new n(c._chunkSize)),0===f){if(a+=o-u,o=u,!l)return!0;var v=c._binding.write(e,t,a,o,c._buffer,c._offset,c._chunkSize);return v.callback=i,void(v.buffer=t)}return l?void r():!1}}var o=t&&t.length,s=this._chunkSize-this._offset,a=0,c=this,l="function"==typeof r;if(!l){var u,p=[],h=0;this.on("error",function(t){u=t});do var f=this._binding.writeSync(e,t,a,o,this._buffer,this._offset,s);while(!this._hadError&&i(f[0],f[1]));if(this._hadError)throw u;var d=n.concat(p,h);return this.close(),d}var _=this._binding.write(e,t,a,o,this._buffer,this._offset,s);_.buffer=t,_.callback=i},v.inherits(s,f),v.inherits(a,f),v.inherits(c,f),v.inherits(l,f),v.inherits(u,f),v.inherits(p,f),v.inherits(h,f)}).call(this,t("_process"),t("buffer").Buffer)},{"./binding":15,_process:25,_stream_transform:35,assert:2,buffer:17,util:40}],17:[function(t,e,r){function n(t){return this instanceof n?(this.length=0,this.parent=void 0,"number"==typeof t?i(this,t):"string"==typeof t?o(this,t,arguments.length>1?arguments[1]:"utf8"):s(this,t)):arguments.length>1?new n(t,arguments[1]):new n(t)}function i(t,e){if(t=h(t,0>e?0:0|f(e)),!n.TYPED_ARRAY_SUPPORT)for(var r=0;e>r;r++)t[r]=0;return t}function o(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|_(e,r);return t=h(t,n),t.write(e,r),t}function s(t,e){if(n.isBuffer(e))return a(t,e);if(Q(e))return c(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer?l(t,e):e.length?u(t,e):p(t,e)}function a(t,e){var r=0|f(e.length);return t=h(t,r),e.copy(t,0,0,r),t}function c(t,e){var r=0|f(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function l(t,e){var r=0|f(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function u(t,e){var r=0|f(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function p(t,e){var r,n=0;"Buffer"===e.type&&Q(e.data)&&(r=e.data,n=0|f(r.length)),t=h(t,n);for(var i=0;n>i;i+=1)t[i]=255&r[i];return t}function h(t,e){n.TYPED_ARRAY_SUPPORT?t=n._augment(new Uint8Array(e)):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=n.poolSize>>>1;return r&&(t.parent=$),t}function f(t){if(t>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return 0|t}function d(t,e){if(!(this instanceof d))return new d(t,e);var r=new n(t,e);return delete r.parent,r}function _(t,e){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(e||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return B(t).length;case"base64":return N(t).length;default:return t.length}}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function m(t,e,r,n){return H(B(e,t.length-r),t,r,n)}function g(t,e,r,n){return H(z(e),t,r,n)}function y(t,e,r,n){return g(t,e,r,n)}function b(t,e,r,n){return H(N(e),t,r,n)}function w(t,e,r,n){return H(M(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,r))}function j(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=V(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+V(i)}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=D(t[o]);return i}function T(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function S(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,i,o,s){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||s>e)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function R(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function P(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function L(t,e,r,n,i){return i||P(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,r,n,23,4),r+4}function I(t,e,r,n,i){return i||P(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,r,n,52,8),r+8}function O(t){if(t=U(t).replace(Y,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function D(t){return 16>t?"0"+t.toString(16):t.toString(16)}function B(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;n>s;s++){if(r=t.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function M(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function N(t){return q.toByteArray(O(t))}function H(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function V(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var q=t("base64-js"),Z=t("ieee754"),Q=t("is-array");r.Buffer=n,r.SlowBuffer=d,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var W=1073741823,$={};n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,o=0,s=Math.min(r,i);s>o&&t[o]===e[o];)++o;return o!==s&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},n.byteLength=_,n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return j(this,e,r);case"ascii":return k(this,e,r);case"binary":return E(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:n.compare(this,t)},n.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(n.isBuffer(t))return r(this,t,e);if("number"==typeof t)return n.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":return g(this,t,e,r);case"binary":return y(this,t,e,r);case"base64":return b(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(t,e));else{var o=e-t;i=new n(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||S(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||S(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},n.prototype.readUInt8=function(t,e){return e||S(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||S(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||S(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||S(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},n.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||S(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||S(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||S(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){
return e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||S(t,4,this.length),Z.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||S(t,4,this.length),Z.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||S(t,8,this.length),Z.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||S(t,8,this.length),Z.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||F(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},n.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||F(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},n.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):R(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):C(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):C(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<r&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},n.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},n.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):R(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||F(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):C(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return I(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return I(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var o=i-r;if(1e3>o||!n.TYPED_ARRAY_SUPPORT)for(var s=0;o>s;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+o),e);return o},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=B(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._set=t.set,t.get=J.get,t.set=J.set,t.write=J.write,t.toString=J.toString,t.toLocaleString=J.toString,t.toJSON=J.toJSON,t.equals=J.equals,t.compare=J.compare,t.indexOf=J.indexOf,t.copy=J.copy,t.slice=J.slice,t.readUIntLE=J.readUIntLE,t.readUIntBE=J.readUIntBE,t.readUInt8=J.readUInt8,t.readUInt16LE=J.readUInt16LE,t.readUInt16BE=J.readUInt16BE,t.readUInt32LE=J.readUInt32LE,t.readUInt32BE=J.readUInt32BE,t.readIntLE=J.readIntLE,t.readIntBE=J.readIntBE,t.readInt8=J.readInt8,t.readInt16LE=J.readInt16LE,t.readInt16BE=J.readInt16BE,t.readInt32LE=J.readInt32LE,t.readInt32BE=J.readInt32BE,t.readFloatLE=J.readFloatLE,t.readFloatBE=J.readFloatBE,t.readDoubleLE=J.readDoubleLE,t.readDoubleBE=J.readDoubleBE,t.writeUInt8=J.writeUInt8,t.writeUIntLE=J.writeUIntLE,t.writeUIntBE=J.writeUIntBE,t.writeUInt16LE=J.writeUInt16LE,t.writeUInt16BE=J.writeUInt16BE,t.writeUInt32LE=J.writeUInt32LE,t.writeUInt32BE=J.writeUInt32BE,t.writeIntLE=J.writeIntLE,t.writeIntBE=J.writeIntBE,t.writeInt8=J.writeInt8,t.writeInt16LE=J.writeInt16LE,t.writeInt16BE=J.writeInt16BE,t.writeInt32LE=J.writeInt32LE,t.writeInt32BE=J.writeInt32BE,t.writeFloatLE=J.writeFloatLE,t.writeFloatBE=J.writeFloatBE,t.writeDoubleLE=J.writeDoubleLE,t.writeDoubleBE=J.writeDoubleBE,t.fill=J.fill,t.inspect=J.inspect,t.toArrayBuffer=J.toArrayBuffer,t};var Y=/[^+\/0-9A-z\-]/g},{"base64-js":18,ieee754:19,"is-array":20}],18:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===p?62:e===a||e===h?63:c>e?-1:c+10>e?e-c+26+26:u+26>e?e-u:l+26>e?e-l+26:void 0}function r(t){function r(t){l[p++]=t}var n,i,s,a,c,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;c="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,l=new o(3*t.length/4-c),s=c>0?t.length-4:t.length;var p=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===c?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===c&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),l}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,c="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],c+=r(o);switch(a){case 1:o=t[t.length-1],c+=e(o>>2),c+=e(o<<4&63),c+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],c+=e(o>>10),c+=e(o>>4&63),c+=e(o<<2&63),c+="="}return c}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),l="a".charCodeAt(0),u="A".charCodeAt(0),p="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],19:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+p],p+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+p],p+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:(f?-1:1)*(1/0);s+=Math.pow(2,n),o-=l}return(f?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,p=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,_=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+p>=1?h/c:h*Math.pow(2,1-p),e*c>=2&&(s++,c/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(e*c-1)*Math.pow(2,i),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+f]=255&s,f+=d,s/=256,l-=8);t[r+f-d]|=128*_}},{}],20:[function(t,e,r){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],21:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];for(l=r.slice(),n=l.length,c=0;n>c;c++)l[c].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],22:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],23:[function(t,e,r){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],24:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===s(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),s=Math.min(i.length,o.length),a=s,c=0;s>c;c++)if(i[c]!==o[c]){a=c;break}for(var l=[],c=a;c<i.length;c++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:25}],25:[function(t,e,r){function n(){u=!1,a.length?l=a.concat(l):p=-1,l.length&&i()}function i(){if(!u){var t=setTimeout(n);u=!0;for(var e=l.length;e;){for(a=l,l=[];++p<e;)a[p].run();p=-1,e=l.length}a=null,u=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,c=e.exports={},l=[],u=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new o(t,e)),1!==l.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],26:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":27}],27:[function(t,e,r){(function(r){function n(t){return this instanceof n?(c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}e.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=t("core-util-is");a.inherits=t("inherits");var c=t("./_stream_readable"),l=t("./_stream_writable");a.inherits(n,c),o(s(l.prototype),function(t){n.prototype[t]||(n.prototype[t]=l.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":29,"./_stream_writable":31,_process:25,"core-util-is":32,inherits:22}],28:[function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}e.exports=n;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":30,"core-util-is":32,inherits:22}],29:[function(t,e,r){(function(r){function n(e,r){var n=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(S||(S=t("string_decoder/").StringDecoder),this.decoder=new S(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void A.call(this)):new i(e)}function o(t,e,r,n,i){var o=l(e,r);if(o)t.emit("error",o);else if(T.isNullOrUndefined(r))e.reading=!1,e.ended||u(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&p(t)),f(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||T.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var r=null;return T.isBuffer(e)||T.isString(e)||T.isNullOrUndefined(e)||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function u(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,p(t)}function p(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(function(){h(t)}):h(t))}function h(t){F("emit readable"),t.emit("readable"),g(t)}function f(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(function(){d(t,e)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&E.listenerCount(t,"data")&&(e.flowing=!0,g(t))}}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(function(){m(t,e)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),g(t),e.flowing&&!e.reading&&t.read(0)}function g(t){var e=t._readableState;if(F("flow",e.flowing),e.flowing)do var r=t.read();while(null!==r&&e.flowing)}function y(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):k.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new k(t);for(var c=0,l=0,u=n.length;u>l&&t>c;l++){var a=n[0],p=Math.min(t-c,a.length);o?r+=a.slice(0,p):a.copy(r,c,0,p),p<a.length?n[0]=a.slice(p):n.shift(),c+=p}}return r}function b(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,r.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function x(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}e.exports=i;var j=t("isarray"),k=t("buffer").Buffer;i.ReadableState=n;var E=t("events").EventEmitter;E.listenerCount||(E.listenerCount=function(t,e){return t.listeners(e).length});var A=t("stream"),T=t("core-util-is");T.inherits=t("inherits");var S,F=t("util");F=F&&F.debuglog?F.debuglog("stream"):function(){},T.inherits(i,A),i.prototype.push=function(t,e){var r=this._readableState;return T.isString(t)&&!r.objectMode&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=new k(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return S||(S=t("string_decoder/").StringDecoder),this._readableState.decoder=new S(e),this._readableState.encoding=e,this};var R=8388608;i.prototype.read=function(t){F("read",t);var e=this._readableState,r=t;if((!T.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):p(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var n=e.needReadable;F("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,F("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,F("reading or ended",n)),n&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=c(r,e));var i;return i=t>0?y(t,e):null,T.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),r!==t&&e.ended&&0===e.length&&b(this),T.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function n(t){F("onunpipe"),t===p&&o()}function i(){F("onend"),t.end()}function o(){F("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",n),p.removeListener("end",i),p.removeListener("end",o),p.removeListener("data",s),!h.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){F("ondata");var r=t.write(e);!1===r&&(F("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,p.pause())}function a(e){F("onerror",e),u(),t.removeListener("error",a),0===E.listenerCount(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),u()}function l(){F("onfinish"),t.removeListener("close",c),u()}function u(){F("unpipe"),p.unpipe(t)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,F("pipe count=%d opts=%j",h.pipesCount,e);var f=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,d=f?i:o;h.endEmitted?r.nextTick(d):p.once("end",d),t.on("unpipe",n);var v=_(p);return t.on("drain",v),p.on("data",s),t._events&&t._events.error?j(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",l),t.emit("pipe",p),h.flowing||(F("pipe resume"),p.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=x(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var n=A.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&p(this,i);else{var o=this;r.nextTick(function(){F("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,t.reading||(F("resume read 0"),this.read(0)),v(this,t)),this},i.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(F("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(F("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)T.isFunction(t[i])&&T.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){F("wrapped _read",e),r&&(r=!1,t.resume())},n},i._fromList=y}).call(this,t("_process"))},{"./_stream_duplex":27,_process:25,buffer:17,"core-util-is":32,events:21,inherits:22,isarray:23,stream:37,"string_decoder/":38,util:3}],30:[function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,c.isNullOrUndefined(r)||t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),c=t("core-util-is");c.inherits=t("inherits"),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;c.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":27,"core-util-is":32,inherits:22}],31:[function(t,e,r){(function(r){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(e,r){var n=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){f(r,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var r=t("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(e,this),this.writable=!0,void j.call(this)):new o(e)}function s(t,e,n){var i=new Error("write after end");t.emit("error",i),r.nextTick(function(){n(i)})}function a(t,e,n,i){var o=!0;if(!(x.isBuffer(n)||x.isString(n)||x.isNullOrUndefined(n)||e.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function c(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&x.isString(e)&&(e=new w(e,r)),e}function l(t,e,r,i,o){r=c(e,r,i),x.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new n(r,i,o)):u(t,e,!1,s,r,i,o),a}function u(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function p(t,e,n,i,o){n?r.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function f(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(h(n),e)p(t,n,i,e,o);else{var s=m(t,n);s||n.corked||n.bufferProcessing||!n.buffer.length||v(t,n),i?r.nextTick(function(){d(t,n,s,o)}):d(t,n,s,o)}}function d(t,e,r,n){r||_(t,e),e.pendingcb--,n(),y(t,e)}function _(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var r=[],n=0;n<e.buffer.length;n++)r.push(e.buffer[n].callback);e.pendingcb++,u(t,e,!0,e.length,e.buffer,"",function(t){for(var n=0;n<r.length;n++)e.pendingcb--,r[n](t)}),e.buffer=[]}else{for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,c=e.objectMode?1:o.length;if(u(t,e,!1,c,o,s,a),e.writing){n++;break}}n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function g(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function y(t,e){var r=m(t,e);return r&&(0===e.pendingcb?(g(t,e),e.finished=!0,t.emit("finish")):g(t,e)),r}function b(t,e,n){e.ending=!0,y(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var x=t("core-util-is");x.inherits=t("inherits");var j=t("stream");x.inherits(o,j),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return x.isFunction(e)&&(r=e,e=null),x.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),x.isFunction(r)||(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(n.pendingcb++,i=l(this,n,t,e,r)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,r){var n=this._writableState;x.isFunction(t)?(r=t,t=null,e=null):x.isFunction(e)&&(r=e,e=null),x.isNullOrUndefined(t)||this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}}).call(this,t("_process"))},{"./_stream_duplex":27,_process:25,buffer:17,"core-util-is":32,inherits:22,stream:37}],32:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){
return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function u(t){return p(t)&&"[object RegExp]"===m(t)}function p(t){return"object"==typeof t&&null!==t}function h(t){return p(t)&&"[object Date]"===m(t)}function f(t){return p(t)&&("[object Error]"===m(t)||t instanceof Error)}function d(t){return"function"==typeof t}function _(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(e){return t.isBuffer(e)}function m(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=c,r.isUndefined=l,r.isRegExp=u,r.isObject=p,r.isDate=h,r.isError=f,r.isFunction=d,r.isPrimitive=_,r.isBuffer=v}).call(this,t("buffer").Buffer)},{buffer:17}],33:[function(t,e,r){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":28}],34:[function(t,e,r){r=e.exports=t("./lib/_stream_readable.js"),r.Stream=t("stream"),r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":27,"./lib/_stream_passthrough.js":28,"./lib/_stream_readable.js":29,"./lib/_stream_transform.js":30,"./lib/_stream_writable.js":31,stream:37}],35:[function(t,e,r){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":30}],36:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":31}],37:[function(t,e,r){function n(){i.call(this)}e.exports=n;var i=t("events").EventEmitter,o=t("inherits");o(n,i),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){u||(u=!0,t.end())}function s(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(c(),0===i.listenerCount(this,"error"))throw t}function c(){l.removeListener("data",r),t.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",s),l.removeListener("error",a),t.removeListener("error",a),l.removeListener("end",c),l.removeListener("close",c),t.removeListener("close",c)}var l=this;l.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",s));var u=!1;return l.on("error",a),t.on("error",a),l.on("end",c),l.on("close",c),t.on("close",c),t.emit("pipe",l),t}},{events:21,inherits:22,"readable-stream/duplex.js":26,"readable-stream/passthrough.js":33,"readable-stream/readable.js":34,"readable-stream/transform.js":35,"readable-stream/writable.js":36}],38:[function(t,e,r){function n(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:17}],39:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],40:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(e)?n.showHidden=e:e&&r._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function c(t,e,n){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return y(i)||(i=c(t,i,n)),i}var o=l(t,e);if(o)return o;var s=Object.keys(e),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),E(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(e);if(0===s.length){if(A(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(E(e))return u(e)}var m="",g=!1,b=["{","}"];if(d(e)&&(g=!0,b=["[","]"]),A(e)){var w=e.name?": "+e.name:"";m=" [Function"+w+"]"}if(x(e)&&(m=" "+RegExp.prototype.toString.call(e)),k(e)&&(m=" "+Date.prototype.toUTCString.call(e)),E(e)&&(m=" "+u(e)),0===s.length&&(!g||0==e.length))return b[0]+m+b[1];if(0>n)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var j;return j=g?p(t,e,n,_,s):s.map(function(r){return h(t,e,n,_,r,g)}),t.seen.pop(),f(j,m,b)}function l(t,e){if(w(e))return t.stylize("undefined","undefined");if(y(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return g(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)C(e,String(s))?o.push(h(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}function h(t,e,r,n,i,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=v(r)?c(t,l.value,null):c(t,l.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return j(t)&&"[object RegExp]"===S(t)}function j(t){return"object"==typeof t&&null!==t}function k(t){return j(t)&&"[object Date]"===S(t)}function E(t){return j(t)&&("[object Error]"===S(t)||t instanceof Error)}function A(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function F(t){return 10>t?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[F(t.getHours()),F(t.getMinutes()),F(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;r.format=function(t){if(!y(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(P,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=v(a)||!j(a)?" "+a:" "+i(a);return s},r.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var L,I={};r.debuglog=function(t){if(w(L)&&(L=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(L)){var n=e.pid;I[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else I[t]=function(){};return I[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=_,r.isNull=v,r.isNullOrUndefined=m,r.isNumber=g,r.isString=y,r.isSymbol=b,r.isUndefined=w,r.isRegExp=x,r.isObject=j,r.isDate=k,r.isError=E,r.isFunction=A,r.isPrimitive=T,r.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!j(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":39,_process:25,inherits:22}],41:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-bmp/index.js")},{"./lib":42,"./src":3}],42:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t("pixel-util").PixelUtil,o=t("bmp-js"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.parse=function(t){return this.createBuffer(t).then(function(t){return function(e){var r,n;return r=o.decode(e),n=t.createImageData(r.width,r.height),t.set(n,r),[n]}}(this))},e}(i),e.exports=new n,e.exports.PixelBitmap=n},{"bmp-js":43,"pixel-util":70}],43:[function(t,e,r){var n=t("./lib/encoder"),i=t("./lib/decoder");e.exports={encode:n,decode:i}},{"./lib/decoder":44,"./lib/encoder":45}],44:[function(t,e,r){(function(t){function r(t){if(this.pos=0,this.buffer=t,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),"BM"!=this.flag)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}r.prototype.parseHeader=function(){if(this.fileSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.reserved=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.offset=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.headerSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.width=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.height=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compress=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.rawSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.hr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.vr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.colors=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.importantColors=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.bitPP<24){var t=1<<this.bitPP;this.palette=new Array(t);for(var e=0;t>e;e++){var r=this.buffer.readUInt8(this.pos++),n=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++);this.palette[e]={red:i,green:n,blue:r,quad:o}}}},r.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,r=this.width*this.height*4;this.data=new t(r),this[e]()}catch(n){console.log("bit decode error:"+n)}},r.prototype.bit1=function(){for(var t=Math.ceil(this.width/8),e=t%4,r=this.height-1;r>=0;r--){for(var n=0;t>n;n++)for(var i=this.buffer.readUInt8(this.pos++),o=r*this.width*4+8*n*4,s=0;8>s&&8*n+s<this.width;s++){var a=this.palette[i>>7-s&1];this.data[o+4*s]=a.blue,this.data[o+4*s+1]=a.green,this.data[o+4*s+2]=a.red,this.data[o+4*s+3]=255}0!=e&&(this.pos+=4-e)}},r.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=0;t>n;n++){var i=this.buffer.readUInt8(this.pos++),o=r*this.width*4+2*n*4,s=i>>4,a=15&i,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*n+1>=this.width)break;c=this.palette[a],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!=e&&(this.pos+=4-e)}},r.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=0;r<this.width;r++){var n=this.buffer.readUInt8(this.pos++),i=e*this.width*4+4*r,o=this.palette[n];this.data[i]=o.blue,this.data[i+1]=o.green,this.data[i+2]=o.red,this.data[i+3]=255}0!=t&&(this.pos+=4-t)}},r.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=0;e<this.width;e++){var r=this.buffer.readUInt8(this.pos++),n=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++),o=t*this.width*4+4*e;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},r.prototype.getData=function(){return this.data},e.exports=decode=function(t){var e=new r(t);return{data:e.getData(),width:e.width,height:e.height}}}).call(this,t("buffer").Buffer)},{buffer:17}],45:[function(t,e,r){(function(t){function r(t){this.buffer=t.data,this.width=t.width,this.height=t.height,this.extraBytes=this.width%4,this.rgbSize=this.height*(3*this.width+this.extraBytes),this.headerInfoSize=40,this.data=[],this.flag="BM",this.reserved=0,this.offset=54,this.fileSize=this.rgbSize+this.offset,this.planes=1,this.bitPP=24,this.compress=0,this.hr=0,this.vr=0,this.colors=0,this.importantColors=0}r.prototype.encode=function(){var e=new t(this.offset+this.rgbSize);this.pos=0,e.write(this.flag,this.pos,2),this.pos+=2,e.writeUInt32LE(this.fileSize,this.pos),this.pos+=4,e.writeUInt32LE(this.reserved,this.pos),this.pos+=4,e.writeUInt32LE(this.offset,this.pos),this.pos+=4,e.writeUInt32LE(this.headerInfoSize,this.pos),this.pos+=4,e.writeUInt32LE(this.width,this.pos),this.pos+=4,e.writeUInt32LE(this.height,this.pos),this.pos+=4,e.writeUInt16LE(this.planes,this.pos),this.pos+=2,e.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,e.writeUInt32LE(this.compress,this.pos),this.pos+=4,e.writeUInt32LE(this.rgbSize,this.pos),this.pos+=4,e.writeUInt32LE(this.hr,this.pos),this.pos+=4,e.writeUInt32LE(this.vr,this.pos),this.pos+=4,e.writeUInt32LE(this.colors,this.pos),this.pos+=4,e.writeUInt32LE(this.importantColors,this.pos),this.pos+=4;for(var r=0,n=3*this.width+this.extraBytes,i=this.height-1;i>=0;i--){for(var o=0;o<this.width;o++){var s=this.pos+i*n+3*o;e[s+2]=this.buffer[r++],e[s+1]=this.buffer[r++],e[s]=this.buffer[r++],r++}if(this.extraBytes>0){var a=this.pos+i*n+3*this.width;e.fill(0,a,a+this.extraBytes)}}return e},e.exports=encode=function(t,e){"undefined"==typeof e&&(e=100);var n=new r(t),i=n.encode();return{data:i,width:t.width,height:t.height}}}).call(this,t("buffer").Buffer)},{buffer:17}],46:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-gif/index.js")},{"./lib":47,"./src":3}],47:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("pixel-util").PixelUtil,n=t("omggif").GifReader,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.parse=function(t){return this.createBuffer(t).then(function(t){return function(e){var r,i,o,s,a,c;return a=new n(new Uint8Array(e)),o=function(){var t,e,n,o;for(o=[],r=t=0,e=a.numFrames();e>=0?e>t:t>e;r=e>=0?++t:--t){i=this.createImageData(a.width,a.height),n=a.frameInfo(r);for(s in n)c=n[s],i[s]=c;i.delay&&(i.delay=10*i.delay),a.decodeAndBlitFrameRGBA(r,i.data),o.push(i)}return o}.call(t),o.loopCount=a.loopCount(),null==o.loopCount&&(o.loopCount=-1),o}}(this))},e}(o),e.exports=new i,e.exports.PixelGif=i},{omggif:48,"pixel-util":49}],48:[function(t,e,r){function n(t,e,r,n){function o(t){var e=t.length;if(2>e||e>256||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}var s=0,n=void 0===n?{}:n,a=void 0===n.loop?null:n.loop,c=void 0===n.palette?null:n.palette;if(0>=e||0>=r||e>65535||r>65535)throw"Width/Height invalid.";t[s++]=71,t[s++]=73,t[s++]=70,t[s++]=56,t[s++]=57,t[s++]=97;var l=0,u=0;if(null!==c){for(var p=o(c);p>>=1;)++l;if(p=1<<l,--l,void 0!==n.background){if(u=n.background,u>=p)throw"Background index out of range.";if(0===u)throw"Background index explicitly passed as 0."}}if(t[s++]=255&e,t[s++]=e>>8&255,t[s++]=255&r,t[s++]=r>>8&255,t[s++]=(null!==c?128:0)|l,t[s++]=u,t[s++]=0,null!==c)for(var h=0,f=c.length;f>h;++h){var d=c[h];t[s++]=d>>16&255,t[s++]=d>>8&255,t[s++]=255&d}if(null!==a){if(0>a||a>65535)throw"Loop count invalid.";t[s++]=33,t[s++]=255,t[s++]=11,t[s++]=78,t[s++]=69,t[s++]=84,t[s++]=83,t[s++]=67,t[s++]=65,t[s++]=80,t[s++]=69,t[s++]=50,t[s++]=46,t[s++]=48,t[s++]=3,t[s++]=1,t[s++]=255&a,t[s++]=a>>8&255,t[s++]=0}var _=!1;this.addFrame=function(e,r,n,a,l,u){if(_===!0&&(--s,_=!1),u=void 0===u?{}:u,0>e||0>r||e>65535||r>65535)throw"x/y invalid.";if(0>=n||0>=a||n>65535||a>65535)throw"Width/Height invalid.";if(l.length<n*a)throw"Not enough pixels for the frame size.";var p=!0,h=u.palette;if((void 0===h||null===h)&&(p=!1,h=c),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var f=o(h),d=0;f>>=1;)++d;f=1<<d;var v=void 0===u.delay?0:u.delay,m=void 0===u.disposal?0:u.disposal;if(0>m||m>3)throw"Disposal out of range.";var g=!1,y=0;if(void 0!==u.transparent&&null!==u.transparent&&(g=!0,y=u.transparent,0>y||y>=f))throw"Transparent color index.";if((0!==m||g||0!==v)&&(t[s++]=33,t[s++]=249,t[s++]=4,t[s++]=m<<2|(g===!0?1:0),t[s++]=255&v,t[s++]=v>>8&255,t[s++]=y,t[s++]=0),t[s++]=44,t[s++]=255&e,t[s++]=e>>8&255,t[s++]=255&r,t[s++]=r>>8&255,t[s++]=255&n,t[s++]=n>>8&255,t[s++]=255&a,t[s++]=a>>8&255,t[s++]=p===!0?128|d-1:0,p===!0)for(var b=0,w=h.length;w>b;++b){var x=h[b];t[s++]=x>>16&255,t[s++]=x>>8&255,t[s++]=255&x}s=i(t,s,2>d?2:d,l)},this.end=function(){return _===!1&&(t[s++]=59,_=!0),s}}function i(t,e,r,n){function i(r){for(;h>=r;)t[e++]=255&f,f>>=8,h-=8,e===s+256&&(t[s]=255,s=e++)}function o(t){f|=t<<h,h+=p,i(8)}t[e++]=r;var s=e++,a=1<<r,c=a-1,l=a+1,u=l+1,p=r+1,h=0,f=0,d=n[0]&c,_={};o(a);for(var v=1,m=n.length;m>v;++v){var g=n[v]&c,y=d<<8|g,b=_[y];if(void 0===b){for(f|=d<<h,h+=p;h>=8;)t[e++]=255&f,f>>=8,h-=8,e===s+256&&(t[s]=255,s=e++);4096===u?(o(a),u=l+1,p=r+1,_={}):(u>=1<<p&&++p,_[y]=u++),d=g}else d=b}return o(d),o(l),i(1),s+1===e?t[s]=0:(t[s]=e-s-1,t[e++]=0),e}function o(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!==(t[e++]+1&253)||97!==t[e++])throw"Invalid GIF 87a/89a header.";var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,a=7&i,c=1<<a+1;t[e++];t[e++];var l=null;o&&(l=e,e+=3*c);var u=!0,p=[],h=0,f=null,d=0,_=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){var v=t[e++];if(0===v)break;e+=v}break;case 249:if(4!==t[e++]||0!==t[e+4])throw"Invalid graphics extension block.";var m=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],0===(1&m)&&(f=null),d=m>>2&7,e++;break;case 254:for(;;){var v=t[e++];if(0===v)break;e+=v}break;default:throw"Unknown graphic control label: 0x"+t[e-1].toString(16)}break;case 44:var g=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,x=t[e++],j=x>>7,k=x>>6&1,E=7&x,A=1<<E+1,T=l,S=!1;if(j){var S=!0;T=e,e+=3*A}var F=e;for(e++;;){var v=t[e++];if(0===v)break;e+=v}p.push({x:g,y:y,width:b,height:w,has_local_palette:S,palette_offset:T,data_offset:F,data_length:e-F,transparent_index:f,interlaced:!!k,delay:h,disposal:d});break;case 59:u=!1;break;default:throw"Unknown gif block: 0x"+t[e-1].toString(16)}this.numFrames=function(){return p.length},this.loopCount=function(){return _},this.frameInfo=function(t){if(0>t||t>=p.length)throw"Frame index out of range.";return p[t]},this.decodeAndBlitFrameBGRA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);s(t,i.data_offset,a,o);var c=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,p=r-u,h=u,f=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),_=f,v=4*p;i.interlaced===!0&&(v+=4*r*7);for(var m=8,g=0,y=a.length;y>g;++g){var b=a[g];if(0===h&&(_+=v,h=u,_>=d&&(v=4*p+4*r*(m-1),_=f+(u+p)*(m<<1),m>>=1)),b===l)_+=4;else{var w=t[c+3*b],x=t[c+3*b+1],j=t[c+3*b+2];n[_++]=j,n[_++]=x,n[_++]=w,n[_++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);s(t,i.data_offset,a,o);var c=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,p=r-u,h=u,f=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),_=f,v=4*p;i.interlaced===!0&&(v+=4*r*7);for(var m=8,g=0,y=a.length;y>g;++g){var b=a[g];if(0===h&&(_+=v,h=u,_>=d&&(v=4*p+4*r*(m-1),_=f+(u+p)*(m<<1),m>>=1)),b===l)_+=4;else{var w=t[c+3*b],x=t[c+3*b+1],j=t[c+3*b+2];n[_++]=w,n[_++]=x,n[_++]=j,n[_++]=255}--h}}}function s(t,e,r,n){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,p=0,h=0,f=t[e++],d=new Int32Array(4096),_=null;;){for(;16>u&&0!==f;)p|=t[e++]<<u,u+=8,1===f?f=t[e++]:--f;if(c>u)break;var v=p&l;if(p>>=c,u-=c,v!==o){if(v===s)break;for(var m=a>v?v:_,g=0,y=m;y>o;)y=d[y]>>8,++g;var b=y,w=h+g+(m!==v?1:0);if(w>n)return void console.log("Warning, gif stream longer than expected.");r[h++]=b,h+=g;var x=h;for(m!==v&&(r[h++]=b),y=m;g--;)y=d[y],r[--x]=255&y,y>>=8;null!==_&&4096>a&&(d[a++]=_<<8|b,a>=l+1&&12>c&&(++c,l=l<<1|1)),_=v}else a=s+1,c=i+1,l=(1<<c)-1,_=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=n,r.GifReader=o}catch(a){}},{}],49:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-gif/node_modules/pixel-util/index.js")},{"./lib":50,"./src":3}],50:[function(t,e,r){(function(r){var n,i,o,s,a,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t("bluebird"),n=t("./pixel-data").PixelData,("undefined"==typeof window||null===window)&&(a=t("request"),s=t("fs")),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.createBuffer=function(t){var e;return e=function(){switch(this.getTypeof(t)){case"path":return this.fetchFile(t);case"url":return this.fetchBuffer(t);case"datauri":return o.resolve(this.getBuffer(t));case"binary":return o.resolve(this.getBufferBinary(t));case"blob":return this.readAsArrayBuffer(t);case"file":return this.readAsArrayBuffer(t);case"image":return this.fetchBuffer(t.src);default:return o.resolve(t)}}.call(this),e.then(function(t){return new r(new Uint8Array(t))})},e.prototype.fetchFile=function(t){return"undefined"==typeof window||null===window?o.resolve(s.readFileSync(t)):this.fetchArrayBuffer(t)},e.prototype.fetchBuffer=function(t){return"undefined"==typeof window||null===window?new o(function(e,r){return a({url:t,encoding:null},function(t,n,i){return null!=t?r(t):e(i)})}):this.fetchArrayBuffer(t)},e.prototype.fetchArrayBuffer=function(t){return new o(function(e,r){var n;return n=new XMLHttpRequest,n.open("GET",t,!0),n.responseType="arraybuffer",n.send(),n.onerror=function(t){return r(n.statusText)},n.onload=function(){return 4!==n.readyState?r(n.statusText):e(n.response)}})},e}(n),e.exports=new i,e.exports.PixelUtil=i}).call(this,t("buffer").Buffer)},{"./pixel-data":51,bluebird:53,buffer:17,fs:1,request:3}],51:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("bluebird"),i=t("./pixel-type").PixelType,n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.fetchImageData=function(t){var e;return e=function(){switch(this.getTypeof(t)){case"path":return this.fetchImageDataViaUrl(t);case"url":return this.fetchImageDataViaUrl(t);case"datauri":return this.fetchImageDataViaDatauri(t);case"binary":return this.fetchImageDataViaBinary(t);case"blob":return this.fetchImageDataViaBlob(t);case"file":return this.fetchImageDataViaBlob(t);case"image":return this.fetchImageDataViaUrl(t.src);default:return this.fetchImageDataViaBuffer(t)}}.call(this)},e.prototype.fetchImageDataViaUrl=function(t){return new o(function(e){return function(r,n){var i;return i=new Image,i.crossOrigin="Anonymous",i.src=t,i.onerror=function(t){return n(t.message)},i.onload=function(){return r(e.getImageData(i))}}}(this))},e.prototype.fetchImageDataViaDatauri=function(t){var e;return e=atob(t.slice(t.indexOf(",")+1)),this.fetchImageDataViaBinary(e)},e.prototype.fetchImageDataViaBinary=function(t){return this.fetchImageDataViaBuffer(this.getBufferBinary(t))},e.prototype.fetchImageDataViaBuffer=function(t){var e;return e=this.getImageType(t).type,this.fetchImageDataViaBlob(new Blob([t],{type:e}))},e.prototype.fetchImageDataViaBlob=function(t){var e;return e="undefined"!=typeof URL&&null!==URL?URL:webkitURL,this.fetchImageDataViaUrl(e.createObjectURL(t))},e.prototype.fetchObjectUrl=function(t){return new o(function(e){return function(e,r){return e(t)}}(this))},e.prototype.getImageData=function(t){var e;return e=document.createElement("canvas").getContext("2d"),e.canvas.width=t.width,e.canvas.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)},e.prototype.createImageData=function(t,e){var r,n,i;return r="undefined"!=typeof Uint8ClampedArray&&null!==Uint8ClampedArray?Uint8ClampedArray:Uint8Array,"undefined"!=typeof document&&null!==document?(n=document.createElement("canvas").getContext("2d"),n.createImageData(t,e)):(i={width:t,height:e},i.data=new r(t*e*4),i)},e}(i),e.exports=new n,e.exports.PixelData=n},{"./pixel-type":52,bluebird:53}],52:[function(t,e,r){(function(r){var n,i,o,s;i=t("bluebird"),o=t("image-type"),s=t("mime"),s.define({"image/vnd.ms-photo":["jxr"]}),s.extensions["image/vnd.ms-photo"]="jxr",s.extensions["image/jpeg"]="jpg",s.extensions["image/tiff"]="tif",n=function(){function t(){}return t.prototype.get=function(t){var e,r,n,i,o;return i=this.getTypeof(t),n=function(){switch(i){case"datauri":return this.getBuffer(t);case"binary":return this.getBufferBinary(t);case"blob":return this.readAsArrayBufferSync(t);case"file":return this.readAsArrayBufferSync(t);default:return t}}.call(this),e=function(){var t;switch(i){case"url":return t=n.split("?"),o=t[0],r=t[1],this.lookupImageType(o);case"path":return this.lookupImageType(n);case"image":return this.lookupImageType(n.src);default:return this.getImageType(n)}}.call(this),null==e&&(e={}),e.type=i,e},t.prototype.detect=function(t){var e,r;return r=this.getTypeof(t),e=function(){switch(r){case"datauri":return i.resolve(this.getBuffer(t));case"binary":return i.resolve(this.getBufferBinary(t));case"blob":return this.readAsArrayBuffer(t);case"file":return this.readAsArrayBuffer(t);default:return i.resolve(t)}}.call(this),e.then(function(t){return function(e){var n,i,o;return n=function(){var t;switch(r){case"url":return t=e.split("?"),o=t[0],i=t[1],this.lookupImageType(o);case"path":return this.lookupImageType(e);case"image":return this.lookupImageType(e.src);default:return this.getImageType(e)}}.call(t),null==n&&(n={}),n.type=r,n}}(this))},t.prototype.getTypeof=function(t){switch(typeof t){case"string":switch(!1){case!t.match(/^https?:\/\//):return"url";case!t.match(/^data:image\//):return"datauri";case!t.match(/^(?:\w:)?[\w\-\/\\.~ ]+$/):return"path";default:return"binary"}break;case"object":if(r.isBuffer(t))return"buffer";if(null!=t?!t.toString:!0)return"undefined";switch(t.toString()){case"[object HTMLImageElement]":return"image";default:return t.toString().match(/(\w+)\]/)[1].toLowerCase()}break;default:return"undefined"}},t.prototype.getImageType=function(t){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),o(t)},t.prototype.lookupImageType=function(t){var e;return e=s.lookup(t),{mime:e,ext:s.extension(e)}},t.prototype.getBuffer=function(t){return new r(t.slice(t.indexOf(",")+1),"base64")},t.prototype.getBufferBinary=function(t){return new r(t,"binary")},t.prototype.readAsArrayBuffer=function(t){return new i(function(e,r){var n;return"undefined"==typeof FileReader||null===FileReader?r(new ArrayBuffer(0)):(n=new FileReader,n.readAsArrayBuffer(t),n.onload=function(){return e(n.result)})})},t.prototype.readAsArrayBufferSync=function(t){var e;return"undefined"!=typeof FileReaderSync&&null!==FileReaderSync?(e=new FileReaderSync,e.readAsArrayBuffer(t)):new ArrayBuffer(0)},t}(),e.exports=new n,e.exports.PixelType=n}).call(this,t("buffer").Buffer)},{bluebird:53,buffer:17,"image-type":54,mime:56}],53:[function(e,r,n){(function(e,i){!function(e){if("object"==typeof n&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=e()}}(function(){var t,r,n;
return function o(t,e,r){function n(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,o,t,e,r)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function i(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._lateQueue.push(t,e,r),this._queueTick()}function o(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.push(t,e,r),this._queueTick()}function s(t){var e=this._getDomain();if(void 0!==e){var r=e.bind(t._settlePromises);this._normalQueue.push(r,t,void 0)}else this._normalQueue._pushOne(t);this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=t("./schedule.js"),u=t("./queue.js"),p=t("./util.js");n.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(t,e){1===arguments.length&&(e=t,t=function(){throw e});var r=this._getDomain();if(void 0!==r&&(t=r.bind(t)),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},n.prototype._getDomain=function(){};p.hasDevTools?(l.isStatic&&(l=function(t){setTimeout(t,0)}),n.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?i.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},n.prototype.invoke=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},n.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=o,n.prototype.settlePromises=s),n.prototype.invokeFirst=function(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=a},{"./queue.js":28,"./schedule.js":31,"./util.js":38,events:39}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},o=function(t,e){this._setBoundTo(t),this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var a=r(n),c=new t(e);c._propagateFrom(this,1);var l=this._target();if(a instanceof t){var u={promiseRejectionQueued:!1,promise:c,target:l,bindingPromise:a};l._then(e,i,c._progress,c,u),a._then(o,s,c._progress,c,u)}else c._setBoundTo(n),c._resolveCallback(l);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(n,i){var o=r(n),s=new t(e);return o instanceof t?o._then(function(t){s._setBoundTo(t),s._resolveCallback(i)},s._reject,s._progress,s,null):(s._setBoundTo(n),s._resolveCallback(i)),s}}},{}],4:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=n,e.exports=o},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+a.classString(t)+" has no method '"+a.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){var e=this.pop(),n=r(t,e);return n.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util.js"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;++i)r[i-1]=arguments[i];return r.push(t),this._then(n,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=o;else if(c){var n=s(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),i=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(t,r,n){"use strict";r.exports=function(){function r(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);w(this,r),e>32&&this.uncycle()}function n(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=n[a];if(e[i]!==c)break;e.pop(),i--}e=n}}function s(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=_.test(n)||"    (No stack trace)"===n,o=i&&g(n);i&&!o&&(m&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||_.test(n))break}return r>0&&(e=e.slice(r)),e}function c(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+l(e)+">, no stack trace)"}function l(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function u(t){var e=t.match(y);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var p,h=t("./async.js"),f=t("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,_=null,v=null,m=!1;f.inherits(r,Error),r.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=r[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var c=n>0?e[n-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=n-2;u>=0;--u)e[u]._length=l,l++;return}}}},r.prototype.parent=function(){return this._parent},r.prototype.hasParent=function(){return void 0!==this._parent},r.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=r.parseStackAndMessage(t),a=e.message,c=[e.stack],l=this;void 0!==l;)c.push(s(l.stack.split("\n"))),l=l._parent;o(c),i(c),f.notEnumerableProp(t,"stack",n(a,c)),f.notEnumerableProp(t,"__stackCleaned__",!0)}},r.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:r,stack:s(e)}},r.formatAndLogError=function(t,e){if("undefined"!=typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+v(n,t)}else r=e+String(t);"function"==typeof p?p(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},r.unhandledRejection=function(t){r.formatAndLogError(t,"^--- With additional stack trace: ")},r.isSupported=function(){return"function"==typeof w},r.fireRejectionEvent=function(t,e,n,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(s){h.throwLater(s)}var a=!1;try{a=x(t,n,i)}catch(s){a=!0,h.throwLater(s)}var c=!1;if(b)try{c=b(t.toLowerCase(),{reason:n,promise:i})}catch(s){c=!0,h.throwLater(s)}a||o||c||"unhandledRejection"!==t||r.formatAndLogError(n,"Unhandled rejection ")};var g=function(){return!1},y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;r.setBounds=function(t,e){if(r.isSupported()){for(var n,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,c=-1,l=0;l<o.length;++l){var p=u(o[l]);if(p){n=p.fileName,a=p.line;break}}for(var l=0;l<s.length;++l){var p=u(s[l]);if(p){i=p.fileName,c=p.line;break}}0>a||0>c||!n||!i||n!==i||a>=c||(g=function(t){if(d.test(t))return!0;var e=u(t);return e&&e.fileName===n&&a<=e.line&&e.line<=c?!0:!1})}};var b,w=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():c(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,_=t,v=e;var r=Error.captureStackTrace;return g=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,v=e,m=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in n||!i?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?c(e):e.toString()},null):(_=t,v=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),x=function(){if(f.isNode)return function(t,r,n){return"rejectionHandled"===t?e.emit(t,n):e.emit(t,r,n)};var t=!1,r=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(i){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){r=!1}r&&(b=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!0,r)),n?!self.dispatchEvent(n):!1});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=s[t],i=self[n];return i?("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(p=function(t){console.warn(t)},f.isNode&&e.stderr.isTTY?p=function(t){e.stderr.write("[31m"+t+"[39m\n")}:f.isNode||"string"!=typeof(new Error).stack||(p=function(t){console.warn("%c"+t,"color: red")})),r}},{"./async.js":2,"./util.js":38}],8:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t).call(r,e);if(n===a)return n;var i=c(r);return i.length?(a.e=new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,c=t("./es5.js").keys,l=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,i=this._promise,o=i._boundTo,c=0,l=this._instances.length;l>c;++c){var u=this._instances[c],p=u===Error||null!=u&&u.prototype instanceof Error;if(p&&t instanceof u){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}if("function"==typeof u&&!p){var f=n(u,t);if(f===a){t=a.e;break}if(f){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){this._trace=new e(o())}function i(){return r()?new n:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&s.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,i}},{}],10:[function(t,r,n){"use strict";r.exports=function(r,n){var i,o,s=t("./async.js"),a=t("./errors.js").Warning,c=t("./util.js"),l=c.canAttachTrace,u=!1||c.isNode&&(!!e.env.BLUEBIRD_DEBUG||"development"===e.env.NODE_ENV);return u&&s.disableTrampolineIfNecessary(),r.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},r.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",i,void 0,this)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",o,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},r.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},r.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},r.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},r.prototype._captureStackTrace=function(){return u&&(this._trace=new n(this._peekContext())),this},r.prototype._attachExtraTrace=function(t,e){if(u&&l(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=n.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},r.prototype._warn=function(t){var e=new a(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var i=n.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(e,"")},r.onPossiblyUnhandledRejection=function(t){o="function"==typeof t?t:void 0},r.onUnhandledRejectionHandled=function(t){i="function"==typeof t?t:void 0},r.longStackTraces=function(){if(s.haveItemsQueued()&&u===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");u=n.isSupported(),u&&s.disableTrampolineIfNecessary()},r.hasLongStackTraces=function(){return u&&n.isSupported()},n.isSupported()||(r.longStackTraces=function(){},u=!1),function(){return u}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var n=t("./util.js"),i=n.isPrimitive,o=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},n=function(){},s=function(){throw void 0},a=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return void 0===t?this.then(n):o&&i(t)?this._then(a(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return void 0===t?this.then(s):o&&i(t)?this._then(a(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],13:[function(t,e,r){"use strict";function n(t,e){function r(n){return this instanceof r?(p(this,"message","string"==typeof n?n:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return u(r,Error),r}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js"),c=a.freeze,l=t("./util.js"),u=l.inherits,p=l.notEnumerableProp,h=n("Warning","warning"),f=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(_.prototype[m[g]]=Array.prototype[m[g]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return y--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),p(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var n;return n=h&&f(e)?r?s(e):a(e):r?i:o,t._then(n,d,void 0,e,void 0)}function l(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=n(s,i);if(a instanceof e)return a=a._target(),c(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function u(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo,t):i(t);if(void 0!==o){var s=n(o,r);if(s instanceof e)return s=s._target(),c(s,t,!0)}return t}var p=t("./util.js"),h=p.wrapsPrimitiveReceiver,f=p.isPrimitive,d=p.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?l:u,e?l:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=p(r[o])(t);if(n._popContext(),s===u){n._pushContext();var a=e.reject(u.e);return n._popContext(),a}var c=i(s,n);if(c instanceof e)return c}return null}function s(t,r,i,o){var s=this._promise=new e(n);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var a=t("./errors.js"),c=a.TypeError,l=t("./util.js"),u=l.errorObj,p=l.tryCatch,h=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===u)return this._promise._rejectCallback(t.e,!1,!0);var r=t.value;if(t.done===!0)this._promise._resolveCallback(r);else{var n=i(r,this._promise);if(!(n instanceof e)&&(n=o(n,this._yieldHandlers,this._promise),null===n))return void this._throw(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(t)},e.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var n=new r(o).promise();return void 0!==t?n.spread(t):n}}},{"./util.js":38}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:d,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function c(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj,f={},d=[];u.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===f){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,l=this._promise._boundTo;this._promise._pushContext();var u=p(c).call(l,t,r,o);if(this._promise._popContext(),u===h)return this._reject(u.e);var d=i(u,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,n[r]=f,d._proxyPromiseArray(this,r);if(!d._isFulfilled())return this._reject(d._reason());u=d._value()}n[r]=u}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;r>o;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(t,e,r,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},e.attempt=e["try"]=function(t,n,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var c=new e(r);c._captureStackTrace(),c._pushContext();var l=o.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return c._popContext(),c._resolveFromSyncValue(l),c},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=a(e).apply(r._boundTo,[null].concat(t));i===c&&s.throwLater(i.e)}function n(t,e){var r=this,n=r._boundTo,i=void 0===t?a(e).call(n,null):a(e).call(n,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=r._target(),i=n._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(r._boundTo,t);o===c&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,a=t.promise,c=t.receiver,l=o(i).call(c,r);if(l===s){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var u=n.canAttachTrace(l.e)?l.e:new Error(n.toString(l.e));a._attachExtraTrace(u),a._progress(l.e)}}else l instanceof e?l._then(a._progress,null,null,a,void 0):a._progress(l)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):i.invoke(o,c,t);else{var l=this._receiverAt(s);"function"==typeof a?a.call(l,t,c):l instanceof r&&!l._isResolved()&&l._promiseProgressed(t,c)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e,r){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==u&&this._resolveFromResolver(t)}function r(t){var r=new e(u);r._fulfillmentHandler0=t,r._rejectionHandler0=t,r._progressHandler0=t,r._promise0=t,r._receiver0=t,r._settledValue=t}var n=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new e.PromiseInspection(this._target())},o=function(t){return e.reject(new l(t))},s=t("./util.js"),a=t("./async.js"),c=t("./errors.js"),l=e.TypeError=c.TypeError;e.RangeError=c.RangeError,e.CancellationError=c.CancellationError,e.TimeoutError=c.TimeoutError,e.OperationalError=c.OperationalError,e.RejectionError=c.OperationalError,e.AggregateError=c.AggregateError;var u=function(){},p={},h={e:null},f=t("./thenables.js")(e,u),d=t("./promise_array.js")(e,u,f,o),_=t("./captured_trace.js")(),v=t("./debuggability.js")(e,_),m=t("./context.js")(e,_,v),g=t("./catch_filter.js")(h),y=t("./promise_resolver.js"),b=y._nodebackForPromise,w=s.errorObj,x=s.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var n,i=new Array(r-1),o=0;for(n=0;r-1>n;++n){var s=arguments[n];if("function"!=typeof s)return e.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[n];var a=new g(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},e.prototype.then=function(t,e,r){if(v()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(n+=", "+s.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);n._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,p,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){
var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new d(this).promise()},e.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var r=new e(u),n=x(t)(b(r));return n===w&&r._rejectCallback(n.e,!0,!0),r},e.all=function(t){return new d(t).promise()},e.defer=e.pending=function(){var t=new e(u);return new y(t)},e.cast=function(t){var r=f(t);if(!(r instanceof e)){var n=r;r=new e(u),r._fulfillUnchecked(n)}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(u);return r._captureStackTrace(),r._rejectCallback(t,!0),r},e.setScheduler=function(t){if("function"!=typeof t)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},e.prototype._then=function(t,r,n,i,o){var s=void 0!==o,c=s?o:new e(u);s||(c._propagateFrom(this,5),c._captureStackTrace());var l=this._target();l!==this&&(void 0===i&&(i=this._boundTo),s||c._setIsMigrated());var p=l._addCallbacks(t,r,n,c,i);return l._isResolved()&&!l._isSettlePromisesQueued()&&a.invoke(l._settlePromiseAtPostResolution,l,p),c},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r){var n=t._fulfillmentHandlerAt(r),i=t._rejectionHandlerAt(r),o=t._progressHandlerAt(r),s=t._promiseAt(r),a=t._receiverAt(r);s instanceof e&&s._setIsMigrated(),this._addCallbacks(n,i,o,s,a)},e.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=n,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,r){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(n(),!1,!0);var i=f(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(r?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),c=0;a>c;++c)s._migrateCallbacks(this,c);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,r){r||s.markAsOriginatingFromRejection(t);var n=s.ensureErrorObject(t),i=n===t;this._attachExtraTrace(n,e?i:!1),this._reject(t,i?void 0:n)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=x(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===w&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,r,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==p||this._isRejected()?x(t).call(e,r):x(t).apply(this._boundTo,r),i._popContext(),o===w||o===i||o===h){var s=o===i?n():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),n=r instanceof e;if(n&&r._isMigrated())return r._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,c=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?n?this._settlePromiseFromHandler(i,c,s,r):i.call(c,s,r):c instanceof d?c._isResolved()||(this._isFulfilled()?c._promiseFulfilled(s,r):c._promiseRejected(s,r)):n&&(this._isFulfilled()?r._fulfill(s):r._reject(s,o)),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=n();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var r=n();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(_.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=n,t("./progress.js")(e,d),t("./method.js")(e,u,f,o),t("./bind.js")(e,u,f),t("./finally.js")(e,h,f),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,d,f,u),e.Promise=e,t("./map.js")(e,d,o,f,u),t("./cancel.js")(e),t("./using.js")(e,o,f,m),t("./generators.js")(e,o,u,f),t("./nodeify.js")(e),t("./call_get.js")(e),t("./props.js")(e,d,f,o),t("./race.js")(e,u,f,o),t("./reduce.js")(e,d,o,f,u),t("./settle.js")(e,d),t("./some.js")(e,d,o),t("./promisify.js")(e,u),t("./any.js")(e),t("./each.js")(e,u),t("./timers.js")(e,u),t("./filter.js")(e,u),s.toFastProperties(e),s.toFastProperties(e.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new e(u)),_.setBounds(a.firstLineError,s.lastLineError),e}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),c=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,r){var s=n(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(l,this._reject,void 0,this,r):void this._reject(s._reason());if(s=s._value(),!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!c(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(-5===r?this._resolveEmptyArray():this._resolve(o(r)));var u=this.getActualLength(s.length);this._length=u,this._values=this.shouldCopyValues()?new Array(u):this._values;for(var p=this._promise,h=0;u>h;++h){var f=this._isResolved(),d=n(s[h],p);d instanceof e?(d=d._target(),f?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,h):d._isFulfilled()?this._promiseFulfilled(d._value(),h):this._promiseRejected(d._reason(),h)):f||this._promiseFulfilled(d,h)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new p(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=f.keys(t),i=0;i<r.length;++i){var o=r[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,r){if(null!==t){if(e){var n=i(c(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}}var s,a=t("./util.js"),c=a.maybeWrapAsError,l=t("./errors.js"),u=l.TimeoutError,p=l.OperationalError,h=a.haveGetters,f=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},h){var _={get:function(){return o(this.promise)}};f.defineProperty(s.prototype,"asCallback",_),f.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new u("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!w.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,r){var n=f.getDataPropertyOrDefault(t,e+r,b);return n?i(n):!1}function s(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,r,n){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=n===x?!0:x(u,p,t);"function"!=typeof p||f.isNativeFunctionMethod(p)||i(p)||o(t,u,e)||!n(u,p,t,h)||c.push(u,p)}return s(c,e,r),c}function c(t,n,i,o){function s(){var i=n;n===h&&(i=this);var o=new e(r);o._captureStackTrace();var s="string"==typeof c&&this!==a?this[c]:t,l=d(o);try{s.apply(i,_(arguments,l))}catch(u){o._rejectCallback(v(u),!0,!0)}return o}var a=function(){return this}(),c=t;return"string"==typeof c&&(t=o),f.notEnumerableProp(s,"__isPromisified__",!0),s}function l(t,e,r,n){for(var i=new RegExp(j(e)+"$"),o=a(t,e,i,r),s=0,c=o.length;c>s;s+=2){var l=o[s],u=o[s+1],p=l+e;t[p]=n===k?k(l,h,l,u,e):n(u,function(){return k(l,h,l,u,e)})}return f.toFastProperties(t),t}function u(t,e){return k(t,e,void 0,t)}var p,h={},f=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,_=f.withAppended,v=f.maybeWrapAsError,m=f.canEvaluate,g=t("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=/^(?:length|name|arguments|caller|callee|prototype|__isPromisified__)$/,x=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},k=m?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new g("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var r=u(t,arguments.length<2?h:e);return f.copyDescriptors(t,r,n),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=y);var n=e.filter;"function"!=typeof n&&(n=x);var i=e.promisifier;if("function"!=typeof i&&(i=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=f.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&f.isClass(a)&&(l(a.prototype,r,n,i),l(a,r,n,i))}return l(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var e=l.keys(t),r=e.length,n=new Array(2*r),i=0;r>i;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function s(t){var r,s=n(t);return c(s)?(r=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&r._propagateFrom(s,4),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),c=a.isObject,l=t("./es5.js");a.inherits(o,r),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),o=0,s=this.length();s>o;++o)n[this._values[o+i]]=this._values[o];this._resolve(n)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;i>o;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=i},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var c=n(t);if(c instanceof e)return a(c);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var l=new e(r);void 0!==o&&l._propagateFrom(o,5);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(u,p,void 0,l,null)}return l}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var c=i(n,this._promise),u=!1,p=c instanceof e;p&&(c=c._target(),c._isPending()?c._proxyPromiseArray(this,-1):c._isFulfilled()?(n=c._value(),this._gotAccum=!0):(this._reject(c._reason()),u=!0)),p||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=n,u||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function c(t,e,r,i){if("function"!=typeof e)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,r,i);return o.promise()}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj;u.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,c=null!==a,l=this._gotAccum,u=this._valuesPhase;if(!u)for(u=this._valuesPhase=new Array(s),o=0;s>o;++o)u[o]=0;if(o=u[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=l=!0,u[r]=0===o?1:2):-1===r?(this._accum=t,this._gotAccum=l=!0):0===o?u[r]=1:(u[r]=2,this._accum=t),l){for(var f,d=this._callback,_=this._promise._boundTo,v=this._reducingIndex;s>v;++v)if(o=u[v],2!==o){if(1!==o)return;if(t=n[v],this._promise._pushContext(),c?(a.push(t),f=p(d).call(_,t,v,s)):f=p(d).call(_,this._accum,t,v,s),this._promise._popContext(),f===h)return this._reject(f.e);var m=i(f,this._promise);if(m instanceof e){if(m=m._target(),m._isPending())return u[v]=4,m._proxyPromiseArray(this,v);if(!m._isFulfilled())return this._reject(m._reason());f=m._value()}this._reducingIndex=v+1,this._accum=f}else this._reducingIndex=v+1;this._resolve(c?a:this._accum)}},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,r,n){return c(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(t,r,n){"use strict";var o,s=t("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var c=i.setImmediate,l=e.nextTick;o=s.isRecentNode?function(t){c.call(i,t)}:function(t){l.call(e,t)}}else"undefined"!=typeof MutationObserver?(o=function(t){var e=document.createElement("div"),r=new MutationObserver(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0):o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:a;r.exports=o},{"./util":38}],32:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(n,r),n.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new n(t).promise()},e.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":38}],33:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,c=t("./errors.js").AggregateError,l=s.isArray;s.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new c,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(l(t)){if(t instanceof e)return t;if(o(t)){var u=new e(r);return t._then(u._fulfillUnchecked,u._rejectUncheckedCheckError,u._progressUnchecked,u,null),u}var p=a.tryCatch(i)(t);if(p===c){n&&n._pushContext();var u=e.reject(p.e);return n&&n._popContext(),u}if("function"==typeof p)return s(t,p,n)}return t}function i(t){return t.then}function o(t){return u.call(t,"_promise0")}function s(t,n,i){function o(r){u&&(t===r?u._rejectCallback(e._makeSelfResolutionError(),!1,!0):u._resolveCallback(r),u=null)}function s(t){u&&(u._rejectCallback(t,h,!0),u=null)}function l(t){u&&"function"==typeof u._progress&&u._progress(t)}var u=new e(r),p=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var h=!0,f=a.tryCatch(n).call(t,o,s,l);return h=!1,u&&f===c&&(u._rejectCallback(f.e,!0,!0),u=null),p}var a=t("./util.js"),c=a.errorObj,l=a.isObject,u={}.hasOwnProperty;return n}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var r=new s(e);o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var i=new e(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,e.resolve(t)._then(c,null,null,n,void 0)};e.prototype.delay=function(t){return l(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){a(r,e)},t);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var r=t.length,n=0;r>n;++n){var i=t[n];if(i.isRejected())return e.reject(i.error());t[n]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,r){function i(){if(o>=c)return l.resolve();var u=a(t[o++]);if(u instanceof e&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),t.promise)}catch(p){return s(p)}if(u instanceof e)return u._then(i,s,null,null,null)}i()}var o=0,c=t.length,l=e.defer();return i(),l.promise}function l(t){var e=new v;return e._settledValue=t,e._bitField=268435456,c(this,e).thenReturn(t)}function u(t){var e=new v;return e._settledValue=t,e._bitField=134217728,c(this,e).thenThrow(t)}function p(t,e,r){this._data=t,this._promise=e,this._context=r}function h(t,e,r){this.constructor$(t,e,r)}function f(t){return p.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,_=t("./util.js").inherits,v=e.PromiseInspection;p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},p.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},p.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,p),h.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var s=new Array(t),a=0;t>a;++a){var c=arguments[a];if(p.isDisposer(c)){var h=c;c=c.promise(),c._setDisposable(h)}else{var d=n(c);d instanceof e&&(c=d._then(f,null,null,{resources:s,index:a},void 0))}s[a]=c}var _=e.settle(s).then(o).then(function(t){_._pushContext();var e;try{e=i.apply(void 0,t)}finally{_._popContext()}return e})._then(l,u,void 0,s,void 0);return s.promise=_,_},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(t,r,n){"use strict";function i(){try{return S.apply(this,arguments);
}catch(t){return T.e=t,T}}function o(t){return S=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function c(t){return s(t)?new Error(m(t)):t}function l(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function u(t,e,r){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function p(t,e,r){if(s(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,n),t}function h(t){throw t}function f(t){try{if("function"==typeof t){var e=k.names(t.prototype);if(k.isES5&&e.length>1||e.length>0&&(1!==e.length||"constructor"!==e[0])||P.test(t+""))return!0}return!1}catch(r){return!1}}function d(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}function _(t){return L.test(t)}function v(t,e,r){for(var n=new Array(t),i=0;t>i;++i)n[i]=e+i+r;return n}function m(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){try{p(t,"isOperational",!0)}catch(e){}}function y(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return t instanceof Error&&k.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function x(t,e,r){for(var n=k.names(t),i=0;i<n.length;++i){var o=n[i];r(o)&&k.defineProperty(e,o,k.getDescriptor(t,o))}}function j(t){return t===t.call||t===t.toString||t===t.bind||t===t.apply}var k=t("./es5.js"),E="undefined"==typeof navigator,A=function(){try{var t={};return k.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),T={e:{}},S,F=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},R=function(){return"string"!==this}.call("string"),C=function(){if(k.isES5){var t=Object.prototype,e=Object.getOwnPropertyNames;return function(r){for(var n=[],i=Object.create(null);null!=r&&r!==t;){var o;try{o=e(r)}catch(s){return n}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(r,c);null!=l&&null==l.get&&null==l.set&&n.push(c)}}r=k.getPrototypeOf(r)}return n}}return function(t){var e=[];for(var r in t)e.push(r);return e}}(),P=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(m(t))}:function(t){if(b(t))return t;try{throw new Error(m(t))}catch(e){return e}}}(),O={isClass:f,isIdentifier:_,inheritedDataKeys:C,getDataPropertyOrDefault:u,thrower:h,isArray:k.isArray,haveGetters:A,notEnumerableProp:p,isPrimitive:s,isObject:a,canEvaluate:E,errorObj:T,tryCatch:o,inherits:F,withAppended:l,maybeWrapAsError:c,wrapsPrimitiveReceiver:R,toFastProperties:d,filledRange:v,toString:m,canAttachTrace:b,ensureErrorObject:I,originatesFromRejection:y,markAsOriginatingFromRejection:g,classString:w,copyDescriptors:x,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof e&&"[object process]"===w(e).toLowerCase(),isNativeFunctionMethod:j};O.isRecentNode=O.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}();try{throw new Error}catch(U){O.lastLineError=U}r.exports=O},{"./es5.js":14}],39:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];for(l=r.slice(),n=l.length,c=0;n>c;c++)l[c].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],54:[function(t,e,r){"use strict";var n=t("file-type");e.exports=function(t){var e=["jpg","png","gif","webp","tif","bmp","jxr","psd"],r=n(t);return-1!==e.indexOf(r&&r.ext)?r:null}},{"file-type":55}],55:[function(t,e,r){"use strict";e.exports=function(t){return t&&t.length>1?255===t[0]&&216===t[1]&&255===t[2]?{ext:"jpg",mime:"image/jpeg"}:137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?{ext:"png",mime:"image/png"}:71===t[0]&&73===t[1]&&70===t[2]?{ext:"gif",mime:"image/gif"}:87===t[8]&&69===t[9]&&66===t[10]&&80===t[11]?{ext:"webp",mime:"image/webp"}:73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]?{ext:"tif",mime:"image/tiff"}:66===t[0]&&77===t[1]?{ext:"bmp",mime:"image/bmp"}:73===t[0]&&73===t[1]&&188===t[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===t[0]&&66===t[1]&&80===t[2]&&83===t[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===t[0]&&75===t[1]&&3===t[2]&&4===t[3]&&109===t[30]&&105===t[31]&&109===t[32]&&101===t[33]&&116===t[34]&&121===t[35]&&112===t[36]&&101===t[37]&&97===t[38]&&112===t[39]&&112===t[40]&&108===t[41]&&105===t[42]&&99===t[43]&&97===t[44]&&116===t[45]&&105===t[46]&&111===t[47]&&110===t[48]&&47===t[49]&&101===t[50]&&112===t[51]&&117===t[52]&&98===t[53]&&43===t[54]&&122===t[55]&&105===t[56]&&112===t[57]?{ext:"epub",mime:"application/epub+zip"}:80!==t[0]||75!==t[1]||3!==t[2]&&5!==t[2]&&7!==t[2]||4!==t[3]&&6!==t[3]&&8!==t[3]?117===t[257]&&115===t[258]&&116===t[259]&&97===t[260]&&114===t[261]?{ext:"tar",mime:"application/x-tar"}:82!==t[0]||97!==t[1]||114!==t[2]||33!==t[3]||26!==t[4]||7!==t[5]||0!==t[6]&&1!==t[6]?31===t[0]&&139===t[1]&&8===t[2]?{ext:"gz",mime:"application/gzip"}:66===t[0]&&90===t[1]&&104===t[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===t[0]&&122===t[1]&&188===t[2]&&175===t[3]&&39===t[4]&&28===t[5]?{ext:"7z",mime:"application/x-7z-compressed"}:0===t[0]&&0===t[1]&&0===t[2]&&(24===t[3]||32===t[3])&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]||51===t[0]&&103===t[1]&&112===t[2]&&53===t[3]?{ext:"mp4",mime:"video/mp4"}:0===t[0]&&0===t[1]&&0===t[2]&&28===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&77===t[8]&&52===t[9]&&86===t[10]?{ext:"m4v",mime:"video/x-m4v"}:109===t[31]&&97===t[32]&&116===t[33]&&114===t[34]&&111===t[35]&&115===t[36]&&107===t[37]&&97===t[38]?{ext:"mkv",mime:"video/x-matroska"}:26===t[0]&&69===t[1]&&223===t[2]&&163===t[3]?{ext:"webm",mime:"video/webm"}:0===t[0]&&0===t[1]&&0===t[2]&&20===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]?{ext:"mov",mime:"video/quicktime"}:82===t[0]&&73===t[1]&&70===t[2]&&70===t[3]&&65===t[8]&&86===t[9]&&73===t[10]?{ext:"avi",mime:"video/x-msvideo"}:48===t[0]&&38===t[1]&&178===t[2]&&117===t[3]&&142===t[4]&&102===t[5]&&207===t[6]&&17===t[7]&&166===t[8]&&217===t[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===t[0]&&0===t[1]&&1===t[2]&&"b"===t[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===t[0]&&68===t[1]&&51===t[2]||255===t[0]&&251===t[1]?{ext:"mp3",mime:"audio/mpeg"}:102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&77===t[8]&&52===t[9]&&65===t[10]||77===t[0]&&52===t[1]&&65===t[2]&&32===t[3]?{ext:"m4a",mime:"audio/m4a"}:79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]?{ext:"ogg",mime:"audio/ogg"}:102===t[0]&&76===t[1]&&97===t[2]&&67===t[3]?{ext:"flac",mime:"audio/x-flac"}:82===t[0]&&73===t[1]&&70===t[2]&&70===t[3]&&87===t[8]&&65===t[9]&&86===t[10]&&69===t[11]?{ext:"wav",mime:"audio/x-wav"}:37===t[0]&&80===t[1]&&68===t[2]&&70===t[3]?{ext:"pdf",mime:"application/pdf"}:77===t[0]&&90===t[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==t[0]&&70!==t[0]||87!==t[1]||83!==t[2]?123===t[0]&&92===t[1]&&114===t[2]&&116===t[3]&&102===t[4]?{ext:"rtf",mime:"application/rtf"}:119===t[0]&&79===t[1]&&70===t[2]&&70===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]?{ext:"woff",mime:"application/font-woff"}:119===t[0]&&79===t[1]&&70===t[2]&&50===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]?{ext:"woff2",mime:"application/font-woff"}:76===t[34]&&80===t[35]&&(2===t[8]&&0===t[9]&&1===t[10]||1===t[8]&&0===t[9]&&0===t[10]||2===t[8]&&0===t[9]&&2===t[10])?{ext:"eot",mime:"application/octet-stream"}:0===t[0]&&1===t[1]&&0===t[2]&&0===t[3]&&0===t[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===t[0]&&84===t[1]&&84===t[2]&&79===t[3]&&0===t[4]?{ext:"otf",mime:"application/font-sfnt"}:0===t[0]&&0===t[1]&&1===t[2]&&0===t[3]?{ext:"ico",mime:"image/x-icon"}:70===t[0]&&76===t[1]&&86===t[2]&&1===t[3]?{ext:"flv",mime:"video/x-flv"}:37===t[0]&&33===t[1]?{ext:"ps",mime:"application/postscript"}:253===t[0]&&55===t[1]&&122===t[2]&&88===t[3]&&90===t[4]&&0===t[5]?{ext:"xz",mime:"application/x-xz"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null}},{}],56:[function(t,e,r){(function(r){function n(){this.types=Object.create(null),this.extensions=Object.create(null)}var i=(t("path"),t("fs"));n.prototype.define=function(t){for(var e in t){for(var n=t[e],i=0;i<n.length;i++)r.env.DEBUG_MIME&&this.types[n]&&console.warn(this._loading.replace(/.*\//,""),'changes "'+n[i]+'" extension type from '+this.types[n]+" to "+e),this.types[n[i]]=e;this.extensions[e]||(this.extensions[e]=n[0])}},n.prototype.load=function(t){this._loading=t;var e={},r=i.readFileSync(t,"ascii"),n=r.split(/[\r\n]+/);n.forEach(function(t){var r=t.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);e[r.shift()]=r}),this.define(e),this._loading=null},n.prototype.lookup=function(t,e){var r=t.replace(/.*[\.\/\\]/,"").toLowerCase();return this.types[r]||e||this.default_type},n.prototype.extension=function(t){var e=t.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[e]};var o=new n;o.define(t("./types.json")),o.default_type=o.lookup("bin"),o.Mime=n,o.charsets={lookup:function(t,e){return/^text\//.test(t)?"UTF-8":e}},e.exports=o}).call(this,t("_process"))},{"./types.json":57,_process:25,fs:1,path:24}],57:[function(t,e,r){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mdp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":["woff"],"application/font-woff2":["woff2"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],
"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["dmg"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-otf":["otf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-ttf":["ttf","ttc"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["iso"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdownload":["exe","dll","com","bat","msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","wmz","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-nzb":["nzb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-research-info-systems":["ris"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-wav":["wav"],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/opentype":["otf"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jpeg":["jpeg","jpg","jpe"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-mrsid-image":["sid"],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/sgml":["sgml","sgm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["markdown","md","mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-pascal":["p","pas"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},{}],58:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-jpg/index.js")},{"./lib":59,"./src":3}],59:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t("pixel-util").PixelUtil,o=t("jpeg-js"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.parse=function(t){return this.createBuffer(t).then(function(t){return function(e){var r,n,i,s;n=o.decode(e),r=t.createImageData(n.width,n.height),t.set(r,n),delete n.data;for(i in n)s=n[i],r[i]=s;return[r]}}(this))},e}(i),e.exports=new n,e.exports.PixelJpeg=n},{"jpeg-js":60,"pixel-util":70}],60:[function(t,e,r){var n=t("./lib/encoder"),i=t("./lib/decoder");e.exports={encode:n,decode:i}},{"./lib/decoder":61,"./lib/encoder":62}],61:[function(t,e,r){(function(t){function r(e){var r=new Uint8Array(e),i=new n;i.parse(r);var o={width:i.width,height:i.height,data:new t(i.width*i.height*4)};return i.copyToImageData(o),o}var n=function(){"use strict";function t(){}function e(t,e){for(var r,n,i=0,o=[],s=16;s>0&&!t[s-1];)s--;o.push({children:[],index:0});var a,c=o[0];for(r=0;s>r;r++){for(n=0;n<t[r];n++){for(c=o.pop(),c.children[c.index]=e[i];c.index>0;)c=o.pop();for(c.index++,o.push(c);o.length<=r;)o.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;i++}s>r+1&&(o.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return o[0].children}function r(t,e,r,n,i,s,a,c,l){function u(){if(P>0)return P--,C>>P&1;if(C=t[e++],255==C){var r=t[e++];if(r)throw"unexpected marker: "+(C<<8|r).toString(16)}return P=7,C>>>7}function p(t){for(var e,r=t;null!==(e=u());){if(r=r[e],"number"==typeof r)return r;if("object"!=typeof r)throw"invalid huffman sequence"}return null}function h(t){for(var e=0;t>0;){var r=u();if(null===r)return;e=e<<1|r,t--}return e}function f(t){var e=h(t);return e>=1<<t-1?e:e+(-1<<t)+1}function d(t,e){var r=p(t.huffmanTableDC),n=0===r?0:f(r);e[0]=t.pred+=n;for(var i=1;64>i;){var s=p(t.huffmanTableAC),a=15&s,c=s>>4;if(0!==a){i+=c;var l=o[i];e[l]=f(a),i++}else{if(15>c)break;i+=16}}}function _(t,e){var r=p(t.huffmanTableDC),n=0===r?0:f(r)<<l;e[0]=t.pred+=n}function v(t,e){e[0]|=u()<<l}function m(t,e){if(L>0)return void L--;for(var r=s,n=a;n>=r;){var i=p(t.huffmanTableAC),c=15&i,u=i>>4;if(0!==c){r+=u;var d=o[r];e[d]=f(c)*(1<<l),r++}else{if(15>u){L=h(u)+(1<<u)-1;break}r+=16}}}function g(t,e){for(var r=s,n=a,i=0;n>=r;){var c=o[r];switch(I){case 0:var d=p(t.huffmanTableAC),_=15&d,i=d>>4;if(0===_)15>i?(L=h(i)+(1<<i),I=4):(i=16,I=1);else{if(1!==_)throw"invalid ACn encoding";w=f(_),I=i?2:3}continue;case 1:case 2:e[c]?e[c]+=u()<<l:(i--,0===i&&(I=2==I?3:0));break;case 3:e[c]?e[c]+=u()<<l:(e[c]=w<<l,I=0);break;case 4:e[c]&&(e[c]+=u()<<l)}r++}4===I&&(L--,0===L&&(I=0))}function y(t,e,r,n,i){var o=r/S|0,s=r%S,a=o*t.v+n,c=s*t.h+i;e(t,t.blocks[a][c])}function b(t,e,r){var n=r/t.blocksPerLine|0,i=r%t.blocksPerLine;e(t,t.blocks[n][i])}var w,x,j,k,E,A,T,S=(r.precision,r.samplesPerLine,r.scanLines,r.mcusPerLine),F=r.progressive,R=(r.maxH,r.maxV,e),C=0,P=0,L=0,I=0,O=n.length;T=F?0===s?0===c?_:v:0===c?m:g:d;var U,D,B=0;D=1==O?n[0].blocksPerLine*n[0].blocksPerColumn:S*r.mcusPerColumn,i||(i=D);for(var z,M;D>B;){for(j=0;O>j;j++)n[j].pred=0;if(L=0,1==O)for(x=n[0],A=0;i>A;A++)b(x,T,B),B++;else for(A=0;i>A;A++){for(j=0;O>j;j++)for(x=n[j],z=x.h,M=x.v,k=0;M>k;k++)for(E=0;z>E;E++)y(x,T,B,k,E);if(B++,B===D)break}if(P=0,U=t[e]<<8|t[e+1],65280>U)throw"marker was not found";if(!(U>=65488&&65495>=U))break;e+=2}return e-R}function n(t,e){function r(t,r,n){var i,o,d,_,v,m,g,y,b,w,x=e.quantizationTable,j=n;for(w=0;64>w;w++)j[w]=t[w]*x[w];for(w=0;8>w;++w){var k=8*w;0!=j[1+k]||0!=j[2+k]||0!=j[3+k]||0!=j[4+k]||0!=j[5+k]||0!=j[6+k]||0!=j[7+k]?(i=h*j[0+k]+128>>8,o=h*j[4+k]+128>>8,d=j[2+k],_=j[6+k],v=f*(j[1+k]-j[7+k])+128>>8,y=f*(j[1+k]+j[7+k])+128>>8,m=j[3+k]<<4,g=j[5+k]<<4,b=i-o+1>>1,i=i+o+1>>1,o=b,b=d*p+_*u+128>>8,d=d*u-_*p+128>>8,_=b,b=v-g+1>>1,v=v+g+1>>1,g=b,b=y+m+1>>1,m=y-m+1>>1,y=b,b=i-_+1>>1,i=i+_+1>>1,_=b,b=o-d+1>>1,o=o+d+1>>1,d=b,b=v*l+y*c+2048>>12,v=v*c-y*l+2048>>12,y=b,b=m*a+g*s+2048>>12,m=m*s-g*a+2048>>12,g=b,j[0+k]=i+y,j[7+k]=i-y,j[1+k]=o+g,j[6+k]=o-g,j[2+k]=d+m,j[5+k]=d-m,j[3+k]=_+v,j[4+k]=_-v):(b=h*j[0+k]+512>>10,j[0+k]=b,j[1+k]=b,j[2+k]=b,j[3+k]=b,j[4+k]=b,j[5+k]=b,j[6+k]=b,j[7+k]=b)}for(w=0;8>w;++w){var E=w;0!=j[8+E]||0!=j[16+E]||0!=j[24+E]||0!=j[32+E]||0!=j[40+E]||0!=j[48+E]||0!=j[56+E]?(i=h*j[0+E]+2048>>12,o=h*j[32+E]+2048>>12,d=j[16+E],_=j[48+E],v=f*(j[8+E]-j[56+E])+2048>>12,y=f*(j[8+E]+j[56+E])+2048>>12,m=j[24+E],g=j[40+E],b=i-o+1>>1,i=i+o+1>>1,o=b,b=d*p+_*u+2048>>12,d=d*u-_*p+2048>>12,_=b,b=v-g+1>>1,v=v+g+1>>1,g=b,b=y+m+1>>1,m=y-m+1>>1,y=b,b=i-_+1>>1,i=i+_+1>>1,_=b,b=o-d+1>>1,o=o+d+1>>1,d=b,b=v*l+y*c+2048>>12,v=v*c-y*l+2048>>12,y=b,b=m*a+g*s+2048>>12,m=m*s-g*a+2048>>12,g=b,j[0+E]=i+y,j[56+E]=i-y,j[8+E]=o+g,j[48+E]=o-g,j[16+E]=d+m,j[40+E]=d-m,j[24+E]=_+v,j[32+E]=_-v):(b=h*n[w+0]+8192>>14,j[0+E]=b,j[8+E]=b,j[16+E]=b,j[24+E]=b,j[32+E]=b,j[40+E]=b,j[48+E]=b,j[56+E]=b)}for(w=0;64>w;++w){var A=128+(j[w]+8>>4);r[w]=0>A?0:A>255?255:A}}for(var n,i,o=[],d=e.blocksPerLine,_=e.blocksPerColumn,v=d<<3,m=new Int32Array(64),g=new Uint8Array(64),y=0;_>y;y++){var b=y<<3;for(n=0;8>n;n++)o.push(new Uint8Array(v));for(var w=0;d>w;w++){r(e.blocks[y][w],g,m);var x=0,j=w<<3;for(i=0;8>i;i++){var k=o[b+i];for(n=0;8>n;n++)k[j+n]=g[x++]}}}return o}function i(t){return 0>t?0:t>255?255:t}var o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),s=4017,a=799,c=3406,l=2276,u=1567,p=3784,h=5793,f=2896;return t.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(t){function i(){var e=t[u]<<8|t[u+1];return u+=2,e}function s(){var e=i(),r=t.subarray(u,u+e-2);return u+=r.length,r}function a(t){var e,r,n=0,i=0;for(r in t.components)t.components.hasOwnProperty(r)&&(e=t.components[r],n<e.h&&(n=e.h),i<e.v&&(i=e.v));var o=Math.ceil(t.samplesPerLine/8/n),s=Math.ceil(t.scanLines/8/i);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];for(var a=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/n),c=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),l=o*e.h,u=s*e.v,p=[],h=0;u>h;h++){for(var f=[],d=0;l>d;d++)f.push(new Int32Array(64));p.push(f)}e.blocksPerLine=a,e.blocksPerColumn=c,e.blocks=p}t.maxH=n,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=s}var c,l,u=0,p=(t.length,null),h=null,f=[],d=[],_=[],v=[],m=i();if(65496!=m)throw"SOI not found";for(m=i();65497!=m;){var g,y;switch(m){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=s();65504===m&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(p={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),65518===m&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&0===b[5]&&(h={version:b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:for(var w=i(),x=w+u-2;x>u;){var j=t[u++],k=new Int32Array(64);if(j>>4===0)for(y=0;64>y;y++){var E=o[y];k[E]=t[u++]}else{if(j>>4!==1)throw"DQT: invalid table spec";for(y=0;64>y;y++){var E=o[y];k[E]=i()}}f[15&j]=k}break;case 65472:case 65473:case 65474:i(),c={},c.extended=65473===m,c.progressive=65474===m,c.precision=t[u++],c.scanLines=i(),c.samplesPerLine=i(),c.components={},c.componentsOrder=[];var A,T=t[u++];for(g=0;T>g;g++){A=t[u];var S=t[u+1]>>4,F=15&t[u+1],R=t[u+2];c.componentsOrder.push(A),c.components[A]={h:S,v:F,quantizationIdx:R},u+=3}a(c),d.push(c);break;case 65476:var C=i();for(g=2;C>g;){var P=t[u++],L=new Uint8Array(16),I=0;for(y=0;16>y;y++,u++)I+=L[y]=t[u];var O=new Uint8Array(I);for(y=0;I>y;y++,u++)O[y]=t[u];g+=17+I,(P>>4===0?v:_)[15&P]=e(L,O)}break;case 65501:i(),l=i();break;case 65498:var U,D=(i(),t[u++]),B=[];for(g=0;D>g;g++){U=c.components[t[u++]];var z=t[u++];U.huffmanTableDC=v[z>>4],U.huffmanTableAC=_[15&z],B.push(U)}var M=t[u++],N=t[u++],H=t[u++],V=r(t,u,c,B,l,M,N,H>>4,15&H);u+=V;break;default:if(255==t[u-3]&&t[u-2]>=192&&t[u-2]<=254){u-=3;break}throw"unknown JPEG marker "+m.toString(16)}m=i()}if(1!=d.length)throw"only single frame JPEGs supported";for(var g=0;g<d.length;g++){var q=d[g].components;for(var y in q)q[y].quantizationTable=f[q[y].quantizationIdx],delete q[y].quantizationIdx}this.width=c.samplesPerLine,this.height=c.scanLines,this.jfif=p,this.adobe=h,this.components=[];for(var g=0;g<c.componentsOrder.length;g++){var U=c.components[c.componentsOrder[g]];this.components.push({lines:n(c,U),scaleX:U.h/c.maxH,scaleY:U.v/c.maxV})}},getData:function(t,e){var r,n,o,s,a,c,l,u,p,h,f,d,_,v,m,g,y,b,w,x,j,k=this.width/t,E=this.height/e,A=0,T=t*e*this.components.length,S=new Uint8Array(T);switch(this.components.length){case 1:for(r=this.components[0],h=0;e>h;h++)for(a=r.lines[0|h*r.scaleY*E],p=0;t>p;p++)f=a[0|p*r.scaleX*k],S[A++]=f;break;case 2:for(r=this.components[0],n=this.components[1],h=0;e>h;h++)for(a=r.lines[0|h*r.scaleY*E],c=n.lines[0|h*n.scaleY*E],p=0;t>p;p++)f=a[0|p*r.scaleX*k],S[A++]=f,f=c[0|p*n.scaleX*k],S[A++]=f;break;case 3:for(j=!0,this.adobe&&this.adobe.transformCode?j=!0:"undefined"!=typeof this.colorTransform&&(j=!!this.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],h=0;e>h;h++)for(a=r.lines[0|h*r.scaleY*E],c=n.lines[0|h*n.scaleY*E],l=o.lines[0|h*o.scaleY*E],p=0;t>p;p++)j?(f=a[0|p*r.scaleX*k],d=c[0|p*n.scaleX*k],_=l[0|p*o.scaleX*k],b=i(f+1.402*(_-128)),w=i(f-.3441363*(d-128)-.71413636*(_-128)),x=i(f+1.772*(d-128))):(b=a[0|p*r.scaleX*k],w=c[0|p*n.scaleX*k],x=l[0|p*o.scaleX*k]),S[A++]=b,S[A++]=w,S[A++]=x;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(j=!1,this.adobe&&this.adobe.transformCode?j=!0:"undefined"!=typeof this.colorTransform&&(j=!!this.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],s=this.components[3],h=0;e>h;h++)for(a=r.lines[0|h*r.scaleY*E],c=n.lines[0|h*n.scaleY*E],l=o.lines[0|h*o.scaleY*E],u=s.lines[0|h*s.scaleY*E],p=0;t>p;p++)j?(f=a[0|p*r.scaleX*k],d=c[0|p*n.scaleX*k],_=l[0|p*o.scaleX*k],v=u[0|p*s.scaleX*k],m=255-i(f+1.402*(_-128)),g=255-i(f-.3441363*(d-128)-.71413636*(_-128)),y=255-i(f+1.772*(d-128))):(m=a[0|p*r.scaleX*k],g=c[0|p*n.scaleX*k],y=l[0|p*o.scaleX*k],v=u[0|p*s.scaleX*k]),S[A++]=m,S[A++]=g,S[A++]=y,S[A++]=v;break;default:throw"Unsupported color mode"}return S},copyToImageData:function(t){var e,r,n,o,s,a,c,l,u,p=t.width,h=t.height,f=t.data,d=this.getData(p,h),_=0,v=0;switch(this.components.length){case 1:for(r=0;h>r;r++)for(e=0;p>e;e++)n=d[_++],f[v++]=n,f[v++]=n,f[v++]=n,f[v++]=255;break;case 3:for(r=0;h>r;r++)for(e=0;p>e;e++)c=d[_++],l=d[_++],u=d[_++],f[v++]=c,f[v++]=l,f[v++]=u,f[v++]=255;break;case 4:for(r=0;h>r;r++)for(e=0;p>e;e++)s=d[_++],a=d[_++],n=d[_++],o=d[_++],c=255-i(s*(1-o/255)+o),l=255-i(a*(1-o/255)+o),u=255-i(n*(1-o/255)+o),f[v++]=c,f[v++]=l,f[v++]=u,f[v++]=255;break;default:throw"Unsupported color mode"}}},t}();e.exports=r}).call(this,t("buffer").Buffer)},{buffer:17}],62:[function(t,e,r){(function(t){function r(e){function r(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;64>r;r++){var n=E((e[r]*t+50)/100);1>n?n=1:n>255&&(n=255),A[H[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;64>o;o++){var s=E((i[o]*t+50)/100);1>s?s=1:s>255&&(s=255),T[H[o]]=s}for(var a=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],c=0,l=0;8>l;l++)for(var u=0;8>u;u++)S[c]=1/(A[H[c]]*a[l]*a[u]*8),F[c]=1/(T[H[c]]*a[l]*a[u]*8),c++}function n(t,e){for(var r=0,n=0,i=new Array,o=1;16>=o;o++){for(var s=1;s<=t[o];s++)i[e[n]]=[],i[e[n]][0]=r,i[e[n]][1]=o,n++,r++;r*=2}return i}function i(){b=n(V,q),w=n(W,$),x=n(Z,Q),j=n(J,Y)}function o(){for(var t=1,e=2,r=1;15>=r;r++){for(var n=t;e>n;n++)C[32767+n]=r,R[32767+n]=[],R[32767+n][1]=r,R[32767+n][0]=n;for(var i=-(e-1);-t>=i;i++)C[32767+i]=r,R[32767+i]=[],R[32767+i][1]=r,R[32767+i][0]=e-1+i;t<<=1,e<<=1}}function s(){for(var t=0;256>t;t++)N[t]=19595*t,N[t+256>>0]=38470*t,N[t+512>>0]=7471*t+32768,N[t+768>>0]=-11059*t,N[t+1024>>0]=-21709*t,N[t+1280>>0]=32768*t+8421375,N[t+1536>>0]=-27439*t,N[t+1792>>0]=-5329*t}function a(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(O|=1<<U),r--,U--,0>U&&(255==O?(c(255),c(0)):c(O),U=7,O=0)}function c(t){I.push(t)}function l(t){c(t>>8&255),c(255&t)}function u(t,e){var r,n,i,o,s,a,c,l,u,p=0,h=8,f=64;for(u=0;h>u;++u){r=t[p],n=t[p+1],i=t[p+2],o=t[p+3],s=t[p+4],a=t[p+5],c=t[p+6],l=t[p+7];var d=r+l,_=r-l,v=n+c,m=n-c,g=i+a,y=i-a,b=o+s,w=o-s,x=d+b,j=d-b,k=v+g,E=v-g;t[p]=x+k,t[p+4]=x-k;var A=.707106781*(E+j);t[p+2]=j+A,t[p+6]=j-A,x=w+y,k=y+m,E=m+_;var T=.382683433*(x-E),S=.5411961*x+T,F=1.306562965*E+T,R=.707106781*k,C=_+R,L=_-R;t[p+5]=L+S,t[p+3]=L-S,t[p+1]=C+F,t[p+7]=C-F,p+=8}for(p=0,u=0;h>u;++u){r=t[p],n=t[p+8],i=t[p+16],o=t[p+24],s=t[p+32],a=t[p+40],c=t[p+48],l=t[p+56];var I=r+l,O=r-l,U=n+c,D=n-c,B=i+a,z=i-a,M=o+s,N=o-s,H=I+M,V=I-M,q=U+B,Z=U-B;t[p]=H+q,t[p+32]=H-q;var Q=.707106781*(Z+V);t[p+16]=V+Q,t[p+48]=V-Q,H=N+z,q=z+D,Z=D+O;var W=.382683433*(H-Z),$=.5411961*H+W,J=1.306562965*Z+W,Y=.707106781*q,G=O+Y,X=O-Y;t[p+40]=X+$,t[p+24]=X-$,t[p+8]=G+J,t[p+56]=G-J,p++}var K;for(u=0;f>u;++u)K=t[u]*e[u],P[u]=K>0?K+.5|0:K-.5|0;return P}function p(){l(65504),l(16),c(74),c(70),c(73),c(70),c(0),c(1),c(1),c(0),l(1),l(1),c(0),c(0)}function h(t,e){l(65472),l(17),c(8),l(e),l(t),c(3),c(1),c(17),c(0),c(2),c(17),c(1),c(3),c(17),c(1)}function f(){l(65499),l(132),c(0);for(var t=0;64>t;t++)c(A[t]);c(1);for(var e=0;64>e;e++)c(T[e])}function d(){l(65476),l(418),c(0);for(var t=0;16>t;t++)c(V[t+1]);for(var e=0;11>=e;e++)c(q[e]);c(16);for(var r=0;16>r;r++)c(Z[r+1]);for(var n=0;161>=n;n++)c(Q[n]);c(1);for(var i=0;16>i;i++)c(W[i+1]);for(var o=0;11>=o;o++)c($[o]);c(17);for(var s=0;16>s;s++)c(J[s+1]);for(var a=0;161>=a;a++)c(Y[a])}function _(){l(65498),l(12),c(3),c(1),c(0),c(2),c(17),c(3),c(17),c(0),c(63),c(0)}function v(t,e,r,n,i){for(var o,s=i[0],c=i[240],l=16,p=63,h=64,f=u(t,e),d=0;h>d;++d)L[H[d]]=f[d];var _=L[0]-r;r=L[0],0==_?a(n[0]):(o=32767+_,a(n[C[o]]),a(R[o]));for(var v=63;v>0&&0==L[v];v--);if(0==v)return a(s),r;for(var m,g=1;v>=g;){for(var y=g;0==L[g]&&v>=g;++g);var b=g-y;if(b>=l){m=b>>4;for(var w=1;m>=w;++w)a(c);b=15&b}o=32767+L[g],a(i[(b<<4)+C[o]]),a(R[o]),g++}return v!=p&&a(s),r}function m(){for(var t=String.fromCharCode,e=0;256>e;e++)M[e]=t(e)}function g(t){if(0>=t&&(t=1),t>100&&(t=100),k!=t){var e=0;e=50>t?Math.floor(5e3/t):Math.floor(200-2*t),r(e),k=t}}function y(){var t=(new Date).getTime();e||(e=50),m(),i(),o(),s(),g(e);(new Date).getTime()-t}var b,w,x,j,k,E=(Math.round,Math.floor),A=new Array(64),T=new Array(64),S=new Array(64),F=new Array(64),R=new Array(65535),C=new Array(65535),P=new Array(64),L=new Array(64),I=[],O=0,U=7,D=new Array(64),B=new Array(64),z=new Array(64),M=new Array(256),N=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,r){(new Date).getTime();r&&g(r),I=new Array,O=0,U=7,l(65496),p(),f(),h(e.width,e.height),d(),_();var n=0,i=0,o=0;O=0,U=7,this.encode.displayName="_encode_";for(var s,c,u,m,y,k,E,A,T,R=e.data,C=e.width,P=e.height,L=4*C,M=0;P>M;){for(s=0;L>s;){for(y=L*M+s,k=y,E=-1,A=0,T=0;64>T;T++)A=T>>3,E=4*(7&T),k=y+A*L+E,M+A>=P&&(k-=L*(M+1+A-P)),s+E>=L&&(k-=s+E-L+4),c=R[k++],u=R[k++],m=R[k++],D[T]=(N[c]+N[u+256>>0]+N[m+512>>0]>>16)-128,B[T]=(N[c+768>>0]+N[u+1024>>0]+N[m+1280>>0]>>16)-128,z[T]=(N[c+1280>>0]+N[u+1536>>0]+N[m+1792>>0]>>16)-128;n=v(D,S,n,b,x),i=v(B,F,i,w,j),o=v(z,F,o,w,j),s+=32}M+=8}if(U>=0){var H=[];H[1]=U+1,H[0]=(1<<U+1)-1,a(H)}return l(65497),new t(I)},y()}function n(t,e){"undefined"==typeof e&&(e=50);var n=new r(e),i=n.encode(t,e);return{data:i,width:t.width,height:t.height}}e.exports=n}).call(this,t("buffer").Buffer)},{buffer:17}],63:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-png/index.js")},{"./lib":64,"./src":3}],64:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t("pixel-util").PixelUtil,o=t("apng-canvas-parser"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.parse=function(t){return this.createBuffer(t).then(function(t){return o(t)}).then(function(t){return null==t.numPlays&&(t.numPlays=-1),t})},e}(i),e.exports=new n,e.exports.PixelPng=n},{"apng-canvas-parser":69,"pixel-util":70}],65:[function(e,r,n){(function(e,i){!function(e){if("object"==typeof n&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=e()}}(function(){var t,r,n;return function o(t,e,r){function n(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,o,t,e,r)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function i(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._lateQueue.push(t,e,r),this._queueTick()}function o(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.push(t,e,r),this._queueTick()}function s(t){var e=this._getDomain();if(void 0!==e){var r=e.bind(t._settlePromises);this._normalQueue.push(r,t,void 0)}else this._normalQueue._pushOne(t);this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=t("./schedule.js"),u=t("./queue.js"),p=t("./util.js");n.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(t,e){1===arguments.length&&(e=t,t=function(){throw e});var r=this._getDomain();if(void 0!==r&&(t=r.bind(t)),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){
t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},n.prototype._getDomain=function(){};p.hasDevTools?(l.isStatic&&(l=function(t){setTimeout(t,0)}),n.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?i.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},n.prototype.invoke=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},n.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=o,n.prototype.settlePromises=s),n.prototype.invokeFirst=function(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=a},{"./queue.js":28,"./schedule.js":31,"./util.js":38,events:39}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},o=function(t,e){this._setBoundTo(t),this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var a=r(n),c=new t(e);c._propagateFrom(this,1);var l=this._target();if(a instanceof t){var u={promiseRejectionQueued:!1,promise:c,target:l,bindingPromise:a};l._then(e,i,c._progress,c,u),a._then(o,s,c._progress,c,u)}else c._setBoundTo(n),c._resolveCallback(l);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(n,i){var o=r(n),s=new t(e);return o instanceof t?o._then(function(t){s._setBoundTo(t),s._resolveCallback(i)},s._reject,s._progress,s,null):(s._setBoundTo(n),s._resolveCallback(i)),s}}},{}],4:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=n,e.exports=o},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+a.classString(t)+" has no method '"+a.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){var e=this.pop(),n=r(t,e);return n.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util.js"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;++i)r[i-1]=arguments[i];return r.push(t),this._then(n,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=o;else if(c){var n=s(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),i=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(t,r,n){"use strict";r.exports=function(){function r(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);w(this,r),e>32&&this.uncycle()}function n(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=n[a];if(e[i]!==c)break;e.pop(),i--}e=n}}function s(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=_.test(n)||"    (No stack trace)"===n,o=i&&g(n);i&&!o&&(m&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||_.test(n))break}return r>0&&(e=e.slice(r)),e}function c(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+l(e)+">, no stack trace)"}function l(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function u(t){var e=t.match(y);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var p,h=t("./async.js"),f=t("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,_=null,v=null,m=!1;f.inherits(r,Error),r.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=r[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var c=n>0?e[n-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=n-2;u>=0;--u)e[u]._length=l,l++;return}}}},r.prototype.parent=function(){return this._parent},r.prototype.hasParent=function(){return void 0!==this._parent},r.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=r.parseStackAndMessage(t),a=e.message,c=[e.stack],l=this;void 0!==l;)c.push(s(l.stack.split("\n"))),l=l._parent;o(c),i(c),f.notEnumerableProp(t,"stack",n(a,c)),f.notEnumerableProp(t,"__stackCleaned__",!0)}},r.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:r,stack:s(e)}},r.formatAndLogError=function(t,e){if("undefined"!=typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+v(n,t)}else r=e+String(t);"function"==typeof p?p(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},r.unhandledRejection=function(t){r.formatAndLogError(t,"^--- With additional stack trace: ")},r.isSupported=function(){return"function"==typeof w},r.fireRejectionEvent=function(t,e,n,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(s){h.throwLater(s)}var a=!1;try{a=x(t,n,i)}catch(s){a=!0,h.throwLater(s)}var c=!1;if(b)try{c=b(t.toLowerCase(),{reason:n,promise:i})}catch(s){c=!0,h.throwLater(s)}a||o||c||"unhandledRejection"!==t||r.formatAndLogError(n,"Unhandled rejection ")};var g=function(){return!1},y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;r.setBounds=function(t,e){if(r.isSupported()){for(var n,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,c=-1,l=0;l<o.length;++l){var p=u(o[l]);if(p){n=p.fileName,a=p.line;break}}for(var l=0;l<s.length;++l){var p=u(s[l]);if(p){i=p.fileName,c=p.line;break}}0>a||0>c||!n||!i||n!==i||a>=c||(g=function(t){if(d.test(t))return!0;var e=u(t);return e&&e.fileName===n&&a<=e.line&&e.line<=c?!0:!1})}};var b,w=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():c(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,_=t,v=e;var r=Error.captureStackTrace;return g=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,v=e,m=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in n||!i?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?c(e):e.toString()},null):(_=t,v=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),x=function(){if(f.isNode)return function(t,r,n){return"rejectionHandled"===t?e.emit(t,n):e.emit(t,r,n)};var t=!1,r=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(i){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){r=!1}r&&(b=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!0,r)),n?!self.dispatchEvent(n):!1});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=s[t],i=self[n];return i?("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(p=function(t){console.warn(t)},f.isNode&&e.stderr.isTTY?p=function(t){e.stderr.write("[31m"+t+"[39m\n")}:f.isNode||"string"!=typeof(new Error).stack||(p=function(t){console.warn("%c"+t,"color: red")})),r}},{"./async.js":2,"./util.js":38}],8:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t).call(r,e);if(n===a)return n;var i=c(r);return i.length?(a.e=new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,c=t("./es5.js").keys,l=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,i=this._promise,o=i._boundTo,c=0,l=this._instances.length;l>c;++c){var u=this._instances[c],p=u===Error||null!=u&&u.prototype instanceof Error;if(p&&t instanceof u){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}if("function"==typeof u&&!p){var f=n(u,t);if(f===a){t=a.e;break}if(f){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){this._trace=new e(o())}function i(){return r()?new n:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&s.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,i}},{}],10:[function(t,r,n){"use strict";r.exports=function(r,n){var i,o,s=t("./async.js"),a=t("./errors.js").Warning,c=t("./util.js"),l=c.canAttachTrace,u=!1||c.isNode&&(!!e.env.BLUEBIRD_DEBUG||"development"===e.env.NODE_ENV);return u&&s.disableTrampolineIfNecessary(),r.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},r.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",i,void 0,this)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",o,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},r.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},r.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},r.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},r.prototype._captureStackTrace=function(){return u&&(this._trace=new n(this._peekContext())),this},r.prototype._attachExtraTrace=function(t,e){if(u&&l(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=n.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},r.prototype._warn=function(t){var e=new a(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var i=n.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(e,"")},r.onPossiblyUnhandledRejection=function(t){o="function"==typeof t?t:void 0},r.onUnhandledRejectionHandled=function(t){i="function"==typeof t?t:void 0},r.longStackTraces=function(){if(s.haveItemsQueued()&&u===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");u=n.isSupported(),u&&s.disableTrampolineIfNecessary()},r.hasLongStackTraces=function(){return u&&n.isSupported()},n.isSupported()||(r.longStackTraces=function(){},u=!1),function(){return u}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var n=t("./util.js"),i=n.isPrimitive,o=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},n=function(){},s=function(){throw void 0},a=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return void 0===t?this.then(n):o&&i(t)?this._then(a(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return void 0===t?this.then(s):o&&i(t)?this._then(a(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],13:[function(t,e,r){"use strict";function n(t,e){function r(n){return this instanceof r?(p(this,"message","string"==typeof n?n:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return u(r,Error),r}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js"),c=a.freeze,l=t("./util.js"),u=l.inherits,p=l.notEnumerableProp,h=n("Warning","warning"),f=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(_.prototype[m[g]]=Array.prototype[m[g]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return y--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),p(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var n;return n=h&&f(e)?r?s(e):a(e):r?i:o,t._then(n,d,void 0,e,void 0)}function l(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=n(s,i);if(a instanceof e)return a=a._target(),c(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function u(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo,t):i(t);if(void 0!==o){var s=n(o,r);if(s instanceof e)return s=s._target(),c(s,t,!0)}return t}var p=t("./util.js"),h=p.wrapsPrimitiveReceiver,f=p.isPrimitive,d=p.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?l:u,e?l:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=p(r[o])(t);if(n._popContext(),s===u){n._pushContext();var a=e.reject(u.e);return n._popContext(),a}var c=i(s,n);if(c instanceof e)return c}return null}function s(t,r,i,o){var s=this._promise=new e(n);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var a=t("./errors.js"),c=a.TypeError,l=t("./util.js"),u=l.errorObj,p=l.tryCatch,h=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===u)return this._promise._rejectCallback(t.e,!1,!0);var r=t.value;if(t.done===!0)this._promise._resolveCallback(r);else{var n=i(r,this._promise);if(!(n instanceof e)&&(n=o(n,this._yieldHandlers,this._promise),null===n))return void this._throw(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(t)},e.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var n=new r(o).promise();return void 0!==t?n.spread(t):n}}},{"./util.js":38}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:d,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function c(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj,f={},d=[];u.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===f){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,l=this._promise._boundTo;this._promise._pushContext();var u=p(c).call(l,t,r,o);if(this._promise._popContext(),u===h)return this._reject(u.e);var d=i(u,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,n[r]=f,d._proxyPromiseArray(this,r);if(!d._isFulfilled())return this._reject(d._reason());u=d._value()}n[r]=u}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;r>o;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(t,e,r,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},e.attempt=e["try"]=function(t,n,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var c=new e(r);c._captureStackTrace(),c._pushContext();var l=o.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return c._popContext(),c._resolveFromSyncValue(l),c},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=a(e).apply(r._boundTo,[null].concat(t));i===c&&s.throwLater(i.e)}function n(t,e){var r=this,n=r._boundTo,i=void 0===t?a(e).call(n,null):a(e).call(n,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=r._target(),i=n._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(r._boundTo,t);o===c&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,a=t.promise,c=t.receiver,l=o(i).call(c,r);if(l===s){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var u=n.canAttachTrace(l.e)?l.e:new Error(n.toString(l.e));a._attachExtraTrace(u),a._progress(l.e)}}else l instanceof e?l._then(a._progress,null,null,a,void 0):a._progress(l)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):i.invoke(o,c,t);else{var l=this._receiverAt(s);"function"==typeof a?a.call(l,t,c):l instanceof r&&!l._isResolved()&&l._promiseProgressed(t,c)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e,r){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==u&&this._resolveFromResolver(t)}function r(t){var r=new e(u);r._fulfillmentHandler0=t,r._rejectionHandler0=t,r._progressHandler0=t,r._promise0=t,r._receiver0=t,r._settledValue=t}var n=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new e.PromiseInspection(this._target())},o=function(t){return e.reject(new l(t))},s=t("./util.js"),a=t("./async.js"),c=t("./errors.js"),l=e.TypeError=c.TypeError;e.RangeError=c.RangeError,e.CancellationError=c.CancellationError,e.TimeoutError=c.TimeoutError,e.OperationalError=c.OperationalError,e.RejectionError=c.OperationalError,e.AggregateError=c.AggregateError;var u=function(){},p={},h={e:null},f=t("./thenables.js")(e,u),d=t("./promise_array.js")(e,u,f,o),_=t("./captured_trace.js")(),v=t("./debuggability.js")(e,_),m=t("./context.js")(e,_,v),g=t("./catch_filter.js")(h),y=t("./promise_resolver.js"),b=y._nodebackForPromise,w=s.errorObj,x=s.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var n,i=new Array(r-1),o=0;for(n=0;r-1>n;++n){var s=arguments[n];if("function"!=typeof s)return e.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[n];var a=new g(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},e.prototype.then=function(t,e,r){if(v()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(n+=", "+s.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);n._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,p,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new d(this).promise()},e.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var r=new e(u),n=x(t)(b(r));return n===w&&r._rejectCallback(n.e,!0,!0),r},e.all=function(t){return new d(t).promise()},e.defer=e.pending=function(){var t=new e(u);return new y(t)},e.cast=function(t){var r=f(t);if(!(r instanceof e)){var n=r;r=new e(u),r._fulfillUnchecked(n)}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(u);return r._captureStackTrace(),r._rejectCallback(t,!0),r},e.setScheduler=function(t){if("function"!=typeof t)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},e.prototype._then=function(t,r,n,i,o){var s=void 0!==o,c=s?o:new e(u);s||(c._propagateFrom(this,5),c._captureStackTrace());var l=this._target();l!==this&&(void 0===i&&(i=this._boundTo),s||c._setIsMigrated());var p=l._addCallbacks(t,r,n,c,i);return l._isResolved()&&!l._isSettlePromisesQueued()&&a.invoke(l._settlePromiseAtPostResolution,l,p),c},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){
this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r){var n=t._fulfillmentHandlerAt(r),i=t._rejectionHandlerAt(r),o=t._progressHandlerAt(r),s=t._promiseAt(r),a=t._receiverAt(r);s instanceof e&&s._setIsMigrated(),this._addCallbacks(n,i,o,s,a)},e.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=n,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,r){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(n(),!1,!0);var i=f(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(r?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),c=0;a>c;++c)s._migrateCallbacks(this,c);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,r){r||s.markAsOriginatingFromRejection(t);var n=s.ensureErrorObject(t),i=n===t;this._attachExtraTrace(n,e?i:!1),this._reject(t,i?void 0:n)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=x(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===w&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,r,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==p||this._isRejected()?x(t).call(e,r):x(t).apply(this._boundTo,r),i._popContext(),o===w||o===i||o===h){var s=o===i?n():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),n=r instanceof e;if(n&&r._isMigrated())return r._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,c=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?n?this._settlePromiseFromHandler(i,c,s,r):i.call(c,s,r):c instanceof d?c._isResolved()||(this._isFulfilled()?c._promiseFulfilled(s,r):c._promiseRejected(s,r)):n&&(this._isFulfilled()?r._fulfill(s):r._reject(s,o)),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=n();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var r=n();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(_.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=n,t("./progress.js")(e,d),t("./method.js")(e,u,f,o),t("./bind.js")(e,u,f),t("./finally.js")(e,h,f),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,d,f,u),e.Promise=e,t("./map.js")(e,d,o,f,u),t("./cancel.js")(e),t("./using.js")(e,o,f,m),t("./generators.js")(e,o,u,f),t("./nodeify.js")(e),t("./call_get.js")(e),t("./props.js")(e,d,f,o),t("./race.js")(e,u,f,o),t("./reduce.js")(e,d,o,f,u),t("./settle.js")(e,d),t("./some.js")(e,d,o),t("./promisify.js")(e,u),t("./any.js")(e),t("./each.js")(e,u),t("./timers.js")(e,u),t("./filter.js")(e,u),s.toFastProperties(e),s.toFastProperties(e.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new e(u)),_.setBounds(a.firstLineError,s.lastLineError),e}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),c=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,r){var s=n(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(l,this._reject,void 0,this,r):void this._reject(s._reason());if(s=s._value(),!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!c(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(-5===r?this._resolveEmptyArray():this._resolve(o(r)));var u=this.getActualLength(s.length);this._length=u,this._values=this.shouldCopyValues()?new Array(u):this._values;for(var p=this._promise,h=0;u>h;++h){var f=this._isResolved(),d=n(s[h],p);d instanceof e?(d=d._target(),f?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,h):d._isFulfilled()?this._promiseFulfilled(d._value(),h):this._promiseRejected(d._reason(),h)):f||this._promiseFulfilled(d,h)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new p(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=f.keys(t),i=0;i<r.length;++i){var o=r[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,r){if(null!==t){if(e){var n=i(c(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}}var s,a=t("./util.js"),c=a.maybeWrapAsError,l=t("./errors.js"),u=l.TimeoutError,p=l.OperationalError,h=a.haveGetters,f=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},h){var _={get:function(){return o(this.promise)}};f.defineProperty(s.prototype,"asCallback",_),f.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new u("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!w.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,r){var n=f.getDataPropertyOrDefault(t,e+r,b);return n?i(n):!1}function s(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,r,n){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=n===x?!0:x(u,p,t);"function"!=typeof p||f.isNativeFunctionMethod(p)||i(p)||o(t,u,e)||!n(u,p,t,h)||c.push(u,p)}return s(c,e,r),c}function c(t,n,i,o){function s(){var i=n;n===h&&(i=this);var o=new e(r);o._captureStackTrace();var s="string"==typeof c&&this!==a?this[c]:t,l=d(o);try{s.apply(i,_(arguments,l))}catch(u){o._rejectCallback(v(u),!0,!0)}return o}var a=function(){return this}(),c=t;return"string"==typeof c&&(t=o),f.notEnumerableProp(s,"__isPromisified__",!0),s}function l(t,e,r,n){for(var i=new RegExp(j(e)+"$"),o=a(t,e,i,r),s=0,c=o.length;c>s;s+=2){var l=o[s],u=o[s+1],p=l+e;t[p]=n===k?k(l,h,l,u,e):n(u,function(){return k(l,h,l,u,e)})}return f.toFastProperties(t),t}function u(t,e){return k(t,e,void 0,t)}var p,h={},f=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,_=f.withAppended,v=f.maybeWrapAsError,m=f.canEvaluate,g=t("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=/^(?:length|name|arguments|caller|callee|prototype|__isPromisified__)$/,x=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},k=m?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new g("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var r=u(t,arguments.length<2?h:e);return f.copyDescriptors(t,r,n),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=y);var n=e.filter;"function"!=typeof n&&(n=x);var i=e.promisifier;if("function"!=typeof i&&(i=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=f.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&f.isClass(a)&&(l(a.prototype,r,n,i),l(a,r,n,i))}return l(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var e=l.keys(t),r=e.length,n=new Array(2*r),i=0;r>i;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function s(t){var r,s=n(t);return c(s)?(r=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&r._propagateFrom(s,4),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),c=a.isObject,l=t("./es5.js");a.inherits(o,r),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),o=0,s=this.length();s>o;++o)n[this._values[o+i]]=this._values[o];this._resolve(n)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;i>o;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=i},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var c=n(t);if(c instanceof e)return a(c);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var l=new e(r);void 0!==o&&l._propagateFrom(o,5);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(u,p,void 0,l,null)}return l}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var c=i(n,this._promise),u=!1,p=c instanceof e;p&&(c=c._target(),c._isPending()?c._proxyPromiseArray(this,-1):c._isFulfilled()?(n=c._value(),this._gotAccum=!0):(this._reject(c._reason()),u=!0)),p||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=n,u||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function c(t,e,r,i){if("function"!=typeof e)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,r,i);return o.promise()}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj;u.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,c=null!==a,l=this._gotAccum,u=this._valuesPhase;if(!u)for(u=this._valuesPhase=new Array(s),o=0;s>o;++o)u[o]=0;if(o=u[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=l=!0,u[r]=0===o?1:2):-1===r?(this._accum=t,this._gotAccum=l=!0):0===o?u[r]=1:(u[r]=2,this._accum=t),l){for(var f,d=this._callback,_=this._promise._boundTo,v=this._reducingIndex;s>v;++v)if(o=u[v],2!==o){if(1!==o)return;if(t=n[v],this._promise._pushContext(),c?(a.push(t),f=p(d).call(_,t,v,s)):f=p(d).call(_,this._accum,t,v,s),this._promise._popContext(),f===h)return this._reject(f.e);var m=i(f,this._promise);if(m instanceof e){if(m=m._target(),m._isPending())return u[v]=4,m._proxyPromiseArray(this,v);if(!m._isFulfilled())return this._reject(m._reason());f=m._value()}this._reducingIndex=v+1,this._accum=f}else this._reducingIndex=v+1;this._resolve(c?a:this._accum)}},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,r,n){return c(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(t,r,n){"use strict";var o,s=t("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var c=i.setImmediate,l=e.nextTick;o=s.isRecentNode?function(t){c.call(i,t)}:function(t){l.call(e,t)}}else"undefined"!=typeof MutationObserver?(o=function(t){var e=document.createElement("div"),r=new MutationObserver(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0):o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:a;r.exports=o},{"./util":38}],32:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(n,r),n.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new n(t).promise()},e.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":38}],33:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,c=t("./errors.js").AggregateError,l=s.isArray;s.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new c,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(l(t)){if(t instanceof e)return t;if(o(t)){var u=new e(r);return t._then(u._fulfillUnchecked,u._rejectUncheckedCheckError,u._progressUnchecked,u,null),u}var p=a.tryCatch(i)(t);if(p===c){n&&n._pushContext();var u=e.reject(p.e);return n&&n._popContext(),u}if("function"==typeof p)return s(t,p,n)}return t}function i(t){return t.then}function o(t){return u.call(t,"_promise0")}function s(t,n,i){function o(r){u&&(t===r?u._rejectCallback(e._makeSelfResolutionError(),!1,!0):u._resolveCallback(r),u=null)}function s(t){u&&(u._rejectCallback(t,h,!0),u=null)}function l(t){u&&"function"==typeof u._progress&&u._progress(t)}var u=new e(r),p=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var h=!0,f=a.tryCatch(n).call(t,o,s,l);return h=!1,u&&f===c&&(u._rejectCallback(f.e,!0,!0),u=null),p}var a=t("./util.js"),c=a.errorObj,l=a.isObject,u={}.hasOwnProperty;return n}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var r=new s(e);o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var i=new e(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,e.resolve(t)._then(c,null,null,n,void 0)};e.prototype.delay=function(t){return l(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){a(r,e)},t);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var r=t.length,n=0;r>n;++n){var i=t[n];if(i.isRejected())return e.reject(i.error());t[n]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,r){function i(){if(o>=c)return l.resolve();var u=a(t[o++]);if(u instanceof e&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),t.promise)}catch(p){return s(p)}if(u instanceof e)return u._then(i,s,null,null,null)}i()}var o=0,c=t.length,l=e.defer();return i(),l.promise}function l(t){var e=new v;return e._settledValue=t,e._bitField=268435456,c(this,e).thenReturn(t)}function u(t){var e=new v;return e._settledValue=t,e._bitField=134217728,c(this,e).thenThrow(t)}function p(t,e,r){this._data=t,this._promise=e,this._context=r}function h(t,e,r){this.constructor$(t,e,r)}function f(t){return p.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,_=t("./util.js").inherits,v=e.PromiseInspection;p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},p.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},p.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,p),h.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var s=new Array(t),a=0;t>a;++a){var c=arguments[a];if(p.isDisposer(c)){var h=c;c=c.promise(),c._setDisposable(h)}else{var d=n(c);d instanceof e&&(c=d._then(f,null,null,{resources:s,index:a},void 0))}s[a]=c}var _=e.settle(s).then(o).then(function(t){_._pushContext();var e;try{e=i.apply(void 0,t)}finally{_._popContext()}return e})._then(l,u,void 0,s,void 0);return s.promise=_,_},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(t,r,n){"use strict";function i(){try{return S.apply(this,arguments)}catch(t){return T.e=t,T}}function o(t){return S=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function c(t){return s(t)?new Error(m(t)):t}function l(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function u(t,e,r){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function p(t,e,r){if(s(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,n),t}function h(t){throw t}function f(t){try{if("function"==typeof t){var e=k.names(t.prototype);if(k.isES5&&e.length>1||e.length>0&&(1!==e.length||"constructor"!==e[0])||P.test(t+""))return!0}return!1}catch(r){return!1}}function d(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}function _(t){return L.test(t)}function v(t,e,r){for(var n=new Array(t),i=0;t>i;++i)n[i]=e+i+r;return n}function m(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){try{p(t,"isOperational",!0)}catch(e){}}function y(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return t instanceof Error&&k.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function x(t,e,r){for(var n=k.names(t),i=0;i<n.length;++i){var o=n[i];r(o)&&k.defineProperty(e,o,k.getDescriptor(t,o))}}function j(t){return t===t.call||t===t.toString||t===t.bind||t===t.apply}var k=t("./es5.js"),E="undefined"==typeof navigator,A=function(){try{var t={};return k.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),T={e:{}},S,F=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},R=function(){
return"string"!==this}.call("string"),C=function(){if(k.isES5){var t=Object.prototype,e=Object.getOwnPropertyNames;return function(r){for(var n=[],i=Object.create(null);null!=r&&r!==t;){var o;try{o=e(r)}catch(s){return n}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(r,c);null!=l&&null==l.get&&null==l.set&&n.push(c)}}r=k.getPrototypeOf(r)}return n}}return function(t){var e=[];for(var r in t)e.push(r);return e}}(),P=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(m(t))}:function(t){if(b(t))return t;try{throw new Error(m(t))}catch(e){return e}}}(),O={isClass:f,isIdentifier:_,inheritedDataKeys:C,getDataPropertyOrDefault:u,thrower:h,isArray:k.isArray,haveGetters:A,notEnumerableProp:p,isPrimitive:s,isObject:a,canEvaluate:E,errorObj:T,tryCatch:o,inherits:F,withAppended:l,maybeWrapAsError:c,wrapsPrimitiveReceiver:R,toFastProperties:d,filledRange:v,toString:m,canAttachTrace:b,ensureErrorObject:I,originatesFromRejection:y,markAsOriginatingFromRejection:g,classString:w,copyDescriptors:x,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof e&&"[object process]"===w(e).toLowerCase(),isNativeFunctionMethod:j};O.isRecentNode=O.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}();try{throw new Error}catch(U){O.lastLineError=U}r.exports=O},{"./es5.js":14}],39:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];for(l=r.slice(),n=l.length,c=0;n>c;c++)l[c].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],66:[function(t,e,r){(function(e){function n(t,e,r,n,i){this.width=t,this.height=e,this.channels=r,this.data=n,this.trailer=i}function i(t,e,r){var n=t+e-r,i=Math.abs(n-t),o=Math.abs(n-e),s=Math.abs(n-r);return o>=i&&s>=i?t:s>=o?e:r}var o=t("fs"),s=t("stream"),a=t("zlib"),c=new e("89504e470d0a1a0a","hex");n.prototype.getPixel=function(t,e){if(t=0|t,e=0|e,0>t||0>e||t>=this.width||e>=this.height)return 0;var r,n,i,o,s=(e*this.width+t)*this.channels;switch(this.channels){case 1:r=n=i=this.data[s],o=255;break;case 2:r=n=i=this.data[s],o=this.data[s+1];break;case 3:r=this.data[s],n=this.data[s+1],i=this.data[s+2],o=255;break;case 4:r=this.data[s],n=this.data[s+1],i=this.data[s+2],o=this.data[s+3]}return(r<<24|n<<16|i<<8|o)>>>0},r.parseStream=function(t,r){function o(e){return t.destroy&&t.destroy(),T.destroy&&T.destroy(),r(e)}function s(){return--C?void 0:r(void 0,new n(u,p,A,_,j))}var l,u,p,h,f,d,_,v,m,g,y,b,w,x,j,k,E,A,T=a.createInflate(),S=0,F=0,R=new e(13),C=2,P=-1,L=0,I=0,O=0;t.on("error",o),T.on("error",o),t.on("end",function(){return t.destroy(),_&&j?s():o(new Error("Corrupt PNG?"))}),T.on("end",function(){return T.destroy&&T.destroy(),L!==_.length?o(new Error("Too little pixel data! (Corrupt PNG?)")):s()}),t.on("data",function(r){if(t.readable)for(var n,i,s=r.length,a=0;a!==s;)switch(S){case 0:if(r[a++]!==c[F++])return o(new Error("Invalid PNG header."));F===c.length&&(S=1,F=0);break;case 1:if(8-F>s-a)r.copy(R,F,a),F+=s-a,a=s;else switch(r.copy(R,F,a,a+8-F),a+=8-F,F=0,l=R.readUInt32BE(0),R.toString("ascii",4,8)){case"IHDR":S=2;break;case"PLTE":if(3!==d)S=7;else{if(l%3!==0)return o(new Error("Invalid PLTE size."));I=l/3,k=new e(l),S=3}break;case"tRNS":if(3!==d)return o(new Error("tRNS for non-paletted images not yet supported."));A++,O=l,E=new e(l),S=4;break;case"IDAT":_||(_=new e(u*p*A)),S=5;break;case"IEND":S=6;break;default:S=7}break;case 2:if(13!==l)return o(new Error("Invalid IHDR chunk."));if(l-F>s-a)r.copy(R,F,a),F+=s-a,a=s;else{if(r.copy(R,F,a,a+l-F),0!==R.readUInt8(10))return o(new Error("Unsupported compression method."));if(0!==R.readUInt8(11))return o(new Error("Unsupported filter method."));if(0!==R.readUInt8(12))return o(new Error("Unsupported interlace method."));switch(a+=l-F,S=8,F=0,u=R.readUInt32BE(0),p=R.readUInt32BE(4),h=R.readUInt8(8),f=255/((1<<h)-1),d=R.readUInt8(9)){case 0:v=1,m=Math.ceil(.125*h),A=1;break;case 2:v=3,m=Math.ceil(.375*h),A=3;break;case 3:v=1,m=1,A=3;break;case 4:v=2,m=Math.ceil(.25*h),A=2;break;case 6:v=4,m=Math.ceil(.5*h),A=4;break;default:return o(new Error("Unsupported color type: "+d))}g=Math.ceil(u*h*v/8),y=new e(v),b=new e(g),w=new e(g),b.fill(0)}break;case 3:if(l-F>s-a)r.copy(k,F,a),F+=s-a,a=s;else for(r.copy(k,F,a,a+l-F),a+=l-F,S=8,F=0,A=1,i=I;i--;)if(k[3*i+0]!==k[3*i+1]||k[3*i+0]!==k[3*i+2]){A=3;break}break;case 4:l-F>s-a?(r.copy(E,F,a),F+=s-a,a=s):(r.copy(E,F,a,a+l-F),a+=l-F,S=8,F=0);break;case 5:l-F>s-a?(T.write(r.slice(a)),F+=s-a,a=s):(T.write(r.slice(a,a+l-F)),a+=l-F,S=8,F=0);break;case 6:if(0!==l)return o(new Error("Invalid IEND chunk."));4-F>s-a?(F+=s-a,a=s):(j=new e(0),a+=4-F,S=9,F=0,T.end());break;case 7:l-F>s-a?(F+=s-a,a=s):(a+=l-F,S=8,F=0);break;case 8:4-F>s-a?(F+=s-a,a=s):(a+=4-F,S=1,F=0);break;case 9:n=new e(F+s-a),j.copy(n),r.copy(n,F,a,s),j=n,F+=s-a,a=s}}),T.on("data",function(t){if(T.readable){var e,r,n,s,a,c=t.length;for(e=0;e!==c;++e){if(-1===P)x=t[e],r=b,b=w,w=r;else switch(x){case 0:b[P]=t[e];break;case 1:b[P]=m>P?t[e]:t[e]+b[P-m]&255;break;case 2:b[P]=t[e]+w[P]&255;break;case 3:b[P]=t[e]+((m>P?w[P]:b[P-m]+w[P])>>>1)&255;break;case 4:b[P]=t[e]+(m>P?w[P]:i(b[P-m],w[P],w[P-m]))&255;break;default:return o(new Error("Unsupported scanline filter: "+x))}if(++P===g){if(L===_.length)return o(new Error("Too much pixel data! (Corrupt PNG?)"));for(s=0,n=0;n!==u;++n){for(a=0;a!==v;++s,++a)switch(h){case 1:y[a]=b[s>>>3]>>7-(7&s)&1;break;case 2:y[a]=b[s>>>2]>>(3-(3&s)<<1)&3;break;case 4:y[a]=b[s>>>1]>>(1-(1&s)<<2)&15;break;case 8:y[a]=b[s];break;default:return o(new Error("Unsupported bit depth: "+h))}switch(d){case 0:_[L++]=y[0]*f;break;case 2:_[L++]=y[0]*f,_[L++]=y[1]*f,_[L++]=y[2]*f;break;case 3:if(y[0]>=I)return o(new Error("Invalid palette index."));switch(A){case 1:_[L++]=k[3*y[0]];break;case 2:_[L++]=k[3*y[0]],_[L++]=y[0]<O?E[y[0]]:255;break;case 3:_[L++]=k[3*y[0]+0],_[L++]=k[3*y[0]+1],_[L++]=k[3*y[0]+2];break;case 4:_[L++]=k[3*y[0]+0],_[L++]=k[3*y[0]+1],_[L++]=k[3*y[0]+2],_[L++]=y[0]<O?E[y[0]]:255}break;case 4:_[L++]=y[0]*f,_[L++]=y[1]*f;break;case 6:_[L++]=y[0]*f,_[L++]=y[1]*f,_[L++]=y[2]*f,_[L++]=y[3]*f}}P=-1}}}})},r.parseFile=function(t,e){return r.parseStream(o.createReadStream(t),e)},r.parseBuffer=function(t,e){var n=new s.Stream;n.readable=!0,n.destroy=function(){n.readable=!1},r.parseStream(n,e),n.emit("data",t),n.readable&&n.emit("end")},r.parse=r.parseBuffer}).call(this,t("buffer").Buffer)},{buffer:17,fs:1,stream:37,zlib:16}],67:[function(t,e,r){"use strict";var n=function(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.play=function(){i||o||(this.rewind(),i=!0,requestAnimationFrame(a))},this.rewind=function(){e=0,r=0,n=null,i=!1,o=!1},this.addContext=function(t){if(s.length>0){var e=s[0].getImageData(0,0,this.width,this.height);t.putImageData(e,0,0)}s.push(t),t._apng_animation=this},this.removeContext=function(t){var e=s.indexOf(t);-1!==e&&(s.splice(e,1),0===s.length&&this.rewind(),"_apng_animation"in t&&delete t._apng_animation)},this.isPlayed=function(){return i},this.isFinished=function(){return o};var t=this,e=0,r=0,n=null,i=!1,o=!1,s=[],a=function(t){for(;i&&t>=e;)c(t);i&&requestAnimationFrame(a)},c=function(a){var c=r++%t.frames.length,l=t.frames[c];if(0==c&&(s.forEach(function(e){e.clearRect(0,0,t.width,t.height)}),n=null,2==l.disposeOp&&(l.disposeOp=1)),n&&1==n.disposeOp?s.forEach(function(t){t.clearRect(n.left,n.top,n.width,n.height)}):n&&2==n.disposeOp&&s.forEach(function(t){t.putImageData(n.iData,n.left,n.top)}),n=l,n.iData=null,2==n.disposeOp&&(n.iData=s[0].getImageData(l.left,l.top,l.width,l.height)),0==l.blendOp&&s.forEach(function(t){t.clearRect(l.left,l.top,l.width,l.height)}),s.forEach(function(t){t.drawImage(l.img,l.left,l.top)}),0==t.numPlays||r/t.frames.length<t.numPlays){for(0==e&&(e=a);a>e+t.playTime;)e+=t.playTime;e+=l.delay}else i=!1,o=!1}};e.exports=n},{}],68:[function(t,e,r){"use strict";for(var n=new Uint32Array(256),i=0;256>i;i++){for(var o=i,s=0;8>s;s++)o=1&o?3988292384^o>>>1:o>>>1;n[i]=o}e.exports=function(t,e,r){e=e||0,r=r||t.length-e;for(var i=-1,o=e,s=e+r;s>o;o++)i=i>>>8^n[255&(i^t[o])];return-1^i}},{}],69:[function(t,e,r){(function(r){"use strict";var n=t("pngparse"),i="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):null,o=function(t,e){var r=t.width,n=t.height,o=null;i?o=i.createImageData(r,n):(o={width:r,height:n},o.data=new Uint8Array(r*n*4));var s=0,a=t.channels;switch(a){case 3:for(var c=0,l=t.data;l[c];)o.data[s+0]=l[c+0],o.data[s+1]=l[c+1],o.data[s+2]=l[c+2],o.data[s+3]=255,s+=4,c+=a;break;case 2:for(var c=0,u=t.data;u[s];)o.data[s+0]=u[c+0],o.data[s+1]=u[c+0],o.data[s+2]=u[c+0],o.data[s+3]=u[c+1],s+=4,c+=a;break;case 1:for(var c=0,p=t.data;p[s];)o.data[s+0]=p[c+0],o.data[s+1]=p[c+0],o.data[s+2]=p[c+0],o.data[s+3]=255,s+=4,c+=a;break;case 4:default:if(o.data.set)o.data.set(t.data);else for(var h=t.data;h[s];)o.data[s+0]=h[s+0],o.data[s+1]=h[s+1],o.data[s+2]=h[s+2],o.data[s+3]=h[s+3],s+=4}if(e){delete e.dataParts;for(var f in e)null==o[f]&&(o[f]=e[f])}return o},s=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n instanceof Array)for(var i=0;i<n.length;i++)t.push(new r(n[i]));else t.push(new r(n))}return r.concat(t)},a=t("bluebird"),c=t("./animation"),l=t("./crc32"),u=new Uint8Array([137,80,78,71,13,10,26,10]);e.exports=function(t){var e=[],r=new Uint8Array(t);return new a(function(i,l){for(var v=0;v<u.length;v++)if(u[v]!=r[v])return void l("Not a PNG file (invalid file signature)");var g=!1;if(p(r,function(t){return"acTL"==t?(g=!0,!1):!0}),!g)return n.parseBuffer(t,function(t,r){t?l(t):(e.push(o(r,k)),i(e))});var b=[],w=[],x=null,j=null,k=new c;if(p(r,function(t,e,r,n){switch(t){case"IHDR":x=e.subarray(r+8,r+8+n),k.width=h(e,r+8),k.height=h(e,r+12);break;case"acTL":k.numPlays=h(e,r+8+4);break;case"fcTL":j&&k.frames.push(j),j={},j.width=h(e,r+8+4),j.height=h(e,r+8+8),j.left=h(e,r+8+12),j.top=h(e,r+8+16);var i=f(e,r+8+20),o=f(e,r+8+22);0==o&&(o=100),j.delay=1e3*i/o,j.delay<=10&&(j.delay=100),k.playTime+=j.delay,j.disposeOp=d(e,r+8+24),j.blendOp=d(e,r+8+25),j.dataParts=[];break;case"fdAT":j&&j.dataParts.push(e.subarray(r+8+4,r+8+n));break;case"IDAT":j&&j.dataParts.push(e.subarray(r+8,r+8+n));break;case"IEND":w.push(_(e,r,12+n));break;default:b.push(_(e,r,12+n))}}),j&&k.frames.push(j),0==k.frames.length)return void l("Not an animated PNG");for(var E=a.resolve(null),A=new s(b),T=new s(w),S=0;S<k.frames.length;S++){j=k.frames[S];var F=[];F.push(u),x.set(m(j.width),0),x.set(m(j.height),4),F.push(y("IHDR",x)),F.push(A);for(var R=0;R<j.dataParts.length;R++)F.push(y("IDAT",j.dataParts[R]));F.push(T),function(t,r){E=E.then(function(){return new a(function(i,s){n.parseBuffer(r,function(r,n){if(r)s(r);else{e.push(o(n,t));for(var a in k)null==e[a]&&(e[a]=k[a]);i()}})})})}(j,new s(F))}E.then(function(){i(e)})})};var p=function(t,e){var r=8;do{var n=h(t,r),i=v(t,r+4,4),o=e(i,t,r,n);r+=12+n}while(o!==!1&&"IEND"!=i&&r<t.length)},h=function(t,e){var r=0;r+=t[0+e]<<24>>>0;for(var n=1;4>n;n++)r+=t[n+e]<<8*(3-n);return r},f=function(t,e){for(var r=0,n=0;2>n;n++)r+=t[n+e]<<8*(1-n);return r},d=function(t,e){return t[e]},_=function(t,e,r){var n=new Uint8Array(r);return n.set(t.subarray(e,e+r)),n},v=function(t,e,r){var n=Array.prototype.slice.call(t.subarray(e,e+r));return String.fromCharCode.apply(String,n)},m=function(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t]},g=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return e},y=function(t,e){var r=t.length+e.length,n=new Uint8Array(new ArrayBuffer(r+8));n.set(m(e.length),0),n.set(g(t),4),n.set(e,8);var i=l(n,4,r);return n.set(m(i),r+4),n}}).call(this,t("buffer").Buffer)},{"./animation":67,"./crc32":68,bluebird:65,buffer:17,pngparse:66}],70:[function(t,e,r){(function(r){var n;n=t(".coffee"===r.slice(-7)?"./src":"./lib"),e.exports=n}).call(this,"/node_modules/pixel-util/index.js")},{"./lib":71,"./src":3}],71:[function(t,e,r){(function(r){var n,i,o,s,a,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t("bluebird"),n=t("./pixel-data").PixelData,("undefined"==typeof window||null===window)&&(a=t("request"),s=t("fs")),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.createBuffer=function(t){var e;return e=function(){switch(this.getTypeof(t)){case"path":return this.fetchFile(t);case"url":return this.fetchBuffer(t);case"datauri":return o.resolve(this.getBuffer(t));case"binary":return o.resolve(this.getBufferBinary(t));case"blob":return this.readAsArrayBuffer(t);case"file":return this.readAsArrayBuffer(t);case"image":return this.fetchBuffer(t.src);default:return o.resolve(t)}}.call(this),e.then(function(t){return new r(new Uint8Array(t))})},e.prototype.fetchFile=function(t){return"undefined"==typeof window||null===window?o.resolve(s.readFileSync(t)):this.fetchArrayBuffer(t)},e.prototype.fetchBuffer=function(t){return"undefined"==typeof window||null===window?new o(function(e,r){return a({url:t,encoding:null},function(t,n,i){return null!=t?r(t):e(i)})}):this.fetchArrayBuffer(t)},e.prototype.fetchArrayBuffer=function(t){return new o(function(e,r){var n;return n=new XMLHttpRequest,n.open("GET",t,!0),n.responseType="arraybuffer",n.send(),n.onerror=function(t){return r(n.statusText)},n.onload=function(){return 4!==n.readyState?r(n.statusText):e(n.response)}})},e}(n),e.exports=new i,e.exports.PixelUtil=i}).call(this,t("buffer").Buffer)},{"./pixel-data":72,bluebird:74,buffer:17,fs:1,request:3}],72:[function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("bluebird"),i=t("./pixel-type").PixelType,n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.fetchImageData=function(t){var e;return e=function(){switch(this.getTypeof(t)){case"path":return this.fetchImageDataViaUrl(t);case"url":return this.fetchImageDataViaUrl(t);case"datauri":return this.fetchImageDataViaDatauri(t);case"binary":return this.fetchImageDataViaBinary(t);case"blob":return this.fetchImageDataViaBlob(t);case"file":return this.fetchImageDataViaBlob(t);case"image":return this.fetchImageDataViaUrl(t.src);default:return this.fetchImageDataViaBuffer(t)}}.call(this)},e.prototype.fetchImageDataViaUrl=function(t){return new o(function(e){return function(r,n){var i;return i=new Image,i.crossOrigin="Anonymous",i.src=t,i.onerror=function(t){return n(t.message)},i.onload=function(){return r(e.getImageData(i))}}}(this))},e.prototype.fetchImageDataViaDatauri=function(t){var e;return e=atob(t.slice(t.indexOf(",")+1)),this.fetchImageDataViaBinary(e)},e.prototype.fetchImageDataViaBinary=function(t){return this.fetchImageDataViaBuffer(this.getBufferBinary(t))},e.prototype.fetchImageDataViaBuffer=function(t){var e;return e=this.getImageType(t).type,this.fetchImageDataViaBlob(new Blob([t],{type:e}))},e.prototype.fetchImageDataViaBlob=function(t){var e;return e="undefined"!=typeof URL&&null!==URL?URL:webkitURL,this.fetchImageDataViaUrl(e.createObjectURL(t))},e.prototype.fetchObjectUrl=function(t){return new o(function(e,r){return e(t)})},e.prototype.getImageData=function(t){var e;return e=document.createElement("canvas").getContext("2d"),e.canvas.width=t.width,e.canvas.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)},e.prototype.createImageData=function(t,e){var r,n,i;return r="undefined"!=typeof Uint8ClampedArray&&null!==Uint8ClampedArray?Uint8ClampedArray:Uint8Array,"undefined"!=typeof document&&null!==document?(n=document.createElement("canvas").getContext("2d"),n.createImageData(t,e)):(i={width:t,height:e},i.data=new r(t*e*4),i)},e.prototype.set=function(t,e){var r,n,i;if(r=Object.prototype.toString.call(t.data),null==t.data.set){if(t.data.length!==e.data.length)throw new RangeError("Source is invalid("+t.data.length+" == "+e.data.length+")");for(n=0,i=[];null!=e.data[n];)t.data[n]=e.data[n],i.push(n++);return i}return t.data.set(e.data)},e}(i),e.exports=new n,e.exports.PixelData=n},{"./pixel-type":73,bluebird:74}],73:[function(t,e,r){(function(r){var n,i,o,s;i=t("bluebird"),o=t("image-type"),s=t("mime"),s.define({"image/vnd.ms-photo":["jxr"]}),s.extensions["image/vnd.ms-photo"]="jxr",s.extensions["image/jpeg"]="jpg",s.extensions["image/tiff"]="tif",n=function(){function t(){}return t.prototype.get=function(t){var e,r,n,i,o;return i=this.getTypeof(t),n=function(){switch(i){case"datauri":return this.getBuffer(t);case"binary":return this.getBufferBinary(t);case"blob":return this.readAsArrayBufferSync(t);case"file":return this.readAsArrayBufferSync(t);default:return t}}.call(this),e=function(){var t;switch(i){case"url":return t=n.split("?"),o=t[0],r=t[1],this.lookupImageType(o);case"path":return this.lookupImageType(n);case"image":return this.lookupImageType(n.src);default:return this.getImageType(n)}}.call(this),null==e&&(e={}),e.type=i,e},t.prototype.detect=function(t){var e,r;return r=this.getTypeof(t),e=function(){switch(r){case"datauri":return i.resolve(this.getBuffer(t));case"binary":return i.resolve(this.getBufferBinary(t));case"blob":return this.readAsArrayBuffer(t);case"file":return this.readAsArrayBuffer(t);default:return i.resolve(t)}}.call(this),e.then(function(t){return function(e){var n,i,o;return n=function(){var t;switch(r){case"url":return t=e.split("?"),o=t[0],i=t[1],this.lookupImageType(o);case"path":return this.lookupImageType(e);case"image":return this.lookupImageType(e.src);default:return this.getImageType(e)}}.call(t),null==n&&(n={}),n.type=r,n}}(this))},t.prototype.getTypeof=function(t){var e;if(r.isBuffer(t))return"buffer";switch(e=Object.prototype.toString.call(t),e=e.toString().match(/(\w+)\]/)[1].toLowerCase()){case"string":switch(!1){case!t.match(/^https?:\/\//):return"url";case!t.match(/^data:image\//):return"datauri";case!t.match(/^(?:\w:)?[\w\-\/\\.~ ]+$/):return"path";default:return"binary"}break;case"htmlimageelement":return"image";default:return e}},t.prototype.getImageType=function(t){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),o(t)},t.prototype.lookupImageType=function(t){var e;return e=s.lookup(t),{mime:e,ext:s.extension(e)}},t.prototype.getBuffer=function(t){return new r(t.slice(t.indexOf(",")+1),"base64")},t.prototype.getBufferBinary=function(t){return new r(t,"binary")},t.prototype.readAsArrayBuffer=function(t){return new i(function(e,r){var n;return"undefined"==typeof FileReader||null===FileReader?r(new ArrayBuffer(0)):(n=new FileReader,n.readAsArrayBuffer(t),n.onload=function(){return e(n.result)})})},t.prototype.readAsArrayBufferSync=function(t){var e;return"undefined"!=typeof FileReaderSync&&null!==FileReaderSync?(e=new FileReaderSync,e.readAsArrayBuffer(t)):new ArrayBuffer(0)},t}(),e.exports=new n,e.exports.PixelType=n}).call(this,t("buffer").Buffer)},{bluebird:74,buffer:17,"image-type":75,mime:77}],74:[function(e,r,n){(function(e,i){!function(e){if("object"==typeof n&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=e()}}(function(){var t,r,n;return function o(t,e,r){function n(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,o,t,e,r)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function i(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._lateQueue.push(t,e,r),this._queueTick()}function o(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.push(t,e,r),this._queueTick()}function s(t){var e=this._getDomain();if(void 0!==e){var r=e.bind(t._settlePromises);this._normalQueue.push(r,t,void 0)}else this._normalQueue._pushOne(t);this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=t("./schedule.js"),u=t("./queue.js"),p=t("./util.js");n.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(t,e){1===arguments.length&&(e=t,t=function(){throw e});var r=this._getDomain();if(void 0!==r&&(t=r.bind(t)),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},n.prototype._getDomain=function(){};p.hasDevTools?(l.isStatic&&(l=function(t){setTimeout(t,0)}),n.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?i.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},n.prototype.invoke=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},n.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=o,n.prototype.settlePromises=s),n.prototype.invokeFirst=function(t,e,r){var n=this._getDomain();void 0!==n&&(t=n.bind(t)),this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=a},{"./queue.js":28,"./schedule.js":31,"./util.js":38,events:39}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},o=function(t,e){this._setBoundTo(t),this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var a=r(n),c=new t(e);c._propagateFrom(this,1);var l=this._target();if(a instanceof t){var u={promiseRejectionQueued:!1,promise:c,target:l,bindingPromise:a};l._then(e,i,c._progress,c,u),a._then(o,s,c._progress,c,u)}else c._setBoundTo(n),c._resolveCallback(l);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(n,i){var o=r(n),s=new t(e);return o instanceof t?o._then(function(t){s._setBoundTo(t),s._resolveCallback(i)},s._reject,s._progress,s,null):(s._setBoundTo(n),s._resolveCallback(i)),s}}},{}],4:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=n,e.exports=o},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+a.classString(t)+" has no method '"+a.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){var e=this.pop(),n=r(t,e);return n.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util.js"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;++i)r[i-1]=arguments[i];return r.push(t),this._then(n,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=o;else if(c){var n=s(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),i=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(t,r,n){"use strict";r.exports=function(){function r(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);w(this,r),e>32&&this.uncycle()}function n(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=n[a];if(e[i]!==c)break;e.pop(),i--}e=n}}function s(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=_.test(n)||"    (No stack trace)"===n,o=i&&g(n);i&&!o&&(m&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||_.test(n))break}return r>0&&(e=e.slice(r)),e}function c(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+l(e)+">, no stack trace)"}function l(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function u(t){var e=t.match(y);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var p,h=t("./async.js"),f=t("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,_=null,v=null,m=!1;f.inherits(r,Error),r.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=r[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var c=n>0?e[n-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=n-2;u>=0;--u)e[u]._length=l,l++;return}}}},r.prototype.parent=function(){return this._parent},r.prototype.hasParent=function(){return void 0!==this._parent},r.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=r.parseStackAndMessage(t),a=e.message,c=[e.stack],l=this;void 0!==l;)c.push(s(l.stack.split("\n"))),l=l._parent;o(c),i(c),f.notEnumerableProp(t,"stack",n(a,c)),f.notEnumerableProp(t,"__stackCleaned__",!0)}},r.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],
{message:r,stack:s(e)}},r.formatAndLogError=function(t,e){if("undefined"!=typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+v(n,t)}else r=e+String(t);"function"==typeof p?p(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},r.unhandledRejection=function(t){r.formatAndLogError(t,"^--- With additional stack trace: ")},r.isSupported=function(){return"function"==typeof w},r.fireRejectionEvent=function(t,e,n,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(s){h.throwLater(s)}var a=!1;try{a=x(t,n,i)}catch(s){a=!0,h.throwLater(s)}var c=!1;if(b)try{c=b(t.toLowerCase(),{reason:n,promise:i})}catch(s){c=!0,h.throwLater(s)}a||o||c||"unhandledRejection"!==t||r.formatAndLogError(n,"Unhandled rejection ")};var g=function(){return!1},y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;r.setBounds=function(t,e){if(r.isSupported()){for(var n,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,c=-1,l=0;l<o.length;++l){var p=u(o[l]);if(p){n=p.fileName,a=p.line;break}}for(var l=0;l<s.length;++l){var p=u(s[l]);if(p){i=p.fileName,c=p.line;break}}0>a||0>c||!n||!i||n!==i||a>=c||(g=function(t){if(d.test(t))return!0;var e=u(t);return e&&e.fileName===n&&a<=e.line&&e.line<=c?!0:!1})}};var b,w=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():c(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,_=t,v=e;var r=Error.captureStackTrace;return g=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,v=e,m=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in n||!i?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?c(e):e.toString()},null):(_=t,v=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),x=function(){if(f.isNode)return function(t,r,n){return"rejectionHandled"===t?e.emit(t,n):e.emit(t,r,n)};var t=!1,r=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(i){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){r=!1}r&&(b=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!0,r)),n?!self.dispatchEvent(n):!1});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=s[t],i=self[n];return i?("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(p=function(t){console.warn(t)},f.isNode&&e.stderr.isTTY?p=function(t){e.stderr.write("[31m"+t+"[39m\n")}:f.isNode||"string"!=typeof(new Error).stack||(p=function(t){console.warn("%c"+t,"color: red")})),r}},{"./async.js":2,"./util.js":38}],8:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t).call(r,e);if(n===a)return n;var i=c(r);return i.length?(a.e=new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,c=t("./es5.js").keys,l=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,i=this._promise,o=i._boundTo,c=0,l=this._instances.length;l>c;++c){var u=this._instances[c],p=u===Error||null!=u&&u.prototype instanceof Error;if(p&&t instanceof u){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}if("function"==typeof u&&!p){var f=n(u,t);if(f===a){t=a.e;break}if(f){var h=s(r).call(o,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){this._trace=new e(o())}function i(){return r()?new n:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&s.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,i}},{}],10:[function(t,r,n){"use strict";r.exports=function(r,n){var i,o,s=t("./async.js"),a=t("./errors.js").Warning,c=t("./util.js"),l=c.canAttachTrace,u=!1||c.isNode&&(!!e.env.BLUEBIRD_DEBUG||"development"===e.env.NODE_ENV);return u&&s.disableTrampolineIfNecessary(),r.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},r.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",i,void 0,this)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",o,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},r.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},r.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},r.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},r.prototype._captureStackTrace=function(){return u&&(this._trace=new n(this._peekContext())),this},r.prototype._attachExtraTrace=function(t,e){if(u&&l(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=n.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},r.prototype._warn=function(t){var e=new a(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var i=n.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(e,"")},r.onPossiblyUnhandledRejection=function(t){o="function"==typeof t?t:void 0},r.onUnhandledRejectionHandled=function(t){i="function"==typeof t?t:void 0},r.longStackTraces=function(){if(s.haveItemsQueued()&&u===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");u=n.isSupported(),u&&s.disableTrampolineIfNecessary()},r.hasLongStackTraces=function(){return u&&n.isSupported()},n.isSupported()||(r.longStackTraces=function(){},u=!1),function(){return u}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var n=t("./util.js"),i=n.isPrimitive,o=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},n=function(){},s=function(){throw void 0},a=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return void 0===t?this.then(n):o&&i(t)?this._then(a(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return void 0===t?this.then(s):o&&i(t)?this._then(a(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],13:[function(t,e,r){"use strict";function n(t,e){function r(n){return this instanceof r?(p(this,"message","string"==typeof n?n:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return u(r,Error),r}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js"),c=a.freeze,l=t("./util.js"),u=l.inherits,p=l.notEnumerableProp,h=n("Warning","warning"),f=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(_.prototype[m[g]]=Array.prototype[m[g]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return y--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),p(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var n;return n=h&&f(e)?r?s(e):a(e):r?i:o,t._then(n,d,void 0,e,void 0)}function l(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=n(s,i);if(a instanceof e)return a=a._target(),c(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function u(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo,t):i(t);if(void 0!==o){var s=n(o,r);if(s instanceof e)return s=s._target(),c(s,t,!0)}return t}var p=t("./util.js"),h=p.wrapsPrimitiveReceiver,f=p.isPrimitive,d=p.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?l:u,e?l:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=p(r[o])(t);if(n._popContext(),s===u){n._pushContext();var a=e.reject(u.e);return n._popContext(),a}var c=i(s,n);if(c instanceof e)return c}return null}function s(t,r,i,o){var s=this._promise=new e(n);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var a=t("./errors.js"),c=a.TypeError,l=t("./util.js"),u=l.errorObj,p=l.tryCatch,h=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===u)return this._promise._rejectCallback(t.e,!1,!0);var r=t.value;if(t.done===!0)this._promise._resolveCallback(r);else{var n=i(r,this._promise);if(!(n instanceof e)&&(n=o(n,this._yieldHandlers,this._promise),null===n))return void this._throw(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(t)},e.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var n=new r(o).promise();return void 0!==t?n.spread(t):n}}},{"./util.js":38}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:d,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function c(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj,f={},d=[];u.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===f){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,l=this._promise._boundTo;this._promise._pushContext();var u=p(c).call(l,t,r,o);if(this._promise._popContext(),u===h)return this._reject(u.e);var d=i(u,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,n[r]=f,d._proxyPromiseArray(this,r);if(!d._isFulfilled())return this._reject(d._reason());u=d._value()}n[r]=u}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;r>o;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):c(t,e,r,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},e.attempt=e["try"]=function(t,n,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var c=new e(r);c._captureStackTrace(),c._pushContext();var l=o.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return c._popContext(),c._resolveFromSyncValue(l),c},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=a(e).apply(r._boundTo,[null].concat(t));i===c&&s.throwLater(i.e)}function n(t,e){var r=this,n=r._boundTo,i=void 0===t?a(e).call(n,null):a(e).call(n,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=r._target(),i=n._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(r._boundTo,t);o===c&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,a=t.promise,c=t.receiver,l=o(i).call(c,r);if(l===s){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var u=n.canAttachTrace(l.e)?l.e:new Error(n.toString(l.e));a._attachExtraTrace(u),a._progress(l.e)}}else l instanceof e?l._then(a._progress,null,null,a,void 0):a._progress(l)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):i.invoke(o,c,t);else{var l=this._receiverAt(s);"function"==typeof a?a.call(l,t,c):l instanceof r&&!l._isResolved()&&l._promiseProgressed(t,c)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e,r){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==u&&this._resolveFromResolver(t)}function r(t){var r=new e(u);r._fulfillmentHandler0=t,r._rejectionHandler0=t,r._progressHandler0=t,r._promise0=t,r._receiver0=t,r._settledValue=t}var n=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new e.PromiseInspection(this._target())},o=function(t){return e.reject(new l(t))},s=t("./util.js"),a=t("./async.js"),c=t("./errors.js"),l=e.TypeError=c.TypeError;e.RangeError=c.RangeError,e.CancellationError=c.CancellationError,e.TimeoutError=c.TimeoutError,e.OperationalError=c.OperationalError,e.RejectionError=c.OperationalError,e.AggregateError=c.AggregateError;var u=function(){},p={},h={e:null},f=t("./thenables.js")(e,u),d=t("./promise_array.js")(e,u,f,o),_=t("./captured_trace.js")(),v=t("./debuggability.js")(e,_),m=t("./context.js")(e,_,v),g=t("./catch_filter.js")(h),y=t("./promise_resolver.js"),b=y._nodebackForPromise,w=s.errorObj,x=s.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var n,i=new Array(r-1),o=0;for(n=0;r-1>n;++n){var s=arguments[n];if("function"!=typeof s)return e.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[n];var a=new g(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},e.prototype.then=function(t,e,r){if(v()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(n+=", "+s.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);n._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,p,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new d(this).promise()},e.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var r=new e(u),n=x(t)(b(r));return n===w&&r._rejectCallback(n.e,!0,!0),r},e.all=function(t){return new d(t).promise()},e.defer=e.pending=function(){var t=new e(u);return new y(t)},e.cast=function(t){var r=f(t);if(!(r instanceof e)){var n=r;r=new e(u),r._fulfillUnchecked(n)}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(u);return r._captureStackTrace(),r._rejectCallback(t,!0),r},e.setScheduler=function(t){if("function"!=typeof t)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},e.prototype._then=function(t,r,n,i,o){var s=void 0!==o,c=s?o:new e(u);s||(c._propagateFrom(this,5),c._captureStackTrace());var l=this._target();l!==this&&(void 0===i&&(i=this._boundTo),s||c._setIsMigrated());var p=l._addCallbacks(t,r,n,c,i);return l._isResolved()&&!l._isSettlePromisesQueued()&&a.invoke(l._settlePromiseAtPostResolution,l,p),c},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r){var n=t._fulfillmentHandlerAt(r),i=t._rejectionHandlerAt(r),o=t._progressHandlerAt(r),s=t._promiseAt(r),a=t._receiverAt(r);s instanceof e&&s._setIsMigrated(),this._addCallbacks(n,i,o,s,a)},e.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=n,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,r){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(n(),!1,!0);var i=f(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(r?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),c=0;a>c;++c)s._migrateCallbacks(this,c);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,r){r||s.markAsOriginatingFromRejection(t);var n=s.ensureErrorObject(t),i=n===t;this._attachExtraTrace(n,e?i:!1),this._reject(t,i?void 0:n)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=x(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===w&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,r,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==p||this._isRejected()?x(t).call(e,r):x(t).apply(this._boundTo,r),i._popContext(),o===w||o===i||o===h){var s=o===i?n():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),n=r instanceof e;if(n&&r._isMigrated())return r._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,c=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?n?this._settlePromiseFromHandler(i,c,s,r):i.call(c,s,r):c instanceof d?c._isResolved()||(this._isFulfilled()?c._promiseFulfilled(s,r):c._promiseRejected(s,r)):n&&(this._isFulfilled()?r._fulfill(s):r._reject(s,o)),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=n();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var r=n();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(_.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=n,t("./progress.js")(e,d),t("./method.js")(e,u,f,o),t("./bind.js")(e,u,f),t("./finally.js")(e,h,f),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,d,f,u),e.Promise=e,t("./map.js")(e,d,o,f,u),t("./cancel.js")(e),t("./using.js")(e,o,f,m),t("./generators.js")(e,o,u,f),t("./nodeify.js")(e),t("./call_get.js")(e),t("./props.js")(e,d,f,o),t("./race.js")(e,u,f,o),t("./reduce.js")(e,d,o,f,u),t("./settle.js")(e,d),t("./some.js")(e,d,o),t("./promisify.js")(e,u),t("./any.js")(e),t("./each.js")(e,u),
t("./timers.js")(e,u),t("./filter.js")(e,u),s.toFastProperties(e),s.toFastProperties(e.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new e(u)),_.setBounds(a.firstLineError,s.lastLineError),e}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),c=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,r){var s=n(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(l,this._reject,void 0,this,r):void this._reject(s._reason());if(s=s._value(),!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!c(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(-5===r?this._resolveEmptyArray():this._resolve(o(r)));var u=this.getActualLength(s.length);this._length=u,this._values=this.shouldCopyValues()?new Array(u):this._values;for(var p=this._promise,h=0;u>h;++h){var f=this._isResolved(),d=n(s[h],p);d instanceof e?(d=d._target(),f?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,h):d._isFulfilled()?this._promiseFulfilled(d._value(),h):this._promiseRejected(d._reason(),h)):f||this._promiseFulfilled(d,h)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new p(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=f.keys(t),i=0;i<r.length;++i){var o=r[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,r){if(null!==t){if(e){var n=i(c(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}}var s,a=t("./util.js"),c=a.maybeWrapAsError,l=t("./errors.js"),u=l.TimeoutError,p=l.OperationalError,h=a.haveGetters,f=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},h){var _={get:function(){return o(this.promise)}};f.defineProperty(s.prototype,"asCallback",_),f.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new u("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!w.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,r){var n=f.getDataPropertyOrDefault(t,e+r,b);return n?i(n):!1}function s(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,r,n){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=n===x?!0:x(u,p,t);"function"!=typeof p||f.isNativeFunctionMethod(p)||i(p)||o(t,u,e)||!n(u,p,t,h)||c.push(u,p)}return s(c,e,r),c}function c(t,n,i,o){function s(){var i=n;n===h&&(i=this);var o=new e(r);o._captureStackTrace();var s="string"==typeof c&&this!==a?this[c]:t,l=d(o);try{s.apply(i,_(arguments,l))}catch(u){o._rejectCallback(v(u),!0,!0)}return o}var a=function(){return this}(),c=t;return"string"==typeof c&&(t=o),f.notEnumerableProp(s,"__isPromisified__",!0),s}function l(t,e,r,n){for(var i=new RegExp(j(e)+"$"),o=a(t,e,i,r),s=0,c=o.length;c>s;s+=2){var l=o[s],u=o[s+1],p=l+e;t[p]=n===k?k(l,h,l,u,e):n(u,function(){return k(l,h,l,u,e)})}return f.toFastProperties(t),t}function u(t,e){return k(t,e,void 0,t)}var p,h={},f=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,_=f.withAppended,v=f.maybeWrapAsError,m=f.canEvaluate,g=t("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=/^(?:length|name|arguments|caller|callee|prototype|__isPromisified__)$/,x=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},k=m?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new g("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var r=u(t,arguments.length<2?h:e);return f.copyDescriptors(t,r,n),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=y);var n=e.filter;"function"!=typeof n&&(n=x);var i=e.promisifier;if("function"!=typeof i&&(i=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=f.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&f.isClass(a)&&(l(a.prototype,r,n,i),l(a,r,n,i))}return l(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var e=l.keys(t),r=e.length,n=new Array(2*r),i=0;r>i;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function s(t){var r,s=n(t);return c(s)?(r=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&r._propagateFrom(s,4),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),c=a.isObject,l=t("./es5.js");a.inherits(o,r),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),o=0,s=this.length();s>o;++o)n[this._values[o+i]]=this._values[o];this._resolve(n)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;i>o;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=i},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var c=n(t);if(c instanceof e)return a(c);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var l=new e(r);void 0!==o&&l._propagateFrom(o,5);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(u,p,void 0,l,null)}return l}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var c=i(n,this._promise),u=!1,p=c instanceof e;p&&(c=c._target(),c._isPending()?c._proxyPromiseArray(this,-1):c._isFulfilled()?(n=c._value(),this._gotAccum=!0):(this._reject(c._reason()),u=!0)),p||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=n,u||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function c(t,e,r,i){if("function"!=typeof e)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,r,i);return o.promise()}var l=t("./async.js"),u=t("./util.js"),p=u.tryCatch,h=u.errorObj;u.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,c=null!==a,l=this._gotAccum,u=this._valuesPhase;if(!u)for(u=this._valuesPhase=new Array(s),o=0;s>o;++o)u[o]=0;if(o=u[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=l=!0,u[r]=0===o?1:2):-1===r?(this._accum=t,this._gotAccum=l=!0):0===o?u[r]=1:(u[r]=2,this._accum=t),l){for(var f,d=this._callback,_=this._promise._boundTo,v=this._reducingIndex;s>v;++v)if(o=u[v],2!==o){if(1!==o)return;if(t=n[v],this._promise._pushContext(),c?(a.push(t),f=p(d).call(_,t,v,s)):f=p(d).call(_,this._accum,t,v,s),this._promise._popContext(),f===h)return this._reject(f.e);var m=i(f,this._promise);if(m instanceof e){if(m=m._target(),m._isPending())return u[v]=4,m._proxyPromiseArray(this,v);if(!m._isFulfilled())return this._reject(m._reason());f=m._value()}this._reducingIndex=v+1,this._accum=f}else this._reducingIndex=v+1;this._resolve(c?a:this._accum)}},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,r,n){return c(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(t,r,n){"use strict";var o,s=t("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var c=i.setImmediate,l=e.nextTick;o=s.isRecentNode?function(t){c.call(i,t)}:function(t){l.call(e,t)}}else"undefined"!=typeof MutationObserver?(o=function(t){var e=document.createElement("div"),r=new MutationObserver(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0):o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:a;r.exports=o},{"./util":38}],32:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(n,r),n.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new n(t).promise()},e.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":38}],33:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,c=t("./errors.js").AggregateError,l=s.isArray;s.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new c,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(l(t)){if(t instanceof e)return t;if(o(t)){var u=new e(r);return t._then(u._fulfillUnchecked,u._rejectUncheckedCheckError,u._progressUnchecked,u,null),u}var p=a.tryCatch(i)(t);if(p===c){n&&n._pushContext();var u=e.reject(p.e);return n&&n._popContext(),u}if("function"==typeof p)return s(t,p,n)}return t}function i(t){return t.then}function o(t){return u.call(t,"_promise0")}function s(t,n,i){function o(r){u&&(t===r?u._rejectCallback(e._makeSelfResolutionError(),!1,!0):u._resolveCallback(r),u=null)}function s(t){u&&(u._rejectCallback(t,h,!0),u=null)}function l(t){u&&"function"==typeof u._progress&&u._progress(t)}var u=new e(r),p=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var h=!0,f=a.tryCatch(n).call(t,o,s,l);return h=!1,u&&f===c&&(u._rejectCallback(f.e,!0,!0),u=null),p}var a=t("./util.js"),c=a.errorObj,l=a.isObject,u={}.hasOwnProperty;return n}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var r=new s(e);o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var i=new e(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,e.resolve(t)._then(c,null,null,n,void 0)};e.prototype.delay=function(t){return l(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){a(r,e)},t);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var r=t.length,n=0;r>n;++n){var i=t[n];if(i.isRejected())return e.reject(i.error());t[n]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,r){function i(){if(o>=c)return l.resolve();var u=a(t[o++]);if(u instanceof e&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),t.promise)}catch(p){return s(p)}if(u instanceof e)return u._then(i,s,null,null,null)}i()}var o=0,c=t.length,l=e.defer();return i(),l.promise}function l(t){var e=new v;return e._settledValue=t,e._bitField=268435456,c(this,e).thenReturn(t)}function u(t){var e=new v;return e._settledValue=t,e._bitField=134217728,c(this,e).thenThrow(t)}function p(t,e,r){this._data=t,this._promise=e,this._context=r}function h(t,e,r){this.constructor$(t,e,r)}function f(t){return p.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,_=t("./util.js").inherits,v=e.PromiseInspection;p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},p.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},p.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,p),h.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var s=new Array(t),a=0;t>a;++a){var c=arguments[a];if(p.isDisposer(c)){var h=c;c=c.promise(),c._setDisposable(h)}else{var d=n(c);d instanceof e&&(c=d._then(f,null,null,{resources:s,index:a},void 0))}s[a]=c}var _=e.settle(s).then(o).then(function(t){_._pushContext();var e;try{e=i.apply(void 0,t)}finally{_._popContext()}return e})._then(l,u,void 0,s,void 0);return s.promise=_,_},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(t,r,n){"use strict";function i(){try{return S.apply(this,arguments)}catch(t){return T.e=t,T}}function o(t){return S=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function c(t){return s(t)?new Error(m(t)):t}function l(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function u(t,e,r){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function p(t,e,r){if(s(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,n),t}function h(t){throw t}function f(t){try{if("function"==typeof t){var e=k.names(t.prototype);if(k.isES5&&e.length>1||e.length>0&&(1!==e.length||"constructor"!==e[0])||P.test(t+""))return!0}return!1}catch(r){return!1}}function d(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}function _(t){return L.test(t)}function v(t,e,r){for(var n=new Array(t),i=0;t>i;++i)n[i]=e+i+r;return n}function m(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){try{p(t,"isOperational",!0)}catch(e){}}function y(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return t instanceof Error&&k.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function x(t,e,r){for(var n=k.names(t),i=0;i<n.length;++i){var o=n[i];r(o)&&k.defineProperty(e,o,k.getDescriptor(t,o))}}function j(t){return t===t.call||t===t.toString||t===t.bind||t===t.apply}var k=t("./es5.js"),E="undefined"==typeof navigator,A=function(){try{var t={};return k.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),T={e:{}},S,F=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},R=function(){return"string"!==this}.call("string"),C=function(){if(k.isES5){var t=Object.prototype,e=Object.getOwnPropertyNames;return function(r){for(var n=[],i=Object.create(null);null!=r&&r!==t;){var o;try{o=e(r)}catch(s){return n}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(r,c);null!=l&&null==l.get&&null==l.set&&n.push(c)}}r=k.getPrototypeOf(r)}return n}}return function(t){var e=[];for(var r in t)e.push(r);return e}}(),P=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(m(t))}:function(t){if(b(t))return t;try{throw new Error(m(t))}catch(e){return e}}}(),O={isClass:f,isIdentifier:_,inheritedDataKeys:C,getDataPropertyOrDefault:u,thrower:h,isArray:k.isArray,haveGetters:A,notEnumerableProp:p,isPrimitive:s,isObject:a,canEvaluate:E,errorObj:T,tryCatch:o,inherits:F,withAppended:l,maybeWrapAsError:c,wrapsPrimitiveReceiver:R,toFastProperties:d,filledRange:v,toString:m,canAttachTrace:b,ensureErrorObject:I,originatesFromRejection:y,markAsOriginatingFromRejection:g,classString:w,copyDescriptors:x,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof e&&"[object process]"===w(e).toLowerCase(),isNativeFunctionMethod:j};O.isRecentNode=O.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}();try{throw new Error}catch(U){O.lastLineError=U}r.exports=O},{"./es5.js":14}],39:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),c=1;n>c;c++)o[c-1]=arguments[c];for(l=r.slice(),n=l.length,c=0;n>c;c++)l[c].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],75:[function(t,e,r){arguments[4][54][0].apply(r,arguments)},{dup:54,"file-type":76}],76:[function(t,e,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],77:[function(t,e,r){(function(r){function n(){this.types=Object.create(null),this.extensions=Object.create(null)}var i=(t("path"),t("fs"));n.prototype.define=function(t){for(var e in t){for(var n=t[e],i=0;i<n.length;i++)r.env.DEBUG_MIME&&this.types[n]&&console.warn(this._loading.replace(/.*\//,""),'changes "'+n[i]+'" extension type from '+this.types[n]+" to "+e),this.types[n[i]]=e;this.extensions[e]||(this.extensions[e]=n[0])}},n.prototype.load=function(t){this._loading=t;var e={},r=i.readFileSync(t,"ascii"),n=r.split(/[\r\n]+/);n.forEach(function(t){var r=t.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);e[r.shift()]=r}),this.define(e),this._loading=null},n.prototype.lookup=function(t,e){var r=t.replace(/.*[\.\/\\]/,"").toLowerCase();return this.types[r]||e||this.default_type},n.prototype.extension=function(t){var e=t.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[e]};var o=new n;o.define(t("./types.json")),o.default_type=o.lookup("bin"),o.Mime=n,o.charsets={lookup:function(t,e){return/^text\//.test(t)?"UTF-8":e}},e.exports=o}).call(this,t("_process"))},{"./types.json":78,_process:25,fs:1,path:24}],78:[function(t,e,r){arguments[4][57][0].apply(r,arguments)},{dup:57}],79:[function(t,e,r){var n,i,o,s,a,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;i=t("pixel-util").PixelUtil,s=t("pixel-gif"),a=t("pixel-jpg"),
c=t("pixel-png"),o=t("pixel-bmp"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.parse=function(t){return this.detect(t).then(function(e){switch(e.ext){case"gif":return s.parse(t);case"png":return c.parse(t);case"jpg":return a.parse(t);case"bmp":return o.parse(t);default:return this.Promise.reject(e.ext+" is Unsupported type.")}})},e}(i),e.exports=new n,e.exports.Pixel=n},{"pixel-bmp":41,"pixel-gif":46,"pixel-jpg":58,"pixel-png":63,"pixel-util":70}]},{},[79])(79)});
//# sourceMappingURL=pixel.min.js.map